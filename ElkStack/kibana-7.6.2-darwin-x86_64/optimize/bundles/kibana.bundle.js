var __kbnBundles__=typeof __kbnBundles__==="object"?__kbnBundles__:{};__kbnBundles__["kibana"]=function(modules){function webpackJsonpCallback(data){var chunkIds=data[0];var moreModules=data[1];var executeModules=data[2];var moduleId,chunkId,i=0,resolves=[];for(;i<chunkIds.length;i++){chunkId=chunkIds[i];if(Object.prototype.hasOwnProperty.call(installedChunks,chunkId)&&installedChunks[chunkId]){resolves.push(installedChunks[chunkId][0])}installedChunks[chunkId]=0}for(moduleId in moreModules){if(Object.prototype.hasOwnProperty.call(moreModules,moduleId)){modules[moduleId]=moreModules[moduleId]}}if(parentJsonpFunction)parentJsonpFunction(data);while(resolves.length){resolves.shift()()}deferredModules.push.apply(deferredModules,executeModules||[]);return checkDeferredModules()}function checkDeferredModules(){var result;for(var i=0;i<deferredModules.length;i++){var deferredModule=deferredModules[i];var fulfilled=true;for(var j=1;j<deferredModule.length;j++){var depId=deferredModule[j];if(installedChunks[depId]!==0)fulfilled=false}if(fulfilled){deferredModules.splice(i--,1);result=__webpack_require__(__webpack_require__.s=deferredModule[0])}}return result}var installedModules={};var installedCssChunks={3:0,7:0,9:0,13:0,15:0,20:0};var installedChunks={3:0,7:0,9:0,13:0,15:0,20:0};var deferredModules=[];function jsonpScriptSrc(chunkId){return __webpack_require__.p+""+({}[chunkId]||chunkId)+".bundle.js"}function __webpack_require__(moduleId){if(installedModules[moduleId]){return installedModules[moduleId].exports}var module=installedModules[moduleId]={i:moduleId,l:false,exports:{}};modules[moduleId].call(module.exports,module,module.exports,__webpack_require__);module.l=true;return module.exports}__webpack_require__.e=function requireEnsure(chunkId){var promises=[];var cssChunks={27:1};if(installedCssChunks[chunkId])promises.push(installedCssChunks[chunkId]);else if(installedCssChunks[chunkId]!==0&&cssChunks[chunkId]){promises.push(installedCssChunks[chunkId]=new Promise((function(resolve,reject){var href=""+({}[chunkId]||chunkId)+".style.css";var fullhref=__webpack_require__.p+href;var existingLinkTags=document.getElementsByTagName("link");for(var i=0;i<existingLinkTags.length;i++){var tag=existingLinkTags[i];var dataHref=tag.getAttribute("data-href")||tag.getAttribute("href");if(tag.rel==="stylesheet"&&(dataHref===href||dataHref===fullhref))return resolve()}var existingStyleTags=document.getElementsByTagName("style");for(var i=0;i<existingStyleTags.length;i++){var tag=existingStyleTags[i];var dataHref=tag.getAttribute("data-href");if(dataHref===href||dataHref===fullhref)return resolve()}var linkTag=document.createElement("link");linkTag.rel="stylesheet";linkTag.type="text/css";linkTag.onload=resolve;linkTag.onerror=function(event){var request=event&&event.target&&event.target.src||fullhref;var err=new Error("Loading CSS chunk "+chunkId+" failed.\n("+request+")");err.code="CSS_CHUNK_LOAD_FAILED";err.request=request;delete installedCssChunks[chunkId];linkTag.parentNode.removeChild(linkTag);reject(err)};linkTag.href=fullhref;var head=document.getElementsByTagName("head")[0];head.appendChild(linkTag)})).then((function(){installedCssChunks[chunkId]=0})))}var installedChunkData=installedChunks[chunkId];if(installedChunkData!==0){if(installedChunkData){promises.push(installedChunkData[2])}else{var promise=new Promise((function(resolve,reject){installedChunkData=installedChunks[chunkId]=[resolve,reject]}));promises.push(installedChunkData[2]=promise);var script=document.createElement("script");var onScriptComplete;script.charset="utf-8";script.timeout=120;if(__webpack_require__.nc){script.setAttribute("nonce",__webpack_require__.nc)}script.src=jsonpScriptSrc(chunkId);var error=new Error;onScriptComplete=function(event){script.onerror=script.onload=null;clearTimeout(timeout);var chunk=installedChunks[chunkId];if(chunk!==0){if(chunk){var errorType=event&&(event.type==="load"?"missing":event.type);var realSrc=event&&event.target&&event.target.src;error.message="Loading chunk "+chunkId+" failed.\n("+errorType+": "+realSrc+")";error.name="ChunkLoadError";error.type=errorType;error.request=realSrc;chunk[1](error)}installedChunks[chunkId]=undefined}};var timeout=setTimeout((function(){onScriptComplete({type:"timeout",target:script})}),12e4);script.onerror=script.onload=onScriptComplete;document.head.appendChild(script)}}return Promise.all(promises)};__webpack_require__.m=modules;__webpack_require__.c=installedModules;__webpack_require__.d=function(exports,name,getter){if(!__webpack_require__.o(exports,name)){Object.defineProperty(exports,name,{enumerable:true,get:getter})}};__webpack_require__.r=function(exports){if(typeof Symbol!=="undefined"&&Symbol.toStringTag){Object.defineProperty(exports,Symbol.toStringTag,{value:"Module"})}Object.defineProperty(exports,"__esModule",{value:true})};__webpack_require__.t=function(value,mode){if(mode&1)value=__webpack_require__(value);if(mode&8)return value;if(mode&4&&typeof value==="object"&&value&&value.__esModule)return value;var ns=Object.create(null);__webpack_require__.r(ns);Object.defineProperty(ns,"default",{enumerable:true,value:value});if(mode&2&&typeof value!="string")for(var key in value)__webpack_require__.d(ns,key,function(key){return value[key]}.bind(null,key));return ns};__webpack_require__.n=function(module){var getter=module&&module.__esModule?function getDefault(){return module["default"]}:function getModuleExports(){return module};__webpack_require__.d(getter,"a",getter);return getter};__webpack_require__.o=function(object,property){return Object.prototype.hasOwnProperty.call(object,property)};__webpack_require__.p="__REPLACE_WITH_PUBLIC_PATH__";__webpack_require__.oe=function(err){console.error(err);throw err};var jsonpArray=window["webpackJsonp"]=window["webpackJsonp"]||[];var oldJsonpFunction=jsonpArray.push.bind(jsonpArray);jsonpArray.push=webpackJsonpCallback;jsonpArray=jsonpArray.slice();for(var i=0;i<jsonpArray.length;i++)webpackJsonpCallback(jsonpArray[i]);var parentJsonpFunction=oldJsonpFunction;deferredModules.push([1843,0]);return checkDeferredModules()}({0:function(module,exports){module.exports=__kbnSharedDeps__.React},1:function(module,exports){module.exports=__kbnSharedDeps__.KbnI18n},12:function(module,exports){module.exports=__kbnSharedDeps__.Jquery},14:function(module,exports){module.exports=__kbnSharedDeps__.Moment},15:function(module,exports){module.exports=vendors_3},16:function(module,exports){module.exports=vendors_1},174:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});Object.defineProperty(exports,"isDefaultValue",{enumerable:true,get:function get(){return _is_default_value.isDefaultValue}});Object.defineProperty(exports,"toEditableConfig",{enumerable:true,get:function get(){return _to_editable_config.toEditableConfig}});Object.defineProperty(exports,"getCategoryName",{enumerable:true,get:function get(){return _get_category_name.getCategoryName}});Object.defineProperty(exports,"DEFAULT_CATEGORY",{enumerable:true,get:function get(){return _default_category.DEFAULT_CATEGORY}});Object.defineProperty(exports,"getAriaName",{enumerable:true,get:function get(){return _get_aria_name.getAriaName}});var _is_default_value=__webpack_require__(1860);var _to_editable_config=__webpack_require__(1861);var _get_category_name=__webpack_require__(1863);var _default_category=__webpack_require__(598);var _get_aria_name=__webpack_require__(597)},175:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _fetch_export_by_type_and_search=__webpack_require__(1924);Object.keys(_fetch_export_by_type_and_search).forEach((function(key){if(key==="default"||key==="__esModule")return;Object.defineProperty(exports,key,{enumerable:true,get:function get(){return _fetch_export_by_type_and_search[key]}})}));var _fetch_export_objects=__webpack_require__(1925);Object.keys(_fetch_export_objects).forEach((function(key){if(key==="default"||key==="__esModule")return;Object.defineProperty(exports,key,{enumerable:true,get:function get(){return _fetch_export_objects[key]}})}));var _in_app_url=__webpack_require__(603);Object.keys(_in_app_url).forEach((function(key){if(key==="default"||key==="__esModule")return;Object.defineProperty(exports,key,{enumerable:true,get:function get(){return _in_app_url[key]}})}));var _get_relationships=__webpack_require__(1926);Object.keys(_get_relationships).forEach((function(key){if(key==="default"||key==="__esModule")return;Object.defineProperty(exports,key,{enumerable:true,get:function get(){return _get_relationships[key]}})}));var _get_saved_object_counts=__webpack_require__(1927);Object.keys(_get_saved_object_counts).forEach((function(key){if(key==="default"||key==="__esModule")return;Object.defineProperty(exports,key,{enumerable:true,get:function get(){return _get_saved_object_counts[key]}})}));var _get_saved_object_label=__webpack_require__(1928);Object.keys(_get_saved_object_label).forEach((function(key){if(key==="default"||key==="__esModule")return;Object.defineProperty(exports,key,{enumerable:true,get:function get(){return _get_saved_object_label[key]}})}));var _import_file=__webpack_require__(1929);Object.keys(_import_file).forEach((function(key){if(key==="default"||key==="__esModule")return;Object.defineProperty(exports,key,{enumerable:true,get:function get(){return _import_file[key]}})}));var _import_legacy_file=__webpack_require__(1930);Object.keys(_import_legacy_file).forEach((function(key){if(key==="default"||key==="__esModule")return;Object.defineProperty(exports,key,{enumerable:true,get:function get(){return _import_legacy_file[key]}})}));var _parse_query=__webpack_require__(1931);Object.keys(_parse_query).forEach((function(key){if(key==="default"||key==="__esModule")return;Object.defineProperty(exports,key,{enumerable:true,get:function get(){return _parse_query[key]}})}));var _resolve_import_errors=__webpack_require__(1932);Object.keys(_resolve_import_errors).forEach((function(key){if(key==="default"||key==="__esModule")return;Object.defineProperty(exports,key,{enumerable:true,get:function get(){return _resolve_import_errors[key]}})}));var _resolve_saved_objects=__webpack_require__(606);Object.keys(_resolve_saved_objects).forEach((function(key){if(key==="default"||key==="__esModule")return;Object.defineProperty(exports,key,{enumerable:true,get:function get(){return _resolve_saved_objects[key]}})}));var _log_legacy_import=__webpack_require__(1933);Object.keys(_log_legacy_import).forEach((function(key){if(key==="default"||key==="__esModule")return;Object.defineProperty(exports,key,{enumerable:true,get:function get(){return _log_legacy_import[key]}})}));var _process_import_response=__webpack_require__(267);Object.keys(_process_import_response).forEach((function(key){if(key==="default"||key==="__esModule")return;Object.defineProperty(exports,key,{enumerable:true,get:function get(){return _process_import_response[key]}})}));var _get_default_title=__webpack_require__(1934);Object.keys(_get_default_title).forEach((function(key){if(key==="default"||key==="__esModule")return;Object.defineProperty(exports,key,{enumerable:true,get:function get(){return _get_default_title[key]}})}));var _find_objects=__webpack_require__(1935);Object.keys(_find_objects).forEach((function(key){if(key==="default"||key==="__esModule")return;Object.defineProperty(exports,key,{enumerable:true,get:function get(){return _find_objects[key]}})}));var _extract_export_details=__webpack_require__(607);Object.keys(_extract_export_details).forEach((function(key){if(key==="default"||key==="__esModule")return;Object.defineProperty(exports,key,{enumerable:true,get:function get(){return _extract_export_details[key]}})}))},176:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.start=exports.setup=void 0;var _new_platform=__webpack_require__(6);var _=__webpack_require__(1941);var pluginInstance=(0,_.plugin)({});var setup=pluginInstance.setup(_new_platform.npSetup.core,{});exports.setup=setup;var start=pluginInstance.start(_new_platform.npStart.core,{});exports.start=start},177:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.getListBreadcrumbs=getListBreadcrumbs;exports.getCreateBreadcrumbs=getCreateBreadcrumbs;exports.getEditBreadcrumbs=getEditBreadcrumbs;exports.getEditFieldBreadcrumbs=getEditFieldBreadcrumbs;exports.getCreateFieldBreadcrumbs=getCreateFieldBreadcrumbs;var _management=__webpack_require__(80);var _i18n=__webpack_require__(1);function _toConsumableArray(arr){return _arrayWithoutHoles(arr)||_iterableToArray(arr)||_nonIterableSpread()}function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance")}function _iterableToArray(iter){if(Symbol.iterator in Object(iter)||Object.prototype.toString.call(iter)==="[object Arguments]")return Array.from(iter)}function _arrayWithoutHoles(arr){if(Array.isArray(arr)){for(var i=0,arr2=new Array(arr.length);i<arr.length;i++){arr2[i]=arr[i]}return arr2}}function getListBreadcrumbs(){return[_management.MANAGEMENT_BREADCRUMB,{text:_i18n.i18n.translate("kbn.management.indexPatterns.listBreadcrumb",{defaultMessage:"Index patterns"}),href:"#/management/kibana/index_patterns"}]}function getCreateBreadcrumbs(){return[].concat(_toConsumableArray(getListBreadcrumbs()),[{text:_i18n.i18n.translate("kbn.management.indexPatterns.createBreadcrumb",{defaultMessage:"Create index pattern"}),href:"#/management/kibana/index_pattern"}])}function getEditBreadcrumbs($route){var indexPattern=$route.current.locals.indexPattern;return[].concat(_toConsumableArray(getListBreadcrumbs()),[{text:indexPattern.title,href:"#/management/kibana/index_patterns/".concat(indexPattern.id)}])}function getEditFieldBreadcrumbs($route){var fieldName=$route.current.params.fieldName;return[].concat(_toConsumableArray(getEditBreadcrumbs($route)),[{text:fieldName}])}function getCreateFieldBreadcrumbs($route){return[].concat(_toConsumableArray(getEditBreadcrumbs($route)),[{text:_i18n.i18n.translate("kbn.management.indexPatterns.createFieldBreadcrumb",{defaultMessage:"Create field"})}])}},178:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.PER_PAGE_INCREMENTS=exports.MAX_SEARCH_SIZE=exports.MAX_NUMBER_OF_MATCHING_INDICES=exports.ESTIMATED_NUMBER_OF_SYSTEM_INDICES=void 0;var ESTIMATED_NUMBER_OF_SYSTEM_INDICES=100;exports.ESTIMATED_NUMBER_OF_SYSTEM_INDICES=ESTIMATED_NUMBER_OF_SYSTEM_INDICES;var MAX_NUMBER_OF_MATCHING_INDICES=100;exports.MAX_NUMBER_OF_MATCHING_INDICES=MAX_NUMBER_OF_MATCHING_INDICES;var MAX_SEARCH_SIZE=MAX_NUMBER_OF_MATCHING_INDICES+ESTIMATED_NUMBER_OF_SYSTEM_INDICES;exports.MAX_SEARCH_SIZE=MAX_SEARCH_SIZE;var PER_PAGE_INCREMENTS=[5,10,20,50];exports.PER_PAGE_INCREMENTS=PER_PAGE_INCREMENTS},1843:function(module,exports,__webpack_require__){"use strict";var _i18n=__webpack_require__(1);var _kibanaCore__=__webpack_require__(82);var injectedMetadata=JSON.parse(document.querySelector("kbn-injected-metadata").getAttribute("data"));_i18n.i18n.load(injectedMetadata.i18n.translationsUrl).catch((function(e){return e})).then((function(i18nError){var coreSystem=new _kibanaCore__.CoreSystem({injectedMetadata:injectedMetadata,rootDomElement:document.body,browserSupportsCsp:!window.__kbnCspNotEnforced__,requireLegacyFiles:function requireLegacyFiles(){__webpack_require__(1844)}});coreSystem.setup().then((function(coreSetup){if(i18nError){coreSetup.fatalErrors.add(i18nError)}return coreSystem.start()}))}))},1844:function(module,exports,__webpack_require__){"use strict";var _chrome=_interopRequireDefault(__webpack_require__(10));var _routes=_interopRequireDefault(__webpack_require__(31));var _modules=__webpack_require__(8);var _new_platform=__webpack_require__(6);__webpack_require__(1845);__webpack_require__(570);__webpack_require__(588);__webpack_require__(260);__webpack_require__(561);__webpack_require__(1846);__webpack_require__(558);__webpack_require__(1847);__webpack_require__(563);__webpack_require__(559);__webpack_require__(1864);__webpack_require__(560);__webpack_require__(564);__webpack_require__(568);__webpack_require__(569);__webpack_require__(1865);__webpack_require__(600);__webpack_require__(602);__webpack_require__(1895);__webpack_require__(250);__webpack_require__(107);__webpack_require__(567);__webpack_require__(1897);__webpack_require__(525);__webpack_require__(2062);__webpack_require__(2064);__webpack_require__(151);var _notify=__webpack_require__(18);__webpack_require__(122);var _local_application_service=__webpack_require__(2065);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}_new_platform.npSetup.plugins.kibana_legacy.forwardApp("doc","discover",{keepPrefix:true});_new_platform.npSetup.plugins.kibana_legacy.forwardApp("context","discover",{keepPrefix:true});_local_application_service.localApplicationService.attachToAngular(_routes.default);_routes.default.enable();_routes.default.otherwise({redirectTo:"/".concat(_chrome.default.getInjected("kbnDefaultAppId","discover"))});_modules.uiModules.get("kibana").run(_notify.showAppRedirectNotification)},1845:function(module,exports){},1846:function(module,exports){},1847:function(module,exports,__webpack_require__){__webpack_require__(1848)},1848:function(module,exports,__webpack_require__){"use strict";__webpack_require__(1849)},1849:function(module,exports,__webpack_require__){"use strict";var _react=_interopRequireDefault(__webpack_require__(0));var _routes=_interopRequireDefault(__webpack_require__(31));var _management=__webpack_require__(80);var _services=__webpack_require__(173);var _components=__webpack_require__(1857);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _extends(){_extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source){if(Object.prototype.hasOwnProperty.call(source,key)){target[key]=source[key]}}}return target};return _extends.apply(this,arguments)}_routes.default.defaults(/\/management/,{resolve:{telemetryManagementSection:function telemetryManagementSection(Private){var telemetryOptInProvider=Private(_services.TelemetryOptInProvider);var Component=function Component(props){return _react.default.createElement(_components.TelemetryForm,_extends({showAppliesSettingMessage:true,telemetryOptInProvider:telemetryOptInProvider},props))};(0,_management.registerSettingsComponent)(_management.PAGE_FOOTER_COMPONENT,Component,true)}}})},1850:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});Object.defineProperty(exports,"PageTitle",{enumerable:true,get:function get(){return _page_title.PageTitle}});var _page_title=__webpack_require__(1851)},1851:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.PageTitle=void 0;var _react=_interopRequireDefault(__webpack_require__(0));var _eui=__webpack_require__(3);var _react2=__webpack_require__(4);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var PageTitle=function PageTitle(){return _react.default.createElement(_eui.EuiText,null,_react.default.createElement("h1",{"data-test-subj":"managementSettingsTitle"},_react.default.createElement(_react2.FormattedMessage,{id:"kbn.management.settings.pageTitle",defaultMessage:"Settings"})))};exports.PageTitle=PageTitle},1852:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});Object.defineProperty(exports,"PageSubtitle",{enumerable:true,get:function get(){return _page_subtitle.PageSubtitle}});var _page_subtitle=__webpack_require__(1853)},1853:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.PageSubtitle=void 0;var PageSubtitle=function PageSubtitle(){return null};exports.PageSubtitle=PageSubtitle},1854:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});Object.defineProperty(exports,"PageFooter",{enumerable:true,get:function get(){return _page_footer.PageFooter}});var _page_footer=__webpack_require__(1855)},1855:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.PageFooter=void 0;var PageFooter=function PageFooter(){return null};exports.PageFooter=PageFooter},1856:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.MANAGEMENT_BREADCRUMB=void 0;var _i18n=__webpack_require__(1);var MANAGEMENT_BREADCRUMB=Object.freeze({text:_i18n.i18n.translate("common.ui.management.breadcrumb",{defaultMessage:"Management"}),href:"#/management"});exports.MANAGEMENT_BREADCRUMB=MANAGEMENT_BREADCRUMB},1857:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});Object.defineProperty(exports,"TelemetryForm",{enumerable:true,get:function get(){return _telemetry_form.TelemetryForm}});Object.defineProperty(exports,"OptInExampleFlyout",{enumerable:true,get:function get(){return _opt_in_details_component.OptInExampleFlyout}});Object.defineProperty(exports,"OptInBanner",{enumerable:true,get:function get(){return _opt_in_banner_component.OptInBanner}});Object.defineProperty(exports,"OptInMessage",{enumerable:true,get:function get(){return _opt_in_message.OptInMessage}});var _telemetry_form=__webpack_require__(1858);var _opt_in_details_component=__webpack_require__(595);var _opt_in_banner_component=__webpack_require__(592);var _opt_in_message=__webpack_require__(593)},1858:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.TelemetryForm=void 0;var _react=_interopRequireWildcard(__webpack_require__(0));var _propTypes=_interopRequireDefault(__webpack_require__(5));var _eui=__webpack_require__(3);var _constants=__webpack_require__(137);var _opt_in_details_component=__webpack_require__(595);var _field=__webpack_require__(596);var _react2=__webpack_require__(4);var _i18n=__webpack_require__(1);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _interopRequireWildcard(obj){if(obj&&obj.__esModule){return obj}else{var newObj={};if(obj!=null){for(var key in obj){if(Object.prototype.hasOwnProperty.call(obj,key)){var desc=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):{};if(desc.get||desc.set){Object.defineProperty(newObj,key,desc)}else{newObj[key]=obj[key]}}}}newObj.default=obj;return newObj}}function _typeof(obj){if(typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"){_typeof=function _typeof(obj){return typeof obj}}else{_typeof=function _typeof(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj}}return _typeof(obj)}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);return Constructor}function _possibleConstructorReturn(self,call){if(call&&(_typeof(call)==="object"||typeof call==="function")){return call}return _assertThisInitialized(self)}function _getPrototypeOf(o){_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o)};return _getPrototypeOf(o)}function _assertThisInitialized(self){if(self===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return self}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function")}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:true,configurable:true}});if(superClass)_setPrototypeOf(subClass,superClass)}function _setPrototypeOf(o,p){_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(o,p){o.__proto__=p;return o};return _setPrototypeOf(o,p)}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}var SEARCH_TERMS=["telemetry","usage","data","usage data"];var TelemetryForm=function(_Component){_inherits(TelemetryForm,_Component);function TelemetryForm(){var _getPrototypeOf2;var _this;_classCallCheck(this,TelemetryForm);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key]}_this=_possibleConstructorReturn(this,(_getPrototypeOf2=_getPrototypeOf(TelemetryForm)).call.apply(_getPrototypeOf2,[this].concat(args)));_defineProperty(_assertThisInitialized(_this),"state",{processing:false,showExample:false,queryMatches:null});_defineProperty(_assertThisInitialized(_this),"maybeGetAppliesSettingMessage",(function(){if(!_this.props.showAppliesSettingMessage){return null}return _react.default.createElement(_eui.EuiCallOut,{color:"primary",iconType:"spacesApp",title:_react.default.createElement("p",null,_react.default.createElement(_react2.FormattedMessage,{id:"telemetry.callout.appliesSettingTitle",defaultMessage:"This setting applies to {allOfKibanaText}",values:{allOfKibanaText:_react.default.createElement("strong",null,_react.default.createElement(_react2.FormattedMessage,{id:"telemetry.callout.appliesSettingTitle.allOfKibanaText",defaultMessage:"all of Kibana."}))}}))})}));_defineProperty(_assertThisInitialized(_this),"renderDescription",(function(){return _react.default.createElement(_react.Fragment,null,_react.default.createElement("p",null,_react.default.createElement(_react2.FormattedMessage,{id:"telemetry.telemetryConfigAndLinkDescription",defaultMessage:"Enabling data usage collection helps us manage and improve our products and services. See our {privacyStatementLink} for more details.",values:{privacyStatementLink:_react.default.createElement(_eui.EuiLink,{href:_constants.PRIVACY_STATEMENT_URL,target:"_blank"},_react.default.createElement(_react2.FormattedMessage,{id:"telemetry.readOurUsageDataPrivacyStatementLinkText",defaultMessage:"Privacy Statement"}))}})),_react.default.createElement("p",null,_react.default.createElement(_eui.EuiLink,{onClick:_this.toggleExample},_react.default.createElement(_react2.FormattedMessage,{id:"telemetry.seeExampleOfWhatWeCollectLinkText",defaultMessage:"See an example of what we collect"}))))}));_defineProperty(_assertThisInitialized(_this),"toggleOptIn",(function _callee(){var newOptInValue;return regeneratorRuntime.async((function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:newOptInValue=!_this.props.telemetryOptInProvider.getOptIn();return _context.abrupt("return",new Promise((function(resolve,reject){_this.setState({enabled:newOptInValue,processing:true},(function(){_this.props.telemetryOptInProvider.setOptIn(newOptInValue).then((function(){_this.setState({processing:false});resolve()}),(function(e){_this.setState({processing:false});reject(e)}))}))})));case 2:case"end":return _context.stop()}}}))}));_defineProperty(_assertThisInitialized(_this),"toggleExample",(function(){_this.setState({showExample:!_this.state.showExample})}));return _this}_createClass(TelemetryForm,[{key:"UNSAFE_componentWillReceiveProps",value:function UNSAFE_componentWillReceiveProps(nextProps){var _this2=this;var query=nextProps.query;var searchTerm=(query.text||"").toLowerCase();var searchTermMatches=SEARCH_TERMS.some((function(term){return term.indexOf(searchTerm)>=0}));if(searchTermMatches!==this.state.queryMatches){this.setState({queryMatches:searchTermMatches},(function(){_this2.props.onQueryMatchChange(searchTermMatches)}))}}},{key:"render",value:function render(){var telemetryOptInProvider=this.props.telemetryOptInProvider;var _this$state=this.state,showExample=_this$state.showExample,queryMatches=_this$state.queryMatches;if(!telemetryOptInProvider.canChangeOptInStatus()){return null}if(queryMatches!==null&&!queryMatches){return null}return _react.default.createElement(_react.Fragment,null,showExample&&_react.default.createElement(_opt_in_details_component.OptInExampleFlyout,{fetchTelemetry:function fetchTelemetry(){return telemetryOptInProvider.fetchExample()},onClose:this.toggleExample}),_react.default.createElement(_eui.EuiPanel,{paddingSize:"l"},_react.default.createElement(_eui.EuiForm,null,_react.default.createElement(_eui.EuiText,null,_react.default.createElement(_eui.EuiFlexGroup,{alignItems:"baseline"},_react.default.createElement(_eui.EuiFlexItem,{grow:false},_react.default.createElement("h2",null,_react.default.createElement(_react2.FormattedMessage,{id:"telemetry.usageDataTitle",defaultMessage:"Usage Data"}))))),this.maybeGetAppliesSettingMessage(),_react.default.createElement(_eui.EuiSpacer,{size:"s"}),_react.default.createElement(_field.Field,{setting:{type:"boolean",value:telemetryOptInProvider.getOptIn()||false,description:this.renderDescription(),defVal:true,ariaName:_i18n.i18n.translate("telemetry.provideUsageStatisticsLabel",{defaultMessage:"Provide usage statistics"})},save:this.toggleOptIn,clear:this.toggleOptIn,enableSaving:this.props.enableSaving}))))}}]);return TelemetryForm}(_react.Component);exports.TelemetryForm=TelemetryForm;_defineProperty(TelemetryForm,"propTypes",{telemetryOptInProvider:_propTypes.default.object.isRequired,query:_propTypes.default.object,onQueryMatchChange:_propTypes.default.func.isRequired,showAppliesSettingMessage:_propTypes.default.bool.isRequired,enableSaving:_propTypes.default.bool.isRequired})},1860:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.isDefaultValue=isDefaultValue;function isDefaultValue(setting){return setting.isCustom||setting.value===undefined||setting.value===""||String(setting.value)===String(setting.defVal)}},1861:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.toEditableConfig=toEditableConfig;var _get_val_type=__webpack_require__(1862);var _get_aria_name=__webpack_require__(597);var _default_category=__webpack_require__(598);function toEditableConfig(_ref){var def=_ref.def,name=_ref.name,value=_ref.value,isCustom=_ref.isCustom,isOverridden=_ref.isOverridden;if(!def){def={}}var conf={name:name,displayName:def.name||name,ariaName:def.name||(0,_get_aria_name.getAriaName)(name),value:value,category:def.category&&def.category.length?def.category:[_default_category.DEFAULT_CATEGORY],isCustom:isCustom,isOverridden:isOverridden,readonly:!!def.readonly,defVal:def.value,type:(0,_get_val_type.getValType)(def,value),description:def.description,deprecation:def.deprecation,validation:def.validation&&def.validation.regexString?{regex:new RegExp(def.validation.regexString),message:def.validation.message}:def.validation,options:def.options,optionLabels:def.optionLabels,requiresPageReload:!!def.requiresPageReload};return conf}},1862:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.getValType=getValType;function _typeof(obj){if(typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"){_typeof=function _typeof(obj){return typeof obj}}else{_typeof=function _typeof(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj}}return _typeof(obj)}function getValType(def,value){if(def.type){return def.type}if(Array.isArray(value)||Array.isArray(def.value)){return"array"}return def.value!=null?_typeof(def.value):_typeof(value)}},1863:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.getCategoryName=getCategoryName;var _i18n=__webpack_require__(1);var upperFirst=function upperFirst(){var str=arguments.length>0&&arguments[0]!==undefined?arguments[0]:"";return str.replace(/^./,(function(str){return str.toUpperCase()}))};var names={general:_i18n.i18n.translate("kbn.management.settings.categoryNames.generalLabel",{defaultMessage:"General"}),timelion:_i18n.i18n.translate("kbn.management.settings.categoryNames.timelionLabel",{defaultMessage:"Timelion"}),notifications:_i18n.i18n.translate("kbn.management.settings.categoryNames.notificationsLabel",{defaultMessage:"Notifications"}),visualizations:_i18n.i18n.translate("kbn.management.settings.categoryNames.visualizationsLabel",{defaultMessage:"Visualizations"}),discover:_i18n.i18n.translate("kbn.management.settings.categoryNames.discoverLabel",{defaultMessage:"Discover"}),dashboard:_i18n.i18n.translate("kbn.management.settings.categoryNames.dashboardLabel",{defaultMessage:"Dashboard"}),reporting:_i18n.i18n.translate("kbn.management.settings.categoryNames.reportingLabel",{defaultMessage:"Reporting"}),search:_i18n.i18n.translate("kbn.management.settings.categoryNames.searchLabel",{defaultMessage:"Search"}),siem:_i18n.i18n.translate("kbn.management.settings.categoryNames.siemLabel",{defaultMessage:"SIEM"})};function getCategoryName(category){return category?names[category]||upperFirst(category):""}},1864:function(module,exports){},1865:function(module,exports,__webpack_require__){__webpack_require__(1866);__webpack_require__(1869);__webpack_require__(1870);__webpack_require__(1871)},1866:function(module,exports,__webpack_require__){"use strict";var _new_platform=__webpack_require__(6);var _esaggs=__webpack_require__(1867);_new_platform.npSetup.plugins.expressions.registerFunction(_esaggs.esaggs)},1867:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.esaggs=void 0;var _lodash=__webpack_require__(2);var _i18n=__webpack_require__(1);var _agg_configs=__webpack_require__(227);var _utilities=__webpack_require__(41);var _public=__webpack_require__(7);var _courier=__webpack_require__(71);var _build_tabular_inspector_data=__webpack_require__(1868);var _public2=__webpack_require__(53);var _tabify=__webpack_require__(241);var _services=__webpack_require__(72);function ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);if(enumerableOnly)symbols=symbols.filter((function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable}));keys.push.apply(keys,symbols)}return keys}function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=arguments[i]!=null?arguments[i]:{};if(i%2){ownKeys(source,true).forEach((function(key){_defineProperty(target,key,source[key])}))}else if(Object.getOwnPropertyDescriptors){Object.defineProperties(target,Object.getOwnPropertyDescriptors(source))}else{ownKeys(source).forEach((function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))}))}}return target}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}var name="esaggs";var handleCourierRequest=function handleCourierRequest(_ref){var searchSource,aggs,timeRange,query,filters,forceFetch,partialRows,metricsAtAllLevels,inspectorAdapters,filterManager,abortSignal,timeFilterSearchSource,requestSearchSource,reqBody,queryHash,shouldQuery,request,response,resp,_iteratorNormalCompletion,_didIteratorError,_iteratorError,_iterator,_step,agg,parsedTimeRange,tabifyParams,tabifyCacheHash,shouldCalculateNewTabify;return regeneratorRuntime.async((function handleCourierRequest$(_context){while(1){switch(_context.prev=_context.next){case 0:searchSource=_ref.searchSource,aggs=_ref.aggs,timeRange=_ref.timeRange,query=_ref.query,filters=_ref.filters,forceFetch=_ref.forceFetch,partialRows=_ref.partialRows,metricsAtAllLevels=_ref.metricsAtAllLevels,inspectorAdapters=_ref.inspectorAdapters,filterManager=_ref.filterManager,abortSignal=_ref.abortSignal;timeFilterSearchSource=searchSource.createChild({callParentStartHandlers:true});requestSearchSource=timeFilterSearchSource.createChild({callParentStartHandlers:true});aggs.setTimeRange(timeRange);Object.defineProperty(requestSearchSource,"history",{get:function get(){return searchSource.history},set:function set(history){return searchSource.history=history}});requestSearchSource.setField("aggs",(function(){return aggs.toDsl(metricsAtAllLevels)}));requestSearchSource.onRequestStart((function(paramSearchSource,options){return aggs.onSearchRequestStart(paramSearchSource,options)}));if(timeRange){timeFilterSearchSource.setField("filter",(function(){return(0,_public.getTime)(searchSource.getField("index"),timeRange)}))}requestSearchSource.setField("filter",filters);requestSearchSource.setField("query",query);_context.next=12;return regeneratorRuntime.awrap(requestSearchSource.getSearchRequestBody());case 12:reqBody=_context.sent;queryHash=(0,_public2.calculateObjectHash)(reqBody);shouldQuery=forceFetch||searchSource.lastQuery!==queryHash;if(!shouldQuery){_context.next=35;break}inspectorAdapters.requests.reset();request=inspectorAdapters.requests.start(_i18n.i18n.translate("data.functions.esaggs.inspector.dataRequest.title",{defaultMessage:"Data"}),{description:_i18n.i18n.translate("data.functions.esaggs.inspector.dataRequest.description",{defaultMessage:"This request queries Elasticsearch to fetch the data for the visualization."})});request.stats((0,_courier.getRequestInspectorStats)(requestSearchSource));_context.prev=19;_context.next=22;return regeneratorRuntime.awrap(requestSearchSource.fetch({abortSignal:abortSignal}));case 22:response=_context.sent;searchSource.lastQuery=queryHash;request.stats((0,_courier.getResponseInspectorStats)(searchSource,response)).ok({json:response});searchSource.rawResponse=response;_context.next=32;break;case 28:_context.prev=28;_context.t0=_context["catch"](19);request.error({json:_context.t0});throw _context.t0;case 32:_context.prev=32;requestSearchSource.getSearchRequestBody().then((function(req){request.json(req)}));return _context.finish(32);case 35:resp=searchSource.rawResponse;_iteratorNormalCompletion=true;_didIteratorError=false;_iteratorError=undefined;_context.prev=39;_iterator=aggs.aggs[Symbol.iterator]();case 41:if(_iteratorNormalCompletion=(_step=_iterator.next()).done){_context.next=50;break}agg=_step.value;if(!(0,_lodash.has)(agg,"type.postFlightRequest")){_context.next=47;break}_context.next=46;return regeneratorRuntime.awrap(agg.type.postFlightRequest(resp,aggs,agg,requestSearchSource,inspectorAdapters,abortSignal));case 46:resp=_context.sent;case 47:_iteratorNormalCompletion=true;_context.next=41;break;case 50:_context.next=56;break;case 52:_context.prev=52;_context.t1=_context["catch"](39);_didIteratorError=true;_iteratorError=_context.t1;case 56:_context.prev=56;_context.prev=57;if(!_iteratorNormalCompletion&&_iterator.return!=null){_iterator.return()}case 59:_context.prev=59;if(!_didIteratorError){_context.next=62;break}throw _iteratorError;case 62:return _context.finish(59);case 63:return _context.finish(56);case 64:searchSource.finalResponse=resp;parsedTimeRange=timeRange?(0,_public.getTime)(aggs.indexPattern,timeRange):null;tabifyParams={metricsAtAllLevels:metricsAtAllLevels,partialRows:partialRows,timeRange:parsedTimeRange?parsedTimeRange.range:undefined};tabifyCacheHash=(0,_public2.calculateObjectHash)(_objectSpread({tabifyAggs:aggs},tabifyParams));shouldCalculateNewTabify=shouldQuery||searchSource.lastTabifyHash!==tabifyCacheHash;if(shouldCalculateNewTabify){searchSource.lastTabifyHash=tabifyCacheHash;searchSource.tabifiedResponse=(0,_tabify.tabifyAggResponse)(aggs,searchSource.finalResponse,tabifyParams)}inspectorAdapters.data.setTabularLoader((function(){return(0,_build_tabular_inspector_data.buildTabularInspectorData)(searchSource.tabifiedResponse,filterManager)}),{returnsFormattedValues:true});return _context.abrupt("return",searchSource.tabifiedResponse);case 72:case"end":return _context.stop()}}}),null,null,[[19,28,32,35],[39,52,56,64],[57,,59,63]])};var esaggs=function esaggs(){return{name:name,type:"kibana_datatable",context:{types:["kibana_context","null"]},help:_i18n.i18n.translate("data.functions.esaggs.help",{defaultMessage:"Run AggConfig aggregation"}),args:{index:{types:["string"],help:""},metricsAtAllLevels:{types:["boolean"],default:false,help:""},partialRows:{types:["boolean"],default:false,help:""},includeFormatHints:{types:["boolean"],default:false,help:""},aggConfigs:{types:["string"],default:'""',help:""}},fn:function fn(context,args,_ref2){var inspectorAdapters,abortSignal,indexPatterns,_getQueryService,filterManager,aggConfigsState,indexPattern,aggs,searchSource,response,table;return regeneratorRuntime.async((function fn$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:inspectorAdapters=_ref2.inspectorAdapters,abortSignal=_ref2.abortSignal;indexPatterns=(0,_services.getIndexPatterns)();_getQueryService=(0,_services.getQueryService)(),filterManager=_getQueryService.filterManager;aggConfigsState=JSON.parse(args.aggConfigs);_context2.next=6;return regeneratorRuntime.awrap(indexPatterns.get(args.index));case 6:indexPattern=_context2.sent;aggs=new _agg_configs.AggConfigs(indexPattern,aggConfigsState);searchSource=new _courier.SearchSource;searchSource.setField("index",indexPattern);searchSource.setField("size",0);_context2.next=13;return regeneratorRuntime.awrap(handleCourierRequest({searchSource:searchSource,aggs:aggs,timeRange:(0,_lodash.get)(context,"timeRange",undefined),query:(0,_lodash.get)(context,"query",undefined),filters:(0,_lodash.get)(context,"filters",undefined),forceFetch:true,metricsAtAllLevels:args.metricsAtAllLevels,partialRows:args.partialRows,inspectorAdapters:inspectorAdapters,filterManager:filterManager,abortSignal:abortSignal}));case 13:response=_context2.sent;table={type:"kibana_datatable",rows:response.rows,columns:response.columns.map((function(column){var cleanedColumn={id:column.id,name:column.name};if(args.includeFormatHints){cleanedColumn.formatHint=(0,_utilities.createFormat)(column.aggConfig)}return cleanedColumn}))};return _context2.abrupt("return",table);case 16:case"end":return _context2.stop()}}}))}}};exports.esaggs=esaggs},1868:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.buildTabularInspectorData=buildTabularInspectorData;var _lodash=__webpack_require__(2);var _public=__webpack_require__(53);var _adapters=__webpack_require__(531);function buildTabularInspectorData(table,queryFilter){var aggConfigs,rows,columns;return regeneratorRuntime.async((function buildTabularInspectorData$(_context){while(1){switch(_context.prev=_context.next){case 0:aggConfigs=table.columns.map((function(column){return column.aggConfig}));rows=table.rows.map((function(row){return table.columns.reduce((function(prev,cur,colIndex){var value=row[cur.id];var fieldFormatter=cur.aggConfig.fieldFormatter("text");prev["col-".concat(colIndex,"-").concat(cur.aggConfig.id)]=new _adapters.FormattedData(value,fieldFormatter(value));return prev}),{})}));columns=table.columns.map((function(col,colIndex){var field=col.aggConfig.getField();var isCellContentFilterable=col.aggConfig.isFilterable()&&(!field||field.filterable);return{name:col.name,field:"col-".concat(colIndex,"-").concat(col.aggConfig.id),filter:isCellContentFilterable&&function(value){var rowIndex=rows.findIndex((function(row){return row["col-".concat(colIndex,"-").concat(col.aggConfig.id)].raw===value.raw}));var filter=(0,_public.createFilter)(aggConfigs,table,colIndex,rowIndex,value.raw);queryFilter.addFilters(filter)},filterOut:isCellContentFilterable&&function(value){var rowIndex=rows.findIndex((function(row){return row["col-".concat(colIndex,"-").concat(col.aggConfig.id)].raw===value.raw}));var filter=(0,_public.createFilter)(aggConfigs,table,colIndex,rowIndex,value.raw);var notOther=value.raw!=="__other__";var notMissing=value.raw!=="__missing__";if(Array.isArray(filter)){filter.forEach((function(f){return(0,_lodash.set)(f,"meta.negate",notOther&&notMissing)}))}else{(0,_lodash.set)(filter,"meta.negate",notOther&&notMissing)}queryFilter.addFilters(filter)}}}));return _context.abrupt("return",{columns:columns,rows:rows});case 4:case"end":return _context.stop()}}}))}},1869:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.kibanaPie=void 0;var _registries=__webpack_require__(599);var _vislib=__webpack_require__(255);var _i18n=__webpack_require__(1);var kibanaPie=function kibanaPie(){return{name:"kibana_pie",type:"render",context:{types:["kibana_datatable"]},help:_i18n.i18n.translate("kbnVislibVisTypes.functions.pie.help",{defaultMessage:"Pie visualization"}),args:{visConfig:{types:["string","null"],default:'"{}"'}},fn:function fn(context,args){var visConfig,responseHandler,convertedData;return regeneratorRuntime.async((function fn$(_context){while(1){switch(_context.prev=_context.next){case 0:visConfig=JSON.parse(args.visConfig);responseHandler=(0,_vislib.vislibSlicesResponseHandlerProvider)().handler;_context.next=4;return regeneratorRuntime.awrap(responseHandler(context,visConfig.dimensions));case 4:convertedData=_context.sent;return _context.abrupt("return",{type:"render",as:"visualization",value:{visData:convertedData,visType:"pie",visConfig:visConfig,params:{listenOnChange:true}}});case 6:case"end":return _context.stop()}}}))}}};exports.kibanaPie=kibanaPie;_registries.functionsRegistry.register(kibanaPie)},1870:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.vislib=void 0;var _registries=__webpack_require__(599);var _i18n=__webpack_require__(1);var _vislib=__webpack_require__(255);var vislib=function vislib(){return{name:"vislib",type:"render",context:{types:["kibana_datatable"]},help:_i18n.i18n.translate("kbnVislibVisTypes.functions.vislib.help",{defaultMessage:"Vislib visualization"}),args:{type:{types:["string"],default:'""'},visConfig:{types:["string","null"],default:'"{}"'}},fn:function fn(context,args){var responseHandler,visConfigParams,convertedData;return regeneratorRuntime.async((function fn$(_context){while(1){switch(_context.prev=_context.next){case 0:responseHandler=(0,_vislib.vislibSeriesResponseHandlerProvider)().handler;visConfigParams=JSON.parse(args.visConfig);_context.next=4;return regeneratorRuntime.awrap(responseHandler(context,visConfigParams.dimensions));case 4:convertedData=_context.sent;return _context.abrupt("return",{type:"render",as:"visualization",value:{visData:convertedData,visType:args.type,visConfig:visConfigParams,params:{listenOnChange:true}}});case 6:case"end":return _context.stop()}}}))}}};exports.vislib=vislib;_registries.functionsRegistry.register(vislib)},1871:function(module,exports,__webpack_require__){"use strict";var _new_platform=__webpack_require__(6);var _visualization_function=__webpack_require__(1872);var _visualization_renderer=__webpack_require__(1874);_new_platform.npSetup.plugins.expressions.registerFunction(_visualization_function.visualization);_new_platform.npSetup.plugins.expressions.registerRenderer(_visualization_renderer.visualization)},1872:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.visualization=void 0;var _lodash=__webpack_require__(2);var _i18n=__webpack_require__(1);var _chrome=_interopRequireDefault(__webpack_require__(10));var _query_filter=__webpack_require__(1873);var _persisted_state=__webpack_require__(64);var _new_platform=__webpack_require__(6);var _legacy=__webpack_require__(35);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var visualization=function visualization(){return{name:"visualization",type:"render",help:_i18n.i18n.translate("visualizations.functions.visualization.help",{defaultMessage:"A simple visualization"}),args:{index:{types:["string","null"],default:null,help:"Index"},metricsAtAllLevels:{types:["boolean"],default:false,help:"Metrics levels"},partialRows:{types:["boolean"],default:false,help:"Partial rows"},type:{types:["string"],default:"",help:"Type"},schemas:{types:["string"],default:'"{}"',help:"Schemas"},visConfig:{types:["string"],default:'"{}"',help:"Visualization configuration"},uiState:{types:["string"],default:'"{}"',help:"User interface state"}},fn:function fn(context,args,handlers){var $injector,Private,indexPatterns,queryFilter,visConfigParams,schemas,visType,indexPattern,uiStateParams,uiState;return regeneratorRuntime.async((function fn$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return regeneratorRuntime.awrap(_chrome.default.dangerouslyGetActiveInjector());case 2:$injector=_context.sent;Private=$injector.get("Private");indexPatterns=_new_platform.npStart.plugins.data.indexPatterns;queryFilter=Private(_query_filter.FilterBarQueryFilterProvider);visConfigParams=args.visConfig?JSON.parse(args.visConfig):{};schemas=args.schemas?JSON.parse(args.schemas):{};visType=_legacy.start.types.get(args.type||"histogram");if(!args.index){_context.next=15;break}_context.next=12;return regeneratorRuntime.awrap(indexPatterns.get(args.index));case 12:_context.t0=_context.sent;_context.next=16;break;case 15:_context.t0=null;case 16:indexPattern=_context.t0;uiStateParams=args.uiState?JSON.parse(args.uiState):{};uiState=new _persisted_state.PersistedState(uiStateParams);if(!(typeof visType.requestHandler==="function")){_context.next=23;break}_context.next=22;return regeneratorRuntime.awrap(visType.requestHandler({partialRows:args.partialRows,metricsAtAllLevels:args.metricsAtAllLevels,index:indexPattern,visParams:visConfigParams,timeRange:(0,_lodash.get)(context,"timeRange",null),query:(0,_lodash.get)(context,"query",null),filters:(0,_lodash.get)(context,"filters",null),uiState:uiState,inspectorAdapters:handlers.inspectorAdapters,queryFilter:queryFilter,forceFetch:true}));case 22:context=_context.sent;case 23:if(!(typeof visType.responseHandler==="function")){_context.next=28;break}if(context.columns){context.columns.forEach((function(column){if(column.aggConfig){column.aggConfig.aggConfigs.schemas=visType.schemas.all}}));Object.keys(schemas).forEach((function(key){schemas[key].forEach((function(i){if(context.columns[i]&&context.columns[i].aggConfig){context.columns[i].aggConfig.schema=key}}))}))}_context.next=27;return regeneratorRuntime.awrap(visType.responseHandler(context,visConfigParams.dimensions));case 27:context=_context.sent;case 28:return _context.abrupt("return",{type:"render",as:"visualization",value:{visData:context,visType:args.type||"",visConfig:visConfigParams}});case 29:case"end":return _context.stop()}}}))}}};exports.visualization=visualization},1873:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.FilterBarQueryFilterProvider=FilterBarQueryFilterProvider;var _data=__webpack_require__(58);var _new_platform=__webpack_require__(6);function FilterBarQueryFilterProvider(getAppState,globalState){var filterManager=_new_platform.npStart.plugins.data.query.filterManager;var filterStateManager=new _data.FilterStateManager(globalState,getAppState,filterManager);var queryFilter={};queryFilter.getUpdates$=filterManager.getUpdates$.bind(filterManager);queryFilter.getFetches$=filterManager.getFetches$.bind(filterManager);queryFilter.getFilters=filterManager.getFilters.bind(filterManager);queryFilter.getAppFilters=filterManager.getAppFilters.bind(filterManager);queryFilter.getGlobalFilters=filterManager.getGlobalFilters.bind(filterManager);queryFilter.removeFilter=filterManager.removeFilter.bind(filterManager);queryFilter.addFilters=filterManager.addFilters.bind(filterManager);queryFilter.setFilters=filterManager.setFilters.bind(filterManager);queryFilter.removeAll=filterManager.removeAll.bind(filterManager);queryFilter.destroy=function(){filterManager.destroy();filterStateManager.destroy()};return queryFilter}},1874:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.visualization=void 0;var _chrome=_interopRequireDefault(__webpack_require__(10));var _react=_interopRequireDefault(__webpack_require__(0));var _reactDom=__webpack_require__(9);var _vis=__webpack_require__(1875);var _components=__webpack_require__(1876);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var visualization=function visualization(){return{name:"visualization",displayName:"visualization",reuseDomNode:true,render:function render(domNode,config,handlers){var visData,visConfig,params,visType,$injector,$rootScope,uiState,listenOnChange;return regeneratorRuntime.async((function render$(_context){while(1){switch(_context.prev=_context.next){case 0:visData=config.visData,visConfig=config.visConfig,params=config.params;visType=config.visType||visConfig.type;_context.next=4;return regeneratorRuntime.awrap(_chrome.default.dangerouslyGetActiveInjector());case 4:$injector=_context.sent;$rootScope=$injector.get("$rootScope");if(handlers.vis){if(visConfig){$rootScope.$apply((function(){handlers.vis.setCurrentState({type:visType,params:visConfig,title:handlers.vis.title})}))}}else{handlers.vis=new _vis.Vis({type:visType,params:visConfig})}handlers.vis.eventsSubject={next:handlers.event};uiState=handlers.uiState||handlers.vis.getUiState();handlers.onDestroy((function(){(0,_reactDom.unmountComponentAtNode)(domNode)}));listenOnChange=params?params.listenOnChange:false;(0,_reactDom.render)(_react.default.createElement(_components.Visualization,{vis:handlers.vis,visData:visData,visParams:handlers.vis.params,uiState:uiState,listenOnChange:listenOnChange,onInit:handlers.done}),domNode);case 12:case"end":return _context.stop()}}}))}}};exports.visualization=visualization},1875:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.Vis=void 0;var _events=__webpack_require__(97);var _lodash=_interopRequireDefault(__webpack_require__(2));var _persisted_state=__webpack_require__(64);var _legacy=__webpack_require__(35);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _typeof(obj){if(typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"){_typeof=function _typeof(obj){return typeof obj}}else{_typeof=function _typeof(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj}}return _typeof(obj)}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);return Constructor}function _possibleConstructorReturn(self,call){if(call&&(_typeof(call)==="object"||typeof call==="function")){return call}return _assertThisInitialized(self)}function _assertThisInitialized(self){if(self===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return self}function _getPrototypeOf(o){_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o)};return _getPrototypeOf(o)}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function")}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:true,configurable:true}});if(superClass)_setPrototypeOf(subClass,superClass)}function _setPrototypeOf(o,p){_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(o,p){o.__proto__=p;return o};return _setPrototypeOf(o,p)}var visTypes=_legacy.start.types;var Vis=function(_EventEmitter){_inherits(Vis,_EventEmitter);function Vis(){var _this;var visState=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{type:"histogram"};_classCallCheck(this,Vis);_this=_possibleConstructorReturn(this,_getPrototypeOf(Vis).call(this));_this._setUiState(new _persisted_state.PersistedState);_this.setState(visState);_this.sessionState={};_this.API={events:{filter:function filter(data){if(!_this.eventsSubject)return;_this.eventsSubject.next({name:"filterBucket",data:data})},brush:function brush(data){if(!_this.eventsSubject)return;_this.eventsSubject.next({name:"brush",data:data})}}};return _this}_createClass(Vis,[{key:"setState",value:function setState(state){this.title=state.title||"";var type=state.type||this.type;if(_lodash.default.isString(type)){this.type=visTypes.get(type);if(!this.type){throw new Error('Invalid type "'.concat(type,'"'))}}else{this.type=type}this.params=_lodash.default.defaultsDeep({},_lodash.default.cloneDeep(state.params||{}),_lodash.default.cloneDeep(this.type.visConfig.defaults||{}))}},{key:"setCurrentState",value:function setCurrentState(state){this.setState(state)}},{key:"getState",value:function getState(){return{title:this.title,type:this.type.name,params:_lodash.default.cloneDeep(this.params)}}},{key:"updateState",value:function updateState(){this.emit("update")}},{key:"forceReload",value:function forceReload(){this.emit("reload")}},{key:"isHierarchical",value:function isHierarchical(){if(_lodash.default.isFunction(this.type.hierarchicalData)){return!!this.type.hierarchicalData(this)}else{return!!this.type.hierarchicalData}}},{key:"hasUiState",value:function hasUiState(){return!!this.__uiState}},{key:"_setUiState",value:function _setUiState(uiState){if(uiState instanceof _persisted_state.PersistedState){this.__uiState=uiState}}},{key:"getUiState",value:function getUiState(){return this.__uiState}},{key:"uiStateVal",value:function uiStateVal(key,val){if(this.hasUiState()){if(_lodash.default.isUndefined(val)){return this.__uiState.get(key)}return this.__uiState.set(key,val)}return val}}]);return Vis}(_events.EventEmitter);exports.Vis=Vis},1876:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});Object.defineProperty(exports,"Visualization",{enumerable:true,get:function get(){return _visualization.Visualization}});var _visualization=__webpack_require__(1877)},1877:function(module,exports,__webpack_require__){"use strict";function _typeof2(obj){if(typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"){_typeof2=function _typeof2(obj){return typeof obj}}else{_typeof2=function _typeof2(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj}}return _typeof2(obj)}Object.defineProperty(exports,"__esModule",{value:true});exports.Visualization=void 0;var _lodash=__webpack_require__(2);var _react=_interopRequireDefault(__webpack_require__(0));var _memoize=__webpack_require__(589);var _visualization_chart=__webpack_require__(1878);var _visualization_noresults=__webpack_require__(1879);var _visualization_requesterror=__webpack_require__(1880);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _typeof(obj){if(typeof Symbol==="function"&&_typeof2(Symbol.iterator)==="symbol"){_typeof=function _typeof(obj){return _typeof2(obj)}}else{_typeof=function _typeof(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":_typeof2(obj)}}return _typeof(obj)}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);return Constructor}function _possibleConstructorReturn(self,call){if(call&&(_typeof(call)==="object"||typeof call==="function")){return call}return _assertThisInitialized(self)}function _getPrototypeOf(o){_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o)};return _getPrototypeOf(o)}function _assertThisInitialized(self){if(self===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return self}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function")}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:true,configurable:true}});if(superClass)_setPrototypeOf(subClass,superClass)}function _setPrototypeOf(o,p){_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(o,p){o.__proto__=p;return o};return _setPrototypeOf(o,p)}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}function shouldShowNoResultsMessage(vis,visData){var requiresSearch=(0,_lodash.get)(vis,"type.requiresSearch");var rows=(0,_lodash.get)(visData,"rows");var isZeroHits=(0,_lodash.get)(visData,"hits")===0||rows&&!rows.length;var shouldShowMessage=!(0,_lodash.get)(vis,"type.useCustomNoDataScreen");return Boolean(requiresSearch&&isZeroHits&&shouldShowMessage)}function shouldShowRequestErrorMessage(vis,visData){var requestError=(0,_lodash.get)(vis,"requestError");var showRequestError=(0,_lodash.get)(vis,"showRequestError");return Boolean(!visData&&requestError&&showRequestError)}var Visualization=function(_React$Component){_inherits(Visualization,_React$Component);function Visualization(props){var _this;_classCallCheck(this,Visualization);_this=_possibleConstructorReturn(this,_getPrototypeOf(Visualization).call(this,props));_defineProperty(_assertThisInitialized(_this),"showNoResultsMessage",(0,_memoize.memoizeLast)(shouldShowNoResultsMessage));props.vis._setUiState(props.uiState);return _this}_createClass(Visualization,[{key:"render",value:function render(){var _this$props=this.props,vis=_this$props.vis,visData=_this$props.visData,visParams=_this$props.visParams,onInit=_this$props.onInit,uiState=_this$props.uiState,listenOnChange=_this$props.listenOnChange;var noResults=this.showNoResultsMessage(vis,visData);var requestError=shouldShowRequestErrorMessage(vis,visData);return _react.default.createElement("div",{className:"visualization"},requestError?_react.default.createElement(_visualization_requesterror.VisualizationRequestError,{onInit:onInit,error:vis.requestError}):noResults?_react.default.createElement(_visualization_noresults.VisualizationNoResults,{onInit:onInit}):_react.default.createElement(_visualization_chart.VisualizationChart,{vis:vis,visData:visData,visParams:visParams,onInit:onInit,uiState:uiState,listenOnChange:listenOnChange}))}},{key:"shouldComponentUpdate",value:function shouldComponentUpdate(nextProps){if(nextProps.uiState!==this.props.uiState){throw new Error("Changing uiState on <Visualization/> is not supported!")}return true}}]);return Visualization}(_react.default.Component);exports.Visualization=Visualization},1878:function(module,exports,__webpack_require__){"use strict";function _typeof2(obj){if(typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"){_typeof2=function _typeof2(obj){return typeof obj}}else{_typeof2=function _typeof2(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj}}return _typeof2(obj)}Object.defineProperty(exports,"__esModule",{value:true});exports.VisualizationChart=void 0;var _react=_interopRequireDefault(__webpack_require__(0));var Rx=_interopRequireWildcard(__webpack_require__(11));var _operators=__webpack_require__(43);var _update_status=__webpack_require__(473);var _public=__webpack_require__(13);function _interopRequireWildcard(obj){if(obj&&obj.__esModule){return obj}else{var newObj={};if(obj!=null){for(var key in obj){if(Object.prototype.hasOwnProperty.call(obj,key)){var desc=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):{};if(desc.get||desc.set){Object.defineProperty(newObj,key,desc)}else{newObj[key]=obj[key]}}}}newObj.default=obj;return newObj}}function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _typeof(obj){if(typeof Symbol==="function"&&_typeof2(Symbol.iterator)==="symbol"){_typeof=function _typeof(obj){return _typeof2(obj)}}else{_typeof=function _typeof(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":_typeof2(obj)}}return _typeof(obj)}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);return Constructor}function _possibleConstructorReturn(self,call){if(call&&(_typeof(call)==="object"||typeof call==="function")){return call}return _assertThisInitialized(self)}function _getPrototypeOf(o){_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o)};return _getPrototypeOf(o)}function _assertThisInitialized(self){if(self===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return self}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function")}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:true,configurable:true}});if(superClass)_setPrototypeOf(subClass,superClass)}function _setPrototypeOf(o,p){_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(o,p){o.__proto__=p;return o};return _setPrototypeOf(o,p)}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}var VisualizationChart=function(_React$Component){_inherits(VisualizationChart,_React$Component);function VisualizationChart(props){var _this;_classCallCheck(this,VisualizationChart);_this=_possibleConstructorReturn(this,_getPrototypeOf(VisualizationChart).call(this,props));_defineProperty(_assertThisInitialized(_this),"resizeChecker",void 0);_defineProperty(_assertThisInitialized(_this),"visualization",void 0);_defineProperty(_assertThisInitialized(_this),"chartDiv",_react.default.createRef());_defineProperty(_assertThisInitialized(_this),"containerDiv",_react.default.createRef());_defineProperty(_assertThisInitialized(_this),"renderSubject",void 0);_defineProperty(_assertThisInitialized(_this),"renderSubscription",void 0);_defineProperty(_assertThisInitialized(_this),"onUiStateChanged",(function(){_this.startRenderVisualization()}));_this.renderSubject=new Rx.Subject;var render$=_this.renderSubject.asObservable().pipe((0,_operators.share)());var success$=render$.pipe((0,_operators.filter)((function(_ref){var vis=_ref.vis,visData=_ref.visData,container=_ref.container;return vis&&container&&(!vis.type.requiresSearch||visData)})),(0,_operators.debounceTime)(100),(0,_operators.switchMap)((function _callee(_ref2){var vis,visData,visParams,container,status;return regeneratorRuntime.async((function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:vis=_ref2.vis,visData=_ref2.visData,visParams=_ref2.visParams,container=_ref2.container;if(_this.visualization){_context.next=3;break}throw new Error("Visualization implementation was not initialized on first render.");case 3:vis.size=[container.clientWidth,container.clientHeight];status=(0,_update_status.getUpdateStatus)(vis.type.requiresUpdateStatus,_assertThisInitialized(_this),_this.props);return _context.abrupt("return",_this.visualization.render(visData,visParams,status));case 6:case"end":return _context.stop()}}}))})));var requestError$=render$.pipe((0,_operators.filter)((function(_ref3){var vis=_ref3.vis;return vis.requestError})));_this.renderSubscription=Rx.merge(success$,requestError$).subscribe((function(){if(_this.props.onInit){_this.props.onInit()}}));return _this}_createClass(VisualizationChart,[{key:"render",value:function render(){return _react.default.createElement("div",{className:"visChart__container kbn-resetFocusState",tabIndex:0,ref:this.containerDiv},_react.default.createElement("p",{className:"euiScreenReaderOnly"},this.props.vis.type.title," visualization, not yet accessible"),_react.default.createElement("div",{"aria-hidden":!this.props.vis.type.isAccessible,className:"visChart",ref:this.chartDiv}))}},{key:"componentDidMount",value:function componentDidMount(){var _this2=this;if(!this.chartDiv.current||!this.containerDiv.current){throw new Error("chartDiv and currentDiv reference should always be present.")}var vis=this.props.vis;var Visualization=vis.type.visualization;this.visualization=new Visualization(this.chartDiv.current,vis);this.resizeChecker=new _public.ResizeChecker(this.containerDiv.current);this.resizeChecker.on("resize",(function(){return _this2.startRenderVisualization()}));if(this.props.listenOnChange){this.props.uiState.on("change",this.onUiStateChanged)}this.startRenderVisualization()}},{key:"componentDidUpdate",value:function componentDidUpdate(){this.startRenderVisualization()}},{key:"componentWillUnmount",value:function componentWillUnmount(){if(this.renderSubscription){this.renderSubscription.unsubscribe()}if(this.resizeChecker){this.resizeChecker.destroy()}if(this.visualization){this.visualization.destroy()}}},{key:"startRenderVisualization",value:function startRenderVisualization(){if(this.containerDiv.current&&this.chartDiv.current){this.renderSubject.next({vis:this.props.vis,visData:this.props.visData,visParams:this.props.visParams,container:this.containerDiv.current})}}}]);return VisualizationChart}(_react.default.Component);exports.VisualizationChart=VisualizationChart},1879:function(module,exports,__webpack_require__){"use strict";function _typeof2(obj){if(typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"){_typeof2=function _typeof2(obj){return typeof obj}}else{_typeof2=function _typeof2(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj}}return _typeof2(obj)}Object.defineProperty(exports,"__esModule",{value:true});exports.VisualizationNoResults=void 0;var _eui=__webpack_require__(3);var _react=_interopRequireDefault(__webpack_require__(0));function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _typeof(obj){if(typeof Symbol==="function"&&_typeof2(Symbol.iterator)==="symbol"){_typeof=function _typeof(obj){return _typeof2(obj)}}else{_typeof=function _typeof(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":_typeof2(obj)}}return _typeof(obj)}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);return Constructor}function _possibleConstructorReturn(self,call){if(call&&(_typeof(call)==="object"||typeof call==="function")){return call}return _assertThisInitialized(self)}function _getPrototypeOf(o){_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o)};return _getPrototypeOf(o)}function _assertThisInitialized(self){if(self===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return self}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function")}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:true,configurable:true}});if(superClass)_setPrototypeOf(subClass,superClass)}function _setPrototypeOf(o,p){_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(o,p){o.__proto__=p;return o};return _setPrototypeOf(o,p)}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}var VisualizationNoResults=function(_React$Component){_inherits(VisualizationNoResults,_React$Component);function VisualizationNoResults(){var _getPrototypeOf2;var _this;_classCallCheck(this,VisualizationNoResults);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key]}_this=_possibleConstructorReturn(this,(_getPrototypeOf2=_getPrototypeOf(VisualizationNoResults)).call.apply(_getPrototypeOf2,[this].concat(args)));_defineProperty(_assertThisInitialized(_this),"containerDiv",_react.default.createRef());return _this}_createClass(VisualizationNoResults,[{key:"render",value:function render(){return _react.default.createElement("div",{className:"visError",ref:this.containerDiv},_react.default.createElement("div",{className:"item top"}),_react.default.createElement("div",{className:"item"},_react.default.createElement(_eui.EuiText,{size:"xs",color:"subdued"},_react.default.createElement(_eui.EuiIcon,{type:"visualizeApp",size:"m",color:"subdued","aria-hidden":"true"}),_react.default.createElement(_eui.EuiSpacer,{size:"s"}),_react.default.createElement("p",null,"No results found"))),_react.default.createElement("div",{className:"item bottom"}))}},{key:"componentDidMount",value:function componentDidMount(){this.afterRender()}},{key:"componentDidUpdate",value:function componentDidUpdate(){this.afterRender()}},{key:"afterRender",value:function afterRender(){if(this.props.onInit){this.props.onInit()}}}]);return VisualizationNoResults}(_react.default.Component);exports.VisualizationNoResults=VisualizationNoResults},1880:function(module,exports,__webpack_require__){"use strict";function _typeof2(obj){if(typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"){_typeof2=function _typeof2(obj){return typeof obj}}else{_typeof2=function _typeof2(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj}}return _typeof2(obj)}Object.defineProperty(exports,"__esModule",{value:true});exports.VisualizationRequestError=void 0;var _eui=__webpack_require__(3);var _react=_interopRequireDefault(__webpack_require__(0));function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _typeof(obj){if(typeof Symbol==="function"&&_typeof2(Symbol.iterator)==="symbol"){_typeof=function _typeof(obj){return _typeof2(obj)}}else{_typeof=function _typeof(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":_typeof2(obj)}}return _typeof(obj)}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);return Constructor}function _possibleConstructorReturn(self,call){if(call&&(_typeof(call)==="object"||typeof call==="function")){return call}return _assertThisInitialized(self)}function _getPrototypeOf(o){_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o)};return _getPrototypeOf(o)}function _assertThisInitialized(self){if(self===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return self}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function")}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:true,configurable:true}});if(superClass)_setPrototypeOf(subClass,superClass)}function _setPrototypeOf(o,p){_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(o,p){o.__proto__=p;return o};return _setPrototypeOf(o,p)}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}var VisualizationRequestError=function(_React$Component){_inherits(VisualizationRequestError,_React$Component);function VisualizationRequestError(){var _getPrototypeOf2;var _this;_classCallCheck(this,VisualizationRequestError);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key]}_this=_possibleConstructorReturn(this,(_getPrototypeOf2=_getPrototypeOf(VisualizationRequestError)).call.apply(_getPrototypeOf2,[this].concat(args)));_defineProperty(_assertThisInitialized(_this),"containerDiv",_react.default.createRef());return _this}_createClass(VisualizationRequestError,[{key:"render",value:function render(){var error=this.props.error;var errorMessage=typeof error==="string"?error:error.message;return _react.default.createElement("div",{className:"visError",ref:this.containerDiv},_react.default.createElement(_eui.EuiText,{size:"xs",color:"subdued"},_react.default.createElement(_eui.EuiIcon,{type:"alert",size:"m",color:"danger","aria-hidden":"true"}),_react.default.createElement(_eui.EuiSpacer,{size:"s"}),errorMessage))}},{key:"componentDidMount",value:function componentDidMount(){this.afterRender()}},{key:"componentDidUpdate",value:function componentDidUpdate(){this.afterRender()}},{key:"afterRender",value:function afterRender(){if(this.props.onInit){this.props.onInit()}}}]);return VisualizationRequestError}(_react.default.Component);exports.VisualizationRequestError=VisualizationRequestError},1895:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.trackUiMetric=void 0;var _feature_catalogue=__webpack_require__(106);var _new_platform=__webpack_require__(6);var _chrome=_interopRequireDefault(__webpack_require__(10));var _plugin=__webpack_require__(1896);var _public=__webpack_require__(638);var _services=__webpack_require__(173);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);if(enumerableOnly)symbols=symbols.filter((function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable}));keys.push.apply(keys,symbols)}return keys}function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=arguments[i]!=null?arguments[i]:{};if(i%2){ownKeys(source,true).forEach((function(key){_defineProperty(target,key,source[key])}))}else if(Object.getOwnPropertyDescriptors){Object.defineProperties(target,Object.getOwnPropertyDescriptors(source))}else{ownKeys(source).forEach((function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))}))}}return target}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}var trackUiMetric=(0,_public.createUiStatsReporter)("Kibana_home");exports.trackUiMetric=trackUiMetric;function getAngularDependencies(){var injector,Private,telemetryEnabled,telemetryBanner,telemetryOptInProvider;return regeneratorRuntime.async((function getAngularDependencies$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return regeneratorRuntime.awrap(_chrome.default.dangerouslyGetActiveInjector());case 2:injector=_context.sent;Private=injector.get("Private");telemetryEnabled=_new_platform.npStart.core.injectedMetadata.getInjectedVar("telemetryEnabled");telemetryBanner=_new_platform.npStart.core.injectedMetadata.getInjectedVar("telemetryBanner");telemetryOptInProvider=Private(_services.TelemetryOptInProvider);return _context.abrupt("return",{telemetryOptInProvider:telemetryOptInProvider,shouldShowTelemetryOptIn:telemetryEnabled&&telemetryBanner&&!telemetryOptInProvider.getOptIn()});case 8:case"end":return _context.stop()}}}))}var copiedLegacyCatalogue=false;(function _callee(){var instance;return regeneratorRuntime.async((function _callee$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:instance=new _plugin.HomePlugin;instance.setup(_new_platform.npSetup.core,_objectSpread({},_new_platform.npSetup.plugins,{__LEGACY:{trackUiMetric:trackUiMetric,metadata:_new_platform.npStart.core.injectedMetadata.getLegacyMetadata(),METRIC_TYPE:_public.METRIC_TYPE,getFeatureCatalogueEntries:function getFeatureCatalogueEntries(){var _injector,_Private;return regeneratorRuntime.async((function getFeatureCatalogueEntries$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:if(copiedLegacyCatalogue){_context2.next=7;break}_context2.next=3;return regeneratorRuntime.awrap(_chrome.default.dangerouslyGetActiveInjector());case 3:_injector=_context2.sent;_Private=_injector.get("Private");_Private(_feature_catalogue.FeatureCatalogueRegistryProvider).inTitleOrder.map(_new_platform.npSetup.plugins.home.featureCatalogue.register);copiedLegacyCatalogue=true;case 7:return _context2.abrupt("return",_new_platform.npStart.plugins.home.featureCatalogue.get());case 8:case"end":return _context2.stop()}}}))},getAngularDependencies:getAngularDependencies}}));instance.start(_new_platform.npStart.core,_objectSpread({},_new_platform.npStart.plugins));case 3:case"end":return _context3.stop()}}}))})()},1896:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.HomePlugin=void 0;var _kibana_services=__webpack_require__(636);function ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);if(enumerableOnly)symbols=symbols.filter((function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable}));keys.push.apply(keys,symbols)}return keys}function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=arguments[i]!=null?arguments[i]:{};if(i%2){ownKeys(source,true).forEach((function(key){_defineProperty(target,key,source[key])}))}else if(Object.getOwnPropertyDescriptors){Object.defineProperties(target,Object.getOwnPropertyDescriptors(source))}else{ownKeys(source).forEach((function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))}))}}return target}function _slicedToArray(arr,i){return _arrayWithHoles(arr)||_iterableToArrayLimit(arr,i)||_nonIterableRest()}function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}function _iterableToArrayLimit(arr,i){var _arr=[];var _n=true;var _d=false;var _e=undefined;try{for(var _i=arr[Symbol.iterator](),_s;!(_n=(_s=_i.next()).done);_n=true){_arr.push(_s.value);if(i&&_arr.length===i)break}}catch(err){_d=true;_e=err}finally{try{if(!_n&&_i["return"]!=null)_i["return"]()}finally{if(_d)throw _e}}return _arr}function _arrayWithHoles(arr){if(Array.isArray(arr))return arr}function _objectWithoutProperties(source,excluded){if(source==null)return{};var target=_objectWithoutPropertiesLoose(source,excluded);var key,i;if(Object.getOwnPropertySymbols){var sourceSymbolKeys=Object.getOwnPropertySymbols(source);for(i=0;i<sourceSymbolKeys.length;i++){key=sourceSymbolKeys[i];if(excluded.indexOf(key)>=0)continue;if(!Object.prototype.propertyIsEnumerable.call(source,key))continue;target[key]=source[key]}}return target}function _objectWithoutPropertiesLoose(source,excluded){if(source==null)return{};var target={};var sourceKeys=Object.keys(source);var key,i;for(i=0;i<sourceKeys.length;i++){key=sourceKeys[i];if(excluded.indexOf(key)>=0)continue;target[key]=source[key]}return target}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);return Constructor}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}var HomePlugin=function(){function HomePlugin(){_classCallCheck(this,HomePlugin);_defineProperty(this,"dataStart",null);_defineProperty(this,"savedObjectsClient",null);_defineProperty(this,"environment",null)}_createClass(HomePlugin,[{key:"setup",value:function setup(core,_ref){var _this=this;var kibana_legacy=_ref.kibana_legacy,_ref$__LEGACY=_ref.__LEGACY,getAngularDependencies=_ref$__LEGACY.getAngularDependencies,legacyServices=_objectWithoutProperties(_ref$__LEGACY,["getAngularDependencies"]);kibana_legacy.registerLegacyApp({id:"home",title:"Home",mount:function mount(_ref2,params){var contextCore,angularDependencies,_ref3,_ref4,homeStart,_ref5,renderApp;return regeneratorRuntime.async((function mount$(_context){while(1){switch(_context.prev=_context.next){case 0:contextCore=_ref2.core;_context.next=3;return regeneratorRuntime.awrap(getAngularDependencies());case 3:angularDependencies=_context.sent;_context.next=6;return regeneratorRuntime.awrap(core.getStartServices());case 6:_ref3=_context.sent;_ref4=_slicedToArray(_ref3,2);homeStart=_ref4[1].home;(0,_kibana_services.setServices)(_objectSpread({},legacyServices,{http:contextCore.http,toastNotifications:core.notifications.toasts,banners:contextCore.overlays.banners,docLinks:contextCore.docLinks,savedObjectsClient:_this.savedObjectsClient,chrome:contextCore.chrome,uiSettings:core.uiSettings,addBasePath:core.http.basePath.prepend,getBasePath:core.http.basePath.get,indexPatternService:_this.dataStart.indexPatterns,environment:_this.environment,tutorialVariables:homeStart.tutorials.get,getInjected:core.injectedMetadata.getInjectedVar},angularDependencies));_context.next=12;return regeneratorRuntime.awrap(__webpack_require__.e(29).then(__webpack_require__.t.bind(null,2203,7)));case 12:_ref5=_context.sent;renderApp=_ref5.renderApp;_context.next=16;return regeneratorRuntime.awrap(renderApp(params.element));case 16:return _context.abrupt("return",_context.sent);case 17:case"end":return _context.stop()}}}))}})}},{key:"start",value:function start(core,_ref6){var data=_ref6.data,home=_ref6.home;this.environment=home.environment.get();this.dataStart=data;this.savedObjectsClient=core.savedObjects.client}},{key:"stop",value:function stop(){}}]);return HomePlugin}();exports.HomePlugin=HomePlugin},1897:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.updateLandingPage=updateLandingPage;exports.updateSidebar=updateSidebar;exports.destroyReact=void 0;var _react=_interopRequireDefault(__webpack_require__(0));var _i18n=__webpack_require__(1);var _reactDom=__webpack_require__(9);var _react2=__webpack_require__(4);__webpack_require__(1898);var _routes=_interopRequireDefault(__webpack_require__(31));var _i18n2=__webpack_require__(24);var _modules=__webpack_require__(8);var _app=_interopRequireDefault(__webpack_require__(2051));var _landing=_interopRequireDefault(__webpack_require__(2052));var _management=__webpack_require__(80);var _public=__webpack_require__(2053);var _feature_catalogue=__webpack_require__(106);var _timefilter=__webpack_require__(86);var _eui=__webpack_require__(3);var _new_platform=__webpack_require__(6);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var SIDENAV_ID="management-sidenav";var LANDING_ID="management-landing";_routes.default.when("/management",{template:_landing.default,k7Breadcrumbs:function k7Breadcrumbs(){return[_management.MANAGEMENT_BREADCRUMB]}});_routes.default.when("/management/:section",{redirectTo:"/management"});function updateLandingPage(version){var node=document.getElementById(LANDING_ID);if(!node){return}(0,_reactDom.render)(_react.default.createElement(_eui.EuiPageContent,{horizontalPosition:"center"},_react.default.createElement(_i18n2.I18nContext,null,_react.default.createElement("div",null,_react.default.createElement("div",{className:"eui-textCenter"},_react.default.createElement(_eui.EuiIcon,{type:"managementApp",size:"xxl"}),_react.default.createElement(_eui.EuiSpacer,null),_react.default.createElement(_eui.EuiTitle,null,_react.default.createElement("h1",null,_react.default.createElement(_react2.FormattedMessage,{id:"kbn.management.landing.header",defaultMessage:"Kibana {version} management",values:{version:version}}))),_react.default.createElement(_eui.EuiText,null,_react.default.createElement(_react2.FormattedMessage,{id:"kbn.management.landing.subhead",defaultMessage:"Manage your indices, index patterns, saved objects, Kibana settings, and more."}))),_react.default.createElement(_eui.EuiHorizontalRule,null),_react.default.createElement(_eui.EuiText,{color:"subdued",size:"s",textAlign:"center"},_react.default.createElement("p",null,_react.default.createElement(_react2.FormattedMessage,{id:"kbn.management.landing.text",defaultMessage:"A full list of tools can be found in the left menu"})))))),node)}function updateSidebar(legacySections,id){var node=document.getElementById(SIDENAV_ID);if(!node){return}(0,_reactDom.render)(_react.default.createElement(_i18n2.I18nContext,null,_react.default.createElement(_public.ManagementSidebarNav,{getSections:_new_platform.npStart.plugins.management.sections.getSectionsEnabled,legacySections:legacySections,selectedId:id,className:"mgtSideNav"})),node)}var destroyReact=function destroyReact(id){var node=document.getElementById(id);node&&(0,_reactDom.unmountComponentAtNode)(node)};exports.destroyReact=destroyReact;_modules.uiModules.get("apps/management").directive("kbnManagementApp",(function($location){return{restrict:"E",template:_app.default,transclude:true,scope:{sectionName:"@section",omitPages:"@omitBreadcrumbPages",pageTitle:"="},link:function link($scope){_timefilter.timefilter.disableAutoRefreshSelector();_timefilter.timefilter.disableTimeRangeSelector();$scope.sections=_management.management.visibleItems;$scope.section=_management.management.getSection($scope.sectionName)||_management.management;if($scope.section){$scope.section.items.forEach((function(item){item.active="#".concat($location.path()).indexOf(item.url)>-1}))}updateSidebar($scope.sections,$scope.section.id);$scope.$on("$destroy",(function(){return destroyReact(SIDENAV_ID)}));_management.management.addListener((function(){return updateSidebar(_management.management.visibleItems,$scope.section.id)}));updateLandingPage($scope.$root.chrome.getKibanaVersion());$scope.$on("$destroy",(function(){return destroyReact(LANDING_ID)}))}}}));_modules.uiModules.get("apps/management").directive("kbnManagementLanding",(function(kbnVersion){return{restrict:"E",link:function link($scope){$scope.sections=_management.management.visibleItems;$scope.kbnVersion=kbnVersion}}}));_feature_catalogue.FeatureCatalogueRegistryProvider.register((function(){return{id:"management",title:_i18n.i18n.translate("kbn.management.managementLabel",{defaultMessage:"Management"}),description:_i18n.i18n.translate("kbn.management.managementDescription",{defaultMessage:"Your center console for managing the Elastic Stack."}),icon:"managementApp",path:"/app/kibana#/management",showOnHomePage:false,category:_feature_catalogue.FeatureCatalogueCategory.ADMIN}}))},1898:function(module,exports,__webpack_require__){"use strict";__webpack_require__(1899);__webpack_require__(1912);__webpack_require__(1953)},1899:function(module,exports,__webpack_require__){"use strict";var _management=__webpack_require__(80);var _routes=_interopRequireDefault(__webpack_require__(31));var _modules=__webpack_require__(8);var _capabilities=__webpack_require__(135);var _i18n=__webpack_require__(24);var _index=_interopRequireDefault(__webpack_require__(1900));var _feature_catalogue=__webpack_require__(106);var _react=_interopRequireDefault(__webpack_require__(0));var _reactDom=__webpack_require__(9);var _advanced_settings=__webpack_require__(1901);var _i18n2=__webpack_require__(1);var _breadcrumbs=__webpack_require__(1911);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var REACT_ADVANCED_SETTINGS_DOM_ELEMENT_ID="reactAdvancedSettings";function updateAdvancedSettings($scope,config,query){$scope.$$postDigest((function(){var node=document.getElementById(REACT_ADVANCED_SETTINGS_DOM_ELEMENT_ID);if(!node){return}(0,_reactDom.render)(_react.default.createElement(_i18n.I18nContext,null,_react.default.createElement(_advanced_settings.AdvancedSettings,{config:config,query:query,enableSaving:_capabilities.capabilities.get().advancedSettings.save})),node)}))}function destroyAdvancedSettings(){var node=document.getElementById(REACT_ADVANCED_SETTINGS_DOM_ELEMENT_ID);node&&(0,_reactDom.unmountComponentAtNode)(node)}_routes.default.when("/management/kibana/settings/:setting?",{template:_index.default,k7Breadcrumbs:_breadcrumbs.getBreadcrumbs,requireUICapability:"management.kibana.settings",badge:function badge(uiCapabilities){if(uiCapabilities.advancedSettings.save){return undefined}return{text:_i18n2.i18n.translate("kbn.management.advancedSettings.badge.readOnly.text",{defaultMessage:"Read only"}),tooltip:_i18n2.i18n.translate("kbn.management.advancedSettings.badge.readOnly.tooltip",{defaultMessage:"Unable to save advanced settings"}),iconType:"glasses"}}});_modules.uiModules.get("apps/management").directive("kbnManagementAdvanced",(function(config,$route){return{restrict:"E",link:function link($scope){config.watchAll((function(){updateAdvancedSettings($scope,config,$route.current.params.setting||"")}),$scope);$scope.$on("$destroy",(function(){destroyAdvancedSettings()}));$route.updateParams({setting:null})}}}));_management.management.getSection("kibana").register("settings",{display:_i18n2.i18n.translate("kbn.management.settings.sectionLabel",{defaultMessage:"Advanced Settings"}),order:20,url:"#/management/kibana/settings"});_feature_catalogue.FeatureCatalogueRegistryProvider.register((function(){return{id:"advanced_settings",title:_i18n2.i18n.translate("kbn.management.settings.advancedSettingsLabel",{defaultMessage:"Advanced Settings"}),description:_i18n2.i18n.translate("kbn.management.settings.advancedSettingsDescription",{defaultMessage:"Directly edit settings that control behavior in Kibana."}),icon:"advancedSettingsApp",path:"/app/kibana#/management/kibana/settings",showOnHomePage:false,category:_feature_catalogue.FeatureCatalogueCategory.ADMIN}}))},1900:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__);__webpack_exports__["default"]='<kbn-management-app section="kibana/settings">\n  <kbn-management-advanced>\n    <div id="reactAdvancedSettings"></div>\n  </kbn-management-advanced>\n</kbn-management-app>\n'},1901:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.AdvancedSettings=void 0;var _react=_interopRequireWildcard(__webpack_require__(0));var _propTypes=_interopRequireDefault(__webpack_require__(5));var _eui=__webpack_require__(3);var _call_outs=__webpack_require__(1902);var _search=__webpack_require__(1904);var _form=__webpack_require__(1906);var _advanced_settings_voice_announcement=__webpack_require__(1909);var _lib=__webpack_require__(174);var _default_component_registry=__webpack_require__(594);var _component_registry=__webpack_require__(266);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _interopRequireWildcard(obj){if(obj&&obj.__esModule){return obj}else{var newObj={};if(obj!=null){for(var key in obj){if(Object.prototype.hasOwnProperty.call(obj,key)){var desc=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):{};if(desc.get||desc.set){Object.defineProperty(newObj,key,desc)}else{newObj[key]=obj[key]}}}}newObj.default=obj;return newObj}}function _typeof(obj){if(typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"){_typeof=function _typeof(obj){return typeof obj}}else{_typeof=function _typeof(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj}}return _typeof(obj)}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);return Constructor}function _possibleConstructorReturn(self,call){if(call&&(_typeof(call)==="object"||typeof call==="function")){return call}return _assertThisInitialized(self)}function _getPrototypeOf(o){_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o)};return _getPrototypeOf(o)}function _assertThisInitialized(self){if(self===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return self}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function")}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:true,configurable:true}});if(superClass)_setPrototypeOf(subClass,superClass)}function _setPrototypeOf(o,p){_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(o,p){o.__proto__=p;return o};return _setPrototypeOf(o,p)}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}var AdvancedSettings=function(_Component){_inherits(AdvancedSettings,_Component);function AdvancedSettings(props){var _this;_classCallCheck(this,AdvancedSettings);_this=_possibleConstructorReturn(this,_getPrototypeOf(AdvancedSettings).call(this,props));_defineProperty(_assertThisInitialized(_this),"saveConfig",(function(name,value){return _this.props.config.set(name,value)}));_defineProperty(_assertThisInitialized(_this),"clearConfig",(function(name){return _this.props.config.remove(name)}));_defineProperty(_assertThisInitialized(_this),"onQueryChange",(function(_ref){var query=_ref.query;_this.setState({query:query,filteredSettings:_this.mapSettings(_eui.Query.execute(query,_this.settings))})}));_defineProperty(_assertThisInitialized(_this),"clearQuery",(function(){_this.setState({query:_eui.Query.parse(""),footerQueryMatched:false,filteredSettings:_this.groupedSettings})}));_defineProperty(_assertThisInitialized(_this),"onFooterQueryMatchChange",(function(matched){_this.setState({footerQueryMatched:matched})}));var _this$props=_this.props,config=_this$props.config,_query=_this$props.query;var parsedQuery=_eui.Query.parse(_query?'ariaName:"'.concat((0,_lib.getAriaName)(_query),'"'):"");_this.init(config);_this.state={query:parsedQuery,footerQueryMatched:false,filteredSettings:_this.mapSettings(_eui.Query.execute(parsedQuery,_this.settings))};(0,_default_component_registry.registerDefaultComponents)();return _this}_createClass(AdvancedSettings,[{key:"init",value:function init(config){var _this2=this;this.settings=this.mapConfig(config);this.groupedSettings=this.mapSettings(this.settings);this.categories=Object.keys(this.groupedSettings).sort((function(a,b){if(a===_lib.DEFAULT_CATEGORY)return-1;if(b===_lib.DEFAULT_CATEGORY)return 1;if(a>b)return 1;return a===b?0:-1}));this.categoryCounts=Object.keys(this.groupedSettings).reduce((function(counts,category){counts[category]=_this2.groupedSettings[category].length;return counts}),{})}},{key:"UNSAFE_componentWillReceiveProps",value:function UNSAFE_componentWillReceiveProps(nextProps){var config=nextProps.config;var query=this.state.query;this.init(config);this.setState({filteredSettings:this.mapSettings(_eui.Query.execute(query,this.settings))})}},{key:"mapConfig",value:function mapConfig(config){var all=config.getAll();return Object.entries(all).map((function(setting){return(0,_lib.toEditableConfig)({def:setting[1],name:setting[0],value:setting[1].userValue,isCustom:config.isCustom(setting[0]),isOverridden:config.isOverridden(setting[0])})})).filter((function(c){return!c.readonly})).sort(_eui.Comparators.property("name",_eui.Comparators.default("asc")))}},{key:"mapSettings",value:function mapSettings(settings){return settings.reduce((function(groupedSettings,setting){var category=setting.category[0];(groupedSettings[category]=groupedSettings[category]||[]).push(setting);return groupedSettings}),{})}},{key:"render",value:function render(){var _this$state=this.state,filteredSettings=_this$state.filteredSettings,query=_this$state.query,footerQueryMatched=_this$state.footerQueryMatched;var PageTitle=(0,_component_registry.getSettingsComponent)(_default_component_registry.PAGE_TITLE_COMPONENT);var PageSubtitle=(0,_component_registry.getSettingsComponent)(_default_component_registry.PAGE_SUBTITLE_COMPONENT);var PageFooter=(0,_component_registry.getSettingsComponent)(_default_component_registry.PAGE_FOOTER_COMPONENT);return _react.default.createElement("div",null,_react.default.createElement(_eui.EuiFlexGroup,{gutterSize:"none"},_react.default.createElement(_eui.EuiFlexItem,null,_react.default.createElement(PageTitle,null)),_react.default.createElement(_eui.EuiFlexItem,null,_react.default.createElement(_search.Search,{query:query,categories:this.categories,onQueryChange:this.onQueryChange}))),_react.default.createElement(PageSubtitle,null),_react.default.createElement(_eui.EuiSpacer,{size:"m"}),_react.default.createElement(_call_outs.CallOuts,null),_react.default.createElement(_eui.EuiSpacer,{size:"m"}),_react.default.createElement(_advanced_settings_voice_announcement.AdvancedSettingsVoiceAnnouncement,{queryText:query.text,settings:filteredSettings}),_react.default.createElement(_form.Form,{settings:filteredSettings,categories:this.categories,categoryCounts:this.categoryCounts,clearQuery:this.clearQuery,save:this.saveConfig,clear:this.clearConfig,showNoResultsMessage:!footerQueryMatched,enableSaving:this.props.enableSaving}),_react.default.createElement(PageFooter,{query:query,onQueryMatchChange:this.onFooterQueryMatchChange,enableSaving:this.props.enableSaving}))}}]);return AdvancedSettings}(_react.Component);exports.AdvancedSettings=AdvancedSettings;_defineProperty(AdvancedSettings,"propTypes",{config:_propTypes.default.object.isRequired,query:_propTypes.default.string,enableSaving:_propTypes.default.bool.isRequired})},1902:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});Object.defineProperty(exports,"CallOuts",{enumerable:true,get:function get(){return _call_outs.CallOuts}});var _call_outs=__webpack_require__(1903)},1903:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.CallOuts=void 0;var _react=_interopRequireDefault(__webpack_require__(0));var _eui=__webpack_require__(3);var _react2=__webpack_require__(4);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var CallOuts=function CallOuts(){return _react.default.createElement("div",null,_react.default.createElement(_eui.EuiCallOut,{title:_react.default.createElement(_react2.FormattedMessage,{id:"kbn.management.settings.callOutCautionTitle",defaultMessage:"Caution: You can break stuff here"}),color:"warning",iconType:"bolt"},_react.default.createElement("p",null,_react.default.createElement(_react2.FormattedMessage,{id:"kbn.management.settings.callOutCautionDescription",defaultMessage:"Be careful in here, these settings are for very advanced users only. Tweaks you make here can break large portions of Kibana. Some of these settings may be undocumented, unsupported or experimental. If a field has a default value, blanking the field will reset it to its default which may be unacceptable given other configuration directives. Deleting a custom setting will permanently remove it from Kibana's config."}))))};exports.CallOuts=CallOuts},1904:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});Object.defineProperty(exports,"Search",{enumerable:true,get:function get(){return _search.Search}});var _search=__webpack_require__(1905)},1905:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.Search=void 0;var _react=_interopRequireWildcard(__webpack_require__(0));var _propTypes=_interopRequireDefault(__webpack_require__(5));var _i18n=__webpack_require__(1);var _eui=__webpack_require__(3);var _lib=__webpack_require__(174);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _interopRequireWildcard(obj){if(obj&&obj.__esModule){return obj}else{var newObj={};if(obj!=null){for(var key in obj){if(Object.prototype.hasOwnProperty.call(obj,key)){var desc=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):{};if(desc.get||desc.set){Object.defineProperty(newObj,key,desc)}else{newObj[key]=obj[key]}}}}newObj.default=obj;return newObj}}function _typeof(obj){if(typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"){_typeof=function _typeof(obj){return typeof obj}}else{_typeof=function _typeof(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj}}return _typeof(obj)}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);return Constructor}function _possibleConstructorReturn(self,call){if(call&&(_typeof(call)==="object"||typeof call==="function")){return call}return _assertThisInitialized(self)}function _getPrototypeOf(o){_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o)};return _getPrototypeOf(o)}function _assertThisInitialized(self){if(self===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return self}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function")}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:true,configurable:true}});if(superClass)_setPrototypeOf(subClass,superClass)}function _setPrototypeOf(o,p){_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(o,p){o.__proto__=p;return o};return _setPrototypeOf(o,p)}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}var Search=function(_PureComponent){_inherits(Search,_PureComponent);function Search(props){var _this;_classCallCheck(this,Search);_this=_possibleConstructorReturn(this,_getPrototypeOf(Search).call(this,props));_defineProperty(_assertThisInitialized(_this),"state",{isSearchTextValid:true,parseErrorMessage:null});_defineProperty(_assertThisInitialized(_this),"onChange",(function(_ref){var query=_ref.query,error=_ref.error;if(error){_this.setState({isSearchTextValid:false,parseErrorMessage:error.message});return}_this.setState({isSearchTextValid:true,parseErrorMessage:null});_this.props.onQueryChange({query:query})}));var categories=props.categories;_this.categories=categories.map((function(category){return{value:category,name:(0,_lib.getCategoryName)(category)}}));return _this}_createClass(Search,[{key:"render",value:function render(){var query=this.props.query;var box={incremental:true,"data-test-subj":"settingsSearchBar","aria-label":_i18n.i18n.translate("kbn.management.settings.searchBarAriaLabel",{defaultMessage:"Search advanced settings"})};var filters=[{type:"field_value_selection",field:"category",name:_i18n.i18n.translate("kbn.management.settings.categorySearchLabel",{defaultMessage:"Category"}),multiSelect:"or",options:this.categories}];var queryParseError;if(!this.state.isSearchTextValid){var parseErrorMsg=_i18n.i18n.translate("kbn.management.settings.searchBar.unableToParseQueryErrorMessage",{defaultMessage:"Unable to parse query"});queryParseError=_react.default.createElement(_eui.EuiFormErrorText,null,"".concat(parseErrorMsg,". ").concat(this.state.parseErrorMessage))}return _react.default.createElement(_react.Fragment,null,_react.default.createElement(_eui.EuiSearchBar,{box:box,filters:filters,onChange:this.onChange,query:query}),queryParseError)}}]);return Search}(_react.PureComponent);exports.Search=Search;_defineProperty(Search,"propTypes",{categories:_propTypes.default.array.isRequired,query:_propTypes.default.object.isRequired,onQueryChange:_propTypes.default.func.isRequired})},1906:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});Object.defineProperty(exports,"Form",{enumerable:true,get:function get(){return _form.Form}});var _form=__webpack_require__(1907)},1907:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.Form=void 0;var _react=_interopRequireWildcard(__webpack_require__(0));var _propTypes=_interopRequireDefault(__webpack_require__(5));var _eui=__webpack_require__(3);var _react2=__webpack_require__(4);var _lib=__webpack_require__(174);var _field=__webpack_require__(1908);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _interopRequireWildcard(obj){if(obj&&obj.__esModule){return obj}else{var newObj={};if(obj!=null){for(var key in obj){if(Object.prototype.hasOwnProperty.call(obj,key)){var desc=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):{};if(desc.get||desc.set){Object.defineProperty(newObj,key,desc)}else{newObj[key]=obj[key]}}}}newObj.default=obj;return newObj}}function _typeof(obj){if(typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"){_typeof=function _typeof(obj){return typeof obj}}else{_typeof=function _typeof(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj}}return _typeof(obj)}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);return Constructor}function _possibleConstructorReturn(self,call){if(call&&(_typeof(call)==="object"||typeof call==="function")){return call}return _assertThisInitialized(self)}function _assertThisInitialized(self){if(self===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return self}function _getPrototypeOf(o){_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o)};return _getPrototypeOf(o)}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function")}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:true,configurable:true}});if(superClass)_setPrototypeOf(subClass,superClass)}function _setPrototypeOf(o,p){_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(o,p){o.__proto__=p;return o};return _setPrototypeOf(o,p)}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}var Form=function(_PureComponent){_inherits(Form,_PureComponent);function Form(){_classCallCheck(this,Form);return _possibleConstructorReturn(this,_getPrototypeOf(Form).apply(this,arguments))}_createClass(Form,[{key:"renderClearQueryLink",value:function renderClearQueryLink(totalSettings,currentSettings){var clearQuery=this.props.clearQuery;if(totalSettings!==currentSettings){return _react.default.createElement(_eui.EuiFlexItem,{grow:false},_react.default.createElement("em",null,_react.default.createElement(_react2.FormattedMessage,{id:"kbn.management.settings.form.searchResultText",defaultMessage:"Search terms are hiding {settingsCount} settings {clearSearch}",values:{settingsCount:totalSettings-currentSettings,clearSearch:_react.default.createElement(_eui.EuiLink,{onClick:clearQuery},_react.default.createElement("em",null,_react.default.createElement(_react2.FormattedMessage,{id:"kbn.management.settings.form.clearSearchResultText",defaultMessage:"(clear search)"})))}})))}return null}},{key:"renderCategory",value:function renderCategory(category,settings,totalSettings){var _this=this;return _react.default.createElement(_react.Fragment,{key:category},_react.default.createElement(_eui.EuiPanel,{paddingSize:"l"},_react.default.createElement(_eui.EuiForm,null,_react.default.createElement(_eui.EuiText,null,_react.default.createElement(_eui.EuiFlexGroup,{alignItems:"baseline"},_react.default.createElement(_eui.EuiFlexItem,{grow:false},_react.default.createElement("h2",null,(0,_lib.getCategoryName)(category))),this.renderClearQueryLink(totalSettings,settings.length))),_react.default.createElement(_eui.EuiSpacer,{size:"m"}),settings.map((function(setting){return _react.default.createElement(_field.Field,{key:setting.name,setting:setting,save:_this.props.save,clear:_this.props.clear,enableSaving:_this.props.enableSaving})})))),_react.default.createElement(_eui.EuiSpacer,{size:"l"}))}},{key:"maybeRenderNoSettings",value:function maybeRenderNoSettings(clearQuery){if(this.props.showNoResultsMessage){return _react.default.createElement(_eui.EuiPanel,{paddingSize:"l"},_react.default.createElement(_react2.FormattedMessage,{id:"kbn.management.settings.form.noSearchResultText",defaultMessage:"No settings found {clearSearch}",values:{clearSearch:_react.default.createElement(_eui.EuiLink,{onClick:clearQuery},_react.default.createElement(_react2.FormattedMessage,{id:"kbn.management.settings.form.clearNoSearchResultText",defaultMessage:"(clear search)"}))}}))}return null}},{key:"render",value:function render(){var _this2=this;var _this$props=this.props,settings=_this$props.settings,categories=_this$props.categories,categoryCounts=_this$props.categoryCounts,clearQuery=_this$props.clearQuery;var currentCategories=[];categories.forEach((function(category){if(settings[category]&&settings[category].length){currentCategories.push(category)}}));return _react.default.createElement(_react.Fragment,null,currentCategories.length?currentCategories.map((function(category){return _this2.renderCategory(category,settings[category],categoryCounts[category])})):this.maybeRenderNoSettings(clearQuery))}}]);return Form}(_react.PureComponent);exports.Form=Form;_defineProperty(Form,"propTypes",{settings:_propTypes.default.object.isRequired,categories:_propTypes.default.array.isRequired,categoryCounts:_propTypes.default.object.isRequired,clearQuery:_propTypes.default.func.isRequired,save:_propTypes.default.func.isRequired,clear:_propTypes.default.func.isRequired,showNoResultsMessage:_propTypes.default.bool.isRequired,enableSaving:_propTypes.default.bool.isRequired})},1908:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});Object.defineProperty(exports,"Field",{enumerable:true,get:function get(){return _field.Field}});var _field=__webpack_require__(596)},1909:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});Object.defineProperty(exports,"AdvancedSettingsVoiceAnnouncement",{enumerable:true,get:function get(){return _advanced_settings_voice_announcement.AdvancedSettingsVoiceAnnouncement}});var _advanced_settings_voice_announcement=__webpack_require__(1910)},1910:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.AdvancedSettingsVoiceAnnouncement=void 0;var _react=_interopRequireWildcard(__webpack_require__(0));var _react2=__webpack_require__(4);var _eui=__webpack_require__(3);function _interopRequireWildcard(obj){if(obj&&obj.__esModule){return obj}else{var newObj={};if(obj!=null){for(var key in obj){if(Object.prototype.hasOwnProperty.call(obj,key)){var desc=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):{};if(desc.get||desc.set){Object.defineProperty(newObj,key,desc)}else{newObj[key]=obj[key]}}}}newObj.default=obj;return newObj}}function _typeof(obj){if(typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"){_typeof=function _typeof(obj){return typeof obj}}else{_typeof=function _typeof(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj}}return _typeof(obj)}function _toConsumableArray(arr){return _arrayWithoutHoles(arr)||_iterableToArray(arr)||_nonIterableSpread()}function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance")}function _iterableToArray(iter){if(Symbol.iterator in Object(iter)||Object.prototype.toString.call(iter)==="[object Arguments]")return Array.from(iter)}function _arrayWithoutHoles(arr){if(Array.isArray(arr)){for(var i=0,arr2=new Array(arr.length);i<arr.length;i++){arr2[i]=arr[i]}return arr2}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);return Constructor}function _possibleConstructorReturn(self,call){if(call&&(_typeof(call)==="object"||typeof call==="function")){return call}return _assertThisInitialized(self)}function _getPrototypeOf(o){_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o)};return _getPrototypeOf(o)}function _assertThisInitialized(self){if(self===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return self}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function")}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:true,configurable:true}});if(superClass)_setPrototypeOf(subClass,superClass)}function _setPrototypeOf(o,p){_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(o,p){o.__proto__=p;return o};return _setPrototypeOf(o,p)}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}var AdvancedSettingsVoiceAnnouncement=function(_Component){_inherits(AdvancedSettingsVoiceAnnouncement,_Component);function AdvancedSettingsVoiceAnnouncement(){var _getPrototypeOf2;var _this;_classCallCheck(this,AdvancedSettingsVoiceAnnouncement);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key]}_this=_possibleConstructorReturn(this,(_getPrototypeOf2=_getPrototypeOf(AdvancedSettingsVoiceAnnouncement)).call.apply(_getPrototypeOf2,[this].concat(args)));_defineProperty(_assertThisInitialized(_this),"shouldComponentUpdate",(function(nextProps){return nextProps.queryText!==_this.props.queryText}));return _this}_createClass(AdvancedSettingsVoiceAnnouncement,[{key:"render",value:function render(){var _ref;var filteredSections=Object.values(this.props.settings).map((function(setting){return setting.map((function(option){return option.ariaName}))}));var filteredOptions=(_ref=[]).concat.apply(_ref,_toConsumableArray(filteredSections));return _react.default.createElement(_eui.EuiScreenReaderOnly,null,_react.default.createElement("div",{role:"region","aria-live":"polite"},_react.default.createElement(_eui.EuiDelayRender,null,_react.default.createElement(_react2.FormattedMessage,{id:"kbn.settings.advancedSettings.voiceAnnouncement.searchResultScreenReaderMessage",defaultMessage:"You searched for {query}. There {optionLenght, plural, one {is # option} other {are # options}} in {sectionLenght, plural, one {# section} other {# sections}}",values:{query:this.props.queryText,sectionLenght:filteredSections.length,optionLenght:filteredOptions.length}}))))}}]);return AdvancedSettingsVoiceAnnouncement}(_react.Component);exports.AdvancedSettingsVoiceAnnouncement=AdvancedSettingsVoiceAnnouncement},1911:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.getBreadcrumbs=getBreadcrumbs;var _management=__webpack_require__(80);var _i18n=__webpack_require__(1);function getBreadcrumbs(){return[_management.MANAGEMENT_BREADCRUMB,{text:_i18n.i18n.translate("kbn.management.settings.breadcrumb",{defaultMessage:"Advanced settings"})}]}},1912:function(module,exports,__webpack_require__){"use strict";var _i18n=__webpack_require__(1);var _management=__webpack_require__(80);__webpack_require__(1913);__webpack_require__(1917);__webpack_require__(2263);var _modules=__webpack_require__(8);var _feature_catalogue=__webpack_require__(106);_modules.uiModules.get("apps/management");_management.management.getSection("kibana").register("objects",{display:_i18n.i18n.translate("kbn.management.objects.savedObjectsSectionLabel",{defaultMessage:"Saved Objects"}),order:10,url:"#/management/kibana/objects"});_feature_catalogue.FeatureCatalogueRegistryProvider.register((function(){return{id:"saved_objects",title:_i18n.i18n.translate("kbn.management.objects.savedObjectsTitle",{defaultMessage:"Saved Objects"}),description:_i18n.i18n.translate("kbn.management.objects.savedObjectsDescription",{defaultMessage:"Import, export, and manage your saved searches, visualizations, and dashboards."}),icon:"savedObjectsApp",path:"/app/kibana#/management/kibana/objects",showOnHomePage:true,category:_feature_catalogue.FeatureCatalogueCategory.ADMIN}}))},1913:function(module,exports,__webpack_require__){"use strict";var _lodash=_interopRequireDefault(__webpack_require__(2));var _i18n=__webpack_require__(1);var _angular=_interopRequireDefault(__webpack_require__(20));__webpack_require__(2238);var _risonNode=_interopRequireDefault(__webpack_require__(132));var _saved_object_registry=__webpack_require__(94);var _view=_interopRequireDefault(__webpack_require__(1915));var _routes=_interopRequireDefault(__webpack_require__(31));var _modules=__webpack_require__(8);var _notify=__webpack_require__(18);__webpack_require__(487);var _saved_objects=__webpack_require__(68);var _numeric=__webpack_require__(1916);var _in_app_url=__webpack_require__(603);var _public=__webpack_require__(7);var _breadcrumbs=__webpack_require__(604);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _objectWithoutProperties(source,excluded){if(source==null)return{};var target=_objectWithoutPropertiesLoose(source,excluded);var key,i;if(Object.getOwnPropertySymbols){var sourceSymbolKeys=Object.getOwnPropertySymbols(source);for(i=0;i<sourceSymbolKeys.length;i++){key=sourceSymbolKeys[i];if(excluded.indexOf(key)>=0)continue;if(!Object.prototype.propertyIsEnumerable.call(source,key))continue;target[key]=source[key]}}return target}function _objectWithoutPropertiesLoose(source,excluded){if(source==null)return{};var target={};var sourceKeys=Object.keys(source);var key,i;for(i=0;i<sourceKeys.length;i++){key=sourceKeys[i];if(excluded.indexOf(key)>=0)continue;target[key]=source[key]}return target}var location="SavedObject view";_routes.default.when("/management/kibana/objects/:service/:id",{template:_view.default,k7Breadcrumbs:_breadcrumbs.getViewBreadcrumbs,requireUICapability:"management.kibana.objects"});_modules.uiModules.get("apps/management",["monospaced.elastic"]).directive("kbnManagementObjectsView",(function(kbnIndex,confirmModal){return{restrict:"E",controller:function controller($scope,$injector,$routeParams,$location,$window,$rootScope,Private,uiCapabilities){var serviceObj=_saved_object_registry.savedObjectManagementRegistry.get($routeParams.service);var service=$injector.get(serviceObj.service);var savedObjectsClient=Private(_saved_objects.SavedObjectsClientProvider);var createField=function createField(memo,val,key,collection,parents){if(Array.isArray(parents)){parents.push(key)}else{parents=[key]}var field={type:"text",name:parents.join("."),value:val};if(_lodash.default.isString(field.value)){try{field.value=_angular.default.toJson(JSON.parse(field.value),true);field.type="json"}catch(err){field.value=field.value}}else if((0,_numeric.isNumeric)(field.value)){field.type="number"}else if(Array.isArray(field.value)){field.type="array";field.value=_angular.default.toJson(field.value,true)}else if(_lodash.default.isBoolean(field.value)){field.type="boolean";field.value=field.value}else if(_lodash.default.isPlainObject(field.value)){return _lodash.default.reduce(field.value,_lodash.default.partialRight(createField,parents),memo)}memo.push(field);parents.pop();return memo};var readObjectClass=function readObjectClass(fields,Class){var fieldMap=_lodash.default.indexBy(fields,"name");_lodash.default.forOwn(Class.mapping,(function(esType,name){if(fieldMap[name])return;fields.push({name:name,type:function(){switch((0,_public.castEsToKbnFieldTypeName)(esType)){case"string":return"text";case"number":return"number";case"boolean":return"boolean";default:return"json"}}()})}));if(Class.searchSource&&!fieldMap["kibanaSavedObjectMeta.searchSourceJSON"]){fields.push({name:"kibanaSavedObjectMeta.searchSourceJSON",type:"json",value:"{}"})}if(!fieldMap.references){fields.push({name:"references",type:"array",value:"[]"})}};var _uiCapabilities$saved=uiCapabilities.savedObjectsManagement,canEdit=_uiCapabilities$saved.edit,canDelete=_uiCapabilities$saved.delete;$scope.canEdit=canEdit;$scope.canDelete=canDelete;$scope.canViewInApp=(0,_in_app_url.canViewInApp)(uiCapabilities,service.type);$scope.notFound=$routeParams.notFound;$scope.title=service.type;savedObjectsClient.get(service.type,$routeParams.id).then((function(obj){$scope.obj=obj;$scope.link=service.urlFor(obj.id);var fields=_lodash.default.reduce(obj.attributes,createField,[]);createField(fields,obj.references,"references");if(service.Class)readObjectClass(fields,service.Class);var nameSortedFields=_lodash.default.sortBy(fields,"name");$scope.fields=_lodash.default.sortBy(nameSortedFields,(function(field){var orderIndex=service.Class.fieldOrder?service.Class.fieldOrder.indexOf(field.name):-1;return orderIndex>-1?orderIndex:Infinity}))})).catch((function(error){return(0,_notify.fatalError)(error,location)}));var loadedEditors=[];$scope.aceInvalidEditors=[];$scope.aceLoaded=function(editor){if(_lodash.default.contains(loadedEditors,editor))return;loadedEditors.push(editor);editor.$blockScrolling=Infinity;var session=editor.getSession();var fieldName=editor.container.id;session.setTabSize(2);session.setUseSoftTabs(true);session.on("changeAnnotation",(function(){var annotations=session.getAnnotations();if(_lodash.default.some(annotations,{type:"error"})){if(!_lodash.default.contains($scope.aceInvalidEditors,fieldName)){$scope.aceInvalidEditors.push(fieldName)}}else{$scope.aceInvalidEditors=_lodash.default.without($scope.aceInvalidEditors,fieldName)}if(!$rootScope.$$phase)$scope.$apply()}))};$scope.cancel=function(){$window.history.back();return false};$scope.delete=function(){function doDelete(){savedObjectsClient.delete(service.type,$routeParams.id).then((function(){return redirectHandler("deleted")})).catch((function(error){return(0,_notify.fatalError)(error,location)}))}var confirmModalOptions={onConfirm:doDelete,confirmButtonText:_i18n.i18n.translate("kbn.management.objects.confirmModalOptions.deleteButtonLabel",{defaultMessage:"Delete"}),title:_i18n.i18n.translate("kbn.management.objects.confirmModalOptions.modalTitle",{defaultMessage:"Delete saved Kibana object?"})};confirmModal(_i18n.i18n.translate("kbn.management.objects.confirmModalOptions.modalDescription",{defaultMessage:"You can't recover deleted objects"}),confirmModalOptions)};$scope.submit=function(){var source=_lodash.default.cloneDeep($scope.obj.attributes);_lodash.default.each($scope.fields,(function(field){var value=field.value;if(field.type==="number"){value=Number(field.value)}if(field.type==="array"){value=JSON.parse(field.value)}_lodash.default.set(source,field.name,value)}));var references=source.references,attributes=_objectWithoutProperties(source,["references"]);savedObjectsClient.update(service.type,$routeParams.id,attributes,{references:references}).then((function(){return redirectHandler("updated")})).catch((function(error){return(0,_notify.fatalError)(error,location)}))};function redirectHandler(action){$location.path("/management/kibana/objects").search({_a:_risonNode.default.encode({tab:serviceObj.title})});_notify.toastNotifications.addSuccess("".concat(_lodash.default.capitalize(action)," '").concat($scope.obj.attributes.title,"' ").concat($scope.title.toLowerCase()," object"))}}}}))},1915:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__);__webpack_exports__["default"]='<kbn-management-app section="kibana/objects" class="kuiView" data-test-subj="savedObjectsEdit">\n  <kbn-management-objects-view class="kuiViewContent kuiViewContent--constrainedWidth">\n    \x3c!-- Header --\x3e\n    <div class="kuiViewContentItem kuiBar kuiVerticalRhythm">\n      <div class="kuiBarSection">\n        <h1\n          class="kuiTitle"\n          i18n-id="kbn.management.objects.view.editItemTitle"\n          i18n-default-message="Edit {title}"\n          i18n-values="{ title }"\n          ng-if="canEdit"\n        ></h1>\n\n        <h1\n          class="kuiTitle"\n          i18n-id="kbn.management.objects.view.viewItemTitle"\n          i18n-default-message="View {title}"\n          i18n-values="{ title }"\n          ng-if="!canEdit"\n        ></h1>\n      </div>\n\n      <div class="kuiBarSection">\n        <a\n          class="kuiButton kuiButton--basic kuiButton--iconText"\n          href="{{ link }}"\n          ng-if="canViewInApp"\n        >\n          <span class="kuiButton__inner">\n            <span class="kuiButton__icon kuiIcon fa-eye"></span>\n            <span\n              i18n-id="kbn.management.objects.view.viewItemButtonLabel"\n              i18n-default-message="View {title}"\n              i18n-values="{ title }"\n            ></span>\n          </span>\n        </a>\n\n        <button\n          class="kuiButton kuiButton--danger kuiButton--iconText"\n          ng-click="delete()"\n          ng-if="canDelete"\n          data-test-subj="savedObjectEditDelete"\n        >\n          <span class="kuiButton__inner">\n            <span class="kuiButton__icon kuiIcon fa-trash-o"></span>\n            <span\n              i18n-id="kbn.management.objects.view.deleteItemButtonLabel"\n              i18n-default-message="Delete {title}"\n              i18n-values="{ title }"\n              ></span>\n          </span>\n        </button>\n      </div>\n    </div>\n\n    \x3c!-- Errors --\x3e\n    <div\n      class="kuiViewContentItem kuiVerticalRhythm"\n      ng-if="notFound"\n    >\n      <div class="kuiInfoPanel kuiInfoPanel--error">\n        <div class="kuiInfoPanelHeader">\n          <span class="kuiInfoPanelHeader__icon kuiIcon kuiIcon--error fa-warning"></span>\n          <span\n            class="kuiInfoPanelHeader__title"\n            i18n-id="kbn.management.objects.view.savedObjectProblemErrorMessage"\n            i18n-default-message="There is a problem with this saved object"\n            ></span>\n        </div>\n\n        <div class="kuiInfoPanelBody">\n          <div\n            class="kuiInfoPanelBody__message"\n            ng-if="notFound === \'search\'"\n            i18n-id="kbn.management.objects.view.savedSearchDoesNotExistErrorMessage"\n            i18n-default-message="The saved search associated with this object no longer exists."\n          ></div>\n\n          <div\n            class="kuiInfoPanelBody__message"\n            ng-if="notFound === \'index-pattern\'"\n            i18n-id="kbn.management.objects.view.indexPatternDoesNotExistErrorMessage"\n            i18n-default-message="The index pattern associated with this object no longer exists."\n          ></div>\n\n          <div\n            class="kuiInfoPanelBody__message"\n            ng-if="notFound === \'index-pattern-field\'"\n            i18n-id="kbn.management.objects.view.fieldDoesNotExistErrorMessage"\n            i18n-default-message="A field associated with this object no longer exists in the index pattern."\n          ></div>\n\n          <div\n            class="kuiInfoPanelBody__message"\n            i18n-id="kbn.management.objects.view.howToFixErrorDescription"\n            i18n-default-message="If you know what this error means, go ahead and fix it &mdash; otherwise click the delete button above."\n          ></div>\n        </div>\n      </div>\n    </div>\n\n    \x3c!-- Intro --\x3e\n    <div class="kuiViewContentItem kuiVerticalRhythm">\n      <div class="kuiInfoPanel kuiInfoPanel--warning" ng-if="canEdit">\n        <div class="kuiInfoPanelHeader">\n          <span class="kuiInfoPanelHeader__icon kuiIcon kuiIcon--warning fa-bolt"></span>\n          <span\n            class="kuiInfoPanelHeader__title"\n            i18n-id="kbn.management.objects.view.howToModifyObjectTitle"\n            i18n-default-message="Proceed with caution!"\n          ></span>\n        </div>\n\n        <div class="kuiInfoPanelBody">\n          <div\n            class="kuiInfoPanelBody__message"\n            i18n-id="kbn.management.objects.view.howToModifyObjectDescription"\n            i18n-default-message=" Modifying objects is for advanced users only. Object properties are not validated and invalid objects could cause errors, data loss, or worse. Unless someone with intimate knowledge of the code told you to be in here, you probably shouldn&rsquo;t be."\n          >\n          </div>\n        </div>\n      </div>\n    </div>\n\n    <div class="kuiViewContentItem kuiVerticalRhythm">\n      \x3c!-- Form --\x3e\n      <form\n        role="form"\n        name="objectForm"\n        ng-submit="submit()"\n        data-test-subj="savedObjectEditForm"\n      >\n        <div class="kuiFormSection" ng-repeat="field in fields">\n          <label for="{{ field.name }}" class="kuiFormLabel">\n            {{ field.name }}\n          </label>\n\n          <input\n            id="{{ field.name }}"\n            ng-if="field.type === \'number\'"\n            class="kuiTextInput"\n            type="number"\n            ng-model="field.value"\n            ng-disabled="{{ !canEdit }}"\n          >\n\n          <textarea\n            id="{{ field.name }}"\n            ng-if="field.type === \'text\'"\n            class="kuiTextArea"\n            rows="1"\n            msd-elastic=" "\n            ng-model="field.value"\n            ng-disabled="{{ !canEdit }}"\n          ></textarea>\n\n          <input\n            ng-if="field.type === \'boolean\'"\n            class="kuiCheckBox"\n            type="checkbox"\n            ng-model="field.value"\n            ng-checked="field.value"\n            ng-disabled="{{ !canEdit }}"\n          >\n\n          <div\n            ng-if="field.type === \'json\' || field.type === \'array\'"\n            kbn-ui-ace-keyboard-mod\n            ng-attr-readonly="{{ canEdit ? undefined : true }}"\n            ui-ace="{ onLoad: aceLoaded, mode: \'json\' }"\n            id="{{field.name}}"\n            ng-model="field.value"\n            class="form-control"\n          ></div>\n        </div>\n      </form>\n\n      \x3c!-- Actions --\x3e\n      <div class="kuiButtonGroup">\n        <button\n          class="kuiButton kuiButton--primary"\n          aria-label="{{ \'kbn.management.objects.view.saveButtonAriaLabel\' | i18n: { defaultMessage: \'Save { title } Object\', values: { title } } }}"\n          ng-click="submit()"\n          ng-disabled="objectForm.$invalid || aceInvalidEditors.length !==0"\n          i18n-id="kbn.management.objects.view.saveButtonLabel"\n          i18n-default-message="Save { title } Object"\n          i18n-values="{ title }"\n          ng-if="canEdit"\n          data-test-subj="savedObjectEditSave"\n        ></button>\n\n        <button\n          class="kuiButton kuiButton--basic"\n          aria-label="{{ \'kbn.management.objects.view.cancelButtonAriaLabel\' | i18n: { defaultMessage: \'Cancel\'} }}"\n          ng-click="cancel()"\n          i18n-id="kbn.management.objects.view.cancelButtonLabel"\n          i18n-default-message="Cancel"\n        ></button>\n      </div>\n    </div>\n  </kbn-management-objects-view>\n</kbn-management-app>\n'},1916:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.isNumeric=isNumeric;var _lodash=__webpack_require__(2);function isNumeric(v){return!(0,_lodash.isNaN)(v)&&(typeof v==="number"||!Array.isArray(v)&&!(0,_lodash.isNaN)(parseFloat(v)))}},1917:function(module,exports,__webpack_require__){"use strict";var _saved_object_registry=__webpack_require__(94);var _objects=_interopRequireDefault(__webpack_require__(1918));var _routes=_interopRequireDefault(__webpack_require__(31));var _chrome=_interopRequireDefault(__webpack_require__(10));var _saved_objects=__webpack_require__(68);var _modules=__webpack_require__(8);var _react=_interopRequireDefault(__webpack_require__(0));var _reactDom=__webpack_require__(9);var _objects_table=__webpack_require__(1919);var _i18n=__webpack_require__(24);var _lodash=__webpack_require__(2);var _new_platform=__webpack_require__(6);var _breadcrumbs=__webpack_require__(604);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var REACT_OBJECTS_TABLE_DOM_ELEMENT_ID="reactSavedObjectsTable";function updateObjectsTable($scope,$injector){var Private=$injector.get("Private");var indexPatterns=_new_platform.npStart.plugins.data.indexPatterns;var $http=$injector.get("$http");var kbnUrl=$injector.get("kbnUrl");var config=$injector.get("config");var confirmModalPromise=$injector.get("confirmModalPromise");var savedObjectsClient=Private(_saved_objects.SavedObjectsClientProvider);var services=_saved_object_registry.savedObjectManagementRegistry.all().map((function(obj){return $injector.get(obj.service)}));var uiCapabilites=_new_platform.npStart.core.application.capabilities;$scope.$$postDigest((function(){var node=document.getElementById(REACT_OBJECTS_TABLE_DOM_ELEMENT_ID);if(!node){return}(0,_reactDom.render)(_react.default.createElement(_i18n.I18nContext,null,_react.default.createElement(_objects_table.ObjectsTable,{savedObjectsClient:savedObjectsClient,confirmModalPromise:confirmModalPromise,services:services,indexPatterns:indexPatterns,$http:$http,perPageConfig:config.get("savedObjects:perPage"),basePath:_chrome.default.getBasePath(),newIndexPatternUrl:kbnUrl.eval("#/management/kibana/index_pattern"),uiCapabilities:uiCapabilites,goInspectObject:function goInspectObject(object){if(object.meta.editUrl){kbnUrl.change(object.meta.editUrl);$scope.$apply()}},canGoInApp:function canGoInApp(object){var inAppUrl=object.meta.inAppUrl;return inAppUrl&&(0,_lodash.get)(uiCapabilites,inAppUrl.uiCapabilitiesPath)}})),node)}))}function destroyObjectsTable(){var node=document.getElementById(REACT_OBJECTS_TABLE_DOM_ELEMENT_ID);node&&(0,_reactDom.unmountComponentAtNode)(node)}_routes.default.when("/management/kibana/objects",{template:_objects.default,k7Breadcrumbs:_breadcrumbs.getIndexBreadcrumbs,requireUICapability:"management.kibana.objects"}).when("/management/kibana/objects/:service",{redirectTo:"/management/kibana/objects"});_modules.uiModules.get("apps/management").directive("kbnManagementObjects",(function(){return{restrict:"E",controllerAs:"managementObjectsController",controller:function controller($scope,$injector){updateObjectsTable($scope,$injector);$scope.$on("$destroy",destroyObjectsTable)}}}))},1918:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__);__webpack_exports__["default"]='<kbn-management-app section="kibana/objects">\n  <kbn-management-objects>\n    <div id="reactSavedObjectsTable"></div>\n  </kbn-management-objects>\n</kbn-management-app>\n'},1919:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});Object.defineProperty(exports,"ObjectsTable",{enumerable:true,get:function get(){return _objects_table.ObjectsTable}});var _objects_table=__webpack_require__(605)},1920:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});Object.defineProperty(exports,"Header",{enumerable:true,get:function get(){return _header.Header}});var _header=__webpack_require__(1921)},1921:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.Header=void 0;var _react=_interopRequireWildcard(__webpack_require__(0));var _propTypes=_interopRequireDefault(__webpack_require__(5));var _eui=__webpack_require__(3);var _react2=__webpack_require__(4);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _interopRequireWildcard(obj){if(obj&&obj.__esModule){return obj}else{var newObj={};if(obj!=null){for(var key in obj){if(Object.prototype.hasOwnProperty.call(obj,key)){var desc=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):{};if(desc.get||desc.set){Object.defineProperty(newObj,key,desc)}else{newObj[key]=obj[key]}}}}newObj.default=obj;return newObj}}var Header=function Header(_ref){var onExportAll=_ref.onExportAll,onImport=_ref.onImport,onRefresh=_ref.onRefresh,filteredCount=_ref.filteredCount;return _react.default.createElement(_react.Fragment,null,_react.default.createElement(_eui.EuiFlexGroup,{justifyContent:"spaceBetween",alignItems:"baseline"},_react.default.createElement(_eui.EuiFlexItem,{grow:false},_react.default.createElement(_eui.EuiTitle,null,_react.default.createElement("h1",null,_react.default.createElement(_react2.FormattedMessage,{id:"kbn.management.objects.objectsTable.header.savedObjectsTitle",defaultMessage:"Saved Objects"})))),_react.default.createElement(_eui.EuiFlexItem,{grow:false},_react.default.createElement(_eui.EuiFlexGroup,{alignItems:"baseline",gutterSize:"m",responsive:false},_react.default.createElement(_eui.EuiFlexItem,{grow:false},_react.default.createElement(_eui.EuiButtonEmpty,{size:"s",iconType:"exportAction","data-test-subj":"exportAllObjects",onClick:onExportAll},_react.default.createElement(_react2.FormattedMessage,{id:"kbn.management.objects.objectsTable.header.exportButtonLabel",defaultMessage:"Export {filteredCount, plural, one{# object} other {# objects}}",values:{filteredCount:filteredCount}}))),_react.default.createElement(_eui.EuiFlexItem,{grow:false},_react.default.createElement(_eui.EuiButtonEmpty,{size:"s",iconType:"importAction","data-test-subj":"importObjects",onClick:onImport},_react.default.createElement(_react2.FormattedMessage,{id:"kbn.management.objects.objectsTable.header.importButtonLabel",defaultMessage:"Import"}))),_react.default.createElement(_eui.EuiFlexItem,{grow:false},_react.default.createElement(_eui.EuiButtonEmpty,{size:"s",iconType:"refresh",onClick:onRefresh},_react.default.createElement(_react2.FormattedMessage,{id:"kbn.management.objects.objectsTable.header.refreshButtonLabel",defaultMessage:"Refresh"})))))),_react.default.createElement(_eui.EuiSpacer,{size:"m"}),_react.default.createElement(_eui.EuiText,{size:"s"},_react.default.createElement("p",null,_react.default.createElement(_eui.EuiTextColor,{color:"subdued"},_react.default.createElement(_react2.FormattedMessage,{id:"kbn.management.objects.objectsTable.howToDeleteSavedObjectsDescription",defaultMessage:"From here you can delete saved objects, such as saved searches. You can also edit the raw data of saved objects. Typically objects are only modified via their associated application, which is probably what you should use instead of this screen."})))),_react.default.createElement(_eui.EuiSpacer,{size:"m"}))};exports.Header=Header;Header.propTypes={onExportAll:_propTypes.default.func.isRequired,onImport:_propTypes.default.func.isRequired,onRefresh:_propTypes.default.func.isRequired,filteredCount:_propTypes.default.number.isRequired}},1922:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});Object.defineProperty(exports,"Flyout",{enumerable:true,get:function get(){return _flyout.Flyout}});var _flyout=__webpack_require__(1923)},1923:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.Flyout=void 0;var _react=_interopRequireWildcard(__webpack_require__(0));var _propTypes=_interopRequireDefault(__webpack_require__(5));var _lodash=__webpack_require__(2);var _eui=__webpack_require__(3);var _i18n=__webpack_require__(1);var _react2=__webpack_require__(4);var _lib=__webpack_require__(175);var _process_import_response=__webpack_require__(267);var _resolve_saved_objects=__webpack_require__(606);var _objects_table=__webpack_require__(605);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _interopRequireWildcard(obj){if(obj&&obj.__esModule){return obj}else{var newObj={};if(obj!=null){for(var key in obj){if(Object.prototype.hasOwnProperty.call(obj,key)){var desc=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):{};if(desc.get||desc.set){Object.defineProperty(newObj,key,desc)}else{newObj[key]=obj[key]}}}}newObj.default=obj;return newObj}}function _typeof(obj){if(typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"){_typeof=function _typeof(obj){return typeof obj}}else{_typeof=function _typeof(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj}}return _typeof(obj)}function _toConsumableArray(arr){return _arrayWithoutHoles(arr)||_iterableToArray(arr)||_nonIterableSpread()}function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance")}function _iterableToArray(iter){if(Symbol.iterator in Object(iter)||Object.prototype.toString.call(iter)==="[object Arguments]")return Array.from(iter)}function _arrayWithoutHoles(arr){if(Array.isArray(arr)){for(var i=0,arr2=new Array(arr.length);i<arr.length;i++){arr2[i]=arr[i]}return arr2}}function ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);if(enumerableOnly)symbols=symbols.filter((function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable}));keys.push.apply(keys,symbols)}return keys}function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=arguments[i]!=null?arguments[i]:{};if(i%2){ownKeys(source,true).forEach((function(key){_defineProperty(target,key,source[key])}))}else if(Object.getOwnPropertyDescriptors){Object.defineProperties(target,Object.getOwnPropertyDescriptors(source))}else{ownKeys(source).forEach((function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))}))}}return target}function _slicedToArray(arr,i){return _arrayWithHoles(arr)||_iterableToArrayLimit(arr,i)||_nonIterableRest()}function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}function _iterableToArrayLimit(arr,i){var _arr=[];var _n=true;var _d=false;var _e=undefined;try{for(var _i=arr[Symbol.iterator](),_s;!(_n=(_s=_i.next()).done);_n=true){_arr.push(_s.value);if(i&&_arr.length===i)break}}catch(err){_d=true;_e=err}finally{try{if(!_n&&_i["return"]!=null)_i["return"]()}finally{if(_d)throw _e}}return _arr}function _arrayWithHoles(arr){if(Array.isArray(arr))return arr}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);return Constructor}function _possibleConstructorReturn(self,call){if(call&&(_typeof(call)==="object"||typeof call==="function")){return call}return _assertThisInitialized(self)}function _getPrototypeOf(o){_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o)};return _getPrototypeOf(o)}function _assertThisInitialized(self){if(self===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return self}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function")}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:true,configurable:true}});if(superClass)_setPrototypeOf(subClass,superClass)}function _setPrototypeOf(o,p){_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(o,p){o.__proto__=p;return o};return _setPrototypeOf(o,p)}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}var Flyout=function(_Component){_inherits(Flyout,_Component);function Flyout(props){var _this;_classCallCheck(this,Flyout);_this=_possibleConstructorReturn(this,_getPrototypeOf(Flyout).call(this,props));_defineProperty(_assertThisInitialized(_this),"fetchIndexPatterns",(function _callee(){var indexPatterns;return regeneratorRuntime.async((function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return regeneratorRuntime.awrap(_this.props.indexPatterns.getFields(["id","title"]));case 2:indexPatterns=_context.sent;_this.setState({indexPatterns:indexPatterns});case 4:case"end":return _context.stop()}}}))}));_defineProperty(_assertThisInitialized(_this),"changeOverwriteAll",(function(){_this.setState((function(state){return{isOverwriteAllChecked:!state.isOverwriteAllChecked}}))}));_defineProperty(_assertThisInitialized(_this),"setImportFile",(function(_ref){var _ref2=_slicedToArray(_ref,1),file=_ref2[0];if(!file){_this.setState({file:undefined,isLegacyFile:false});return}_this.setState({file:file,isLegacyFile:/\.json$/i.test(file.name)||file.type==="application/json"})}));_defineProperty(_assertThisInitialized(_this),"import",(function _callee2(){var _this$state,file,isOverwriteAllChecked,response;return regeneratorRuntime.async((function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:_this$state=_this.state,file=_this$state.file,isOverwriteAllChecked=_this$state.isOverwriteAllChecked;_this.setState({status:"loading",error:undefined});_context2.prev=2;_context2.next=5;return regeneratorRuntime.awrap((0,_lib.importFile)(file,isOverwriteAllChecked));case 5:response=_context2.sent;_context2.next=12;break;case 8:_context2.prev=8;_context2.t0=_context2["catch"](2);_this.setState({status:"error",error:_i18n.i18n.translate("kbn.management.objects.objectsTable.flyout.importFileErrorMessage",{defaultMessage:"The file could not be processed."})});return _context2.abrupt("return");case 12:_this.setState((0,_process_import_response.processImportResponse)(response),(function(){if(_this.state.unmatchedReferences.length===0){_this.resolveImportErrors()}}));case 13:case"end":return _context2.stop()}}}),null,null,[[2,8]])}));_defineProperty(_assertThisInitialized(_this),"getConflictResolutions",(function _callee3(objects){var resolutions,_iteratorNormalCompletion,_didIteratorError,_iteratorError,_loop,_iterator,_step;return regeneratorRuntime.async((function _callee3$(_context4){while(1){switch(_context4.prev=_context4.next){case 0:resolutions={};_iteratorNormalCompletion=true;_didIteratorError=false;_iteratorError=undefined;_context4.prev=4;_loop=function _loop(){var _step$value,type,id,title,overwrite;return regeneratorRuntime.async((function _loop$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:_step$value=_step.value,type=_step$value.type,id=_step$value.id,title=_step$value.title;_context3.next=3;return regeneratorRuntime.awrap(new Promise((function(resolve){_this.setState({conflictingRecord:{id:id,type:type,title:title,done:resolve}})})));case 3:overwrite=_context3.sent;resolutions["".concat(type,":").concat(id)]=overwrite;_this.setState({conflictingRecord:undefined});case 6:case"end":return _context3.stop()}}}))};_iterator=objects[Symbol.iterator]();case 7:if(_iteratorNormalCompletion=(_step=_iterator.next()).done){_context4.next=13;break}_context4.next=10;return regeneratorRuntime.awrap(_loop());case 10:_iteratorNormalCompletion=true;_context4.next=7;break;case 13:_context4.next=19;break;case 15:_context4.prev=15;_context4.t0=_context4["catch"](4);_didIteratorError=true;_iteratorError=_context4.t0;case 19:_context4.prev=19;_context4.prev=20;if(!_iteratorNormalCompletion&&_iterator.return!=null){_iterator.return()}case 22:_context4.prev=22;if(!_didIteratorError){_context4.next=25;break}throw _iteratorError;case 25:return _context4.finish(22);case 26:return _context4.finish(19);case 27:return _context4.abrupt("return",resolutions);case 28:case"end":return _context4.stop()}}}),null,null,[[4,15,19,27],[20,,22,26]])}));_defineProperty(_assertThisInitialized(_this),"resolveImportErrors",(function _callee4(){var updatedState;return regeneratorRuntime.async((function _callee4$(_context5){while(1){switch(_context5.prev=_context5.next){case 0:_this.setState({error:undefined,status:"loading",loadingMessage:undefined});_context5.prev=1;_context5.next=4;return regeneratorRuntime.awrap((0,_lib.resolveImportErrors)({state:_this.state,getConflictResolutions:_this.getConflictResolutions}));case 4:updatedState=_context5.sent;_this.setState(updatedState);_context5.next=11;break;case 8:_context5.prev=8;_context5.t0=_context5["catch"](1);_this.setState({status:"error",error:_i18n.i18n.translate("kbn.management.objects.objectsTable.flyout.resolveImportErrorsFileErrorMessage",{defaultMessage:"The file could not be processed."})});case 11:case"end":return _context5.stop()}}}),null,null,[[1,8]])}));_defineProperty(_assertThisInitialized(_this),"legacyImport",(function _callee5(){var _this$props,services,indexPatterns,confirmModalPromise,_this$state2,file,isOverwriteAllChecked,contents,_ref3,conflictedIndexPatterns,conflictedSavedObjectsLinkedToSavedSearches,conflictedSearchDocs,importedObjectCount,failedImports,byId,unmatchedReferences;return regeneratorRuntime.async((function _callee5$(_context6){while(1){switch(_context6.prev=_context6.next){case 0:_this$props=_this.props,services=_this$props.services,indexPatterns=_this$props.indexPatterns,confirmModalPromise=_this$props.confirmModalPromise;_this$state2=_this.state,file=_this$state2.file,isOverwriteAllChecked=_this$state2.isOverwriteAllChecked;_this.setState({status:"loading",error:undefined});(0,_lib.logLegacyImport)();_context6.prev=4;_context6.next=7;return regeneratorRuntime.awrap((0,_lib.importLegacyFile)(file));case 7:contents=_context6.sent;_context6.next=14;break;case 10:_context6.prev=10;_context6.t0=_context6["catch"](4);_this.setState({status:"error",error:_i18n.i18n.translate("kbn.management.objects.objectsTable.flyout.importLegacyFileErrorMessage",{defaultMessage:"The file could not be processed."})});return _context6.abrupt("return");case 14:if(Array.isArray(contents)){_context6.next=17;break}_this.setState({status:"error",error:_i18n.i18n.translate("kbn.management.objects.objectsTable.flyout.invalidFormatOfImportedFileErrorMessage",{defaultMessage:"Saved objects file format is invalid and cannot be imported."})});return _context6.abrupt("return");case 17:contents=contents.filter((function(content){return _objects_table.POSSIBLE_TYPES.includes(content._type)})).map((function(doc){return _objectSpread({},doc,{_migrationVersion:doc._migrationVersion||{}})}));_context6.next=20;return regeneratorRuntime.awrap((0,_resolve_saved_objects.resolveSavedObjects)(contents,isOverwriteAllChecked,services,indexPatterns,confirmModalPromise));case 20:_ref3=_context6.sent;conflictedIndexPatterns=_ref3.conflictedIndexPatterns;conflictedSavedObjectsLinkedToSavedSearches=_ref3.conflictedSavedObjectsLinkedToSavedSearches;conflictedSearchDocs=_ref3.conflictedSearchDocs;importedObjectCount=_ref3.importedObjectCount;failedImports=_ref3.failedImports;byId={};conflictedIndexPatterns.map((function(_ref4){var doc=_ref4.doc,obj=_ref4.obj;return{doc:doc,obj:obj._serialize()}})).forEach((function(_ref5){var doc=_ref5.doc,obj=_ref5.obj;return obj.references.forEach((function(ref){byId[ref.id]=byId[ref.id]!=null?byId[ref.id].concat({doc:doc,obj:obj}):[{doc:doc,obj:obj}]}))}));unmatchedReferences=Object.entries(byId).reduce((function(accum,_ref6){var _ref7=_slicedToArray(_ref6,2),existingIndexPatternId=_ref7[0],list=_ref7[1];accum.push({existingIndexPatternId:existingIndexPatternId,newIndexPatternId:undefined,list:list.map((function(_ref8){var doc=_ref8.doc;return{id:existingIndexPatternId,type:doc._type,title:doc._source.title}}))});return accum}),[]);_this.setState({conflictedIndexPatterns:conflictedIndexPatterns,conflictedSavedObjectsLinkedToSavedSearches:conflictedSavedObjectsLinkedToSavedSearches,conflictedSearchDocs:conflictedSearchDocs,failedImports:failedImports,unmatchedReferences:unmatchedReferences,importCount:importedObjectCount,status:unmatchedReferences.length===0?"success":"idle"});case 30:case"end":return _context6.stop()}}}),null,null,[[4,10]])}));_defineProperty(_assertThisInitialized(_this),"confirmLegacyImport",(function _callee6(){var _this$state3,conflictedIndexPatterns,isOverwriteAllChecked,conflictedSavedObjectsLinkedToSavedSearches,conflictedSearchDocs,failedImports,_this$props2,services,indexPatterns,importCount,_resolutions;return regeneratorRuntime.async((function _callee6$(_context7){while(1){switch(_context7.prev=_context7.next){case 0:_this$state3=_this.state,conflictedIndexPatterns=_this$state3.conflictedIndexPatterns,isOverwriteAllChecked=_this$state3.isOverwriteAllChecked,conflictedSavedObjectsLinkedToSavedSearches=_this$state3.conflictedSavedObjectsLinkedToSavedSearches,conflictedSearchDocs=_this$state3.conflictedSearchDocs,failedImports=_this$state3.failedImports;_this$props2=_this.props,services=_this$props2.services,indexPatterns=_this$props2.indexPatterns;_this.setState({error:undefined,status:"loading",loadingMessage:undefined});importCount=_this.state.importCount;if(!_this.hasUnmatchedReferences){_context7.next=34;break}_context7.prev=5;_resolutions=_this.resolutions;_this.setState({loadingMessage:_i18n.i18n.translate("kbn.management.objects.objectsTable.flyout.confirmLegacyImport.resolvingConflictsLoadingMessage",{defaultMessage:"Resolving conflicts"})});if(!_resolutions.length){_context7.next=13;break}_context7.t0=importCount;_context7.next=12;return regeneratorRuntime.awrap((0,_resolve_saved_objects.resolveIndexPatternConflicts)(_resolutions,conflictedIndexPatterns,isOverwriteAllChecked));case 12:importCount=_context7.t0+=_context7.sent;case 13:_this.setState({loadingMessage:_i18n.i18n.translate("kbn.management.objects.objectsTable.flyout.confirmLegacyImport.savingConflictsLoadingMessage",{defaultMessage:"Saving conflicts"})});_context7.t1=importCount;_context7.next=17;return regeneratorRuntime.awrap((0,_resolve_saved_objects.saveObjects)(conflictedSavedObjectsLinkedToSavedSearches,isOverwriteAllChecked));case 17:importCount=_context7.t1+=_context7.sent;_this.setState({loadingMessage:_i18n.i18n.translate("kbn.management.objects.objectsTable.flyout.confirmLegacyImport.savedSearchAreLinkedProperlyLoadingMessage",{defaultMessage:"Ensure saved searches are linked properly"})});_context7.t2=importCount;_context7.next=22;return regeneratorRuntime.awrap((0,_resolve_saved_objects.resolveSavedSearches)(conflictedSearchDocs,services,indexPatterns,isOverwriteAllChecked));case 22:importCount=_context7.t2+=_context7.sent;_this.setState({loadingMessage:_i18n.i18n.translate("kbn.management.objects.objectsTable.flyout.confirmLegacyImport.retryingFailedObjectsLoadingMessage",{defaultMessage:"Retrying failed objects"})});_context7.t3=importCount;_context7.next=27;return regeneratorRuntime.awrap((0,_resolve_saved_objects.saveObjects)(failedImports.map((function(_ref9){var obj=_ref9.obj;return obj})),isOverwriteAllChecked));case 27:importCount=_context7.t3+=_context7.sent;_context7.next=34;break;case 30:_context7.prev=30;_context7.t4=_context7["catch"](5);_this.setState({error:_context7.t4.message,status:"error",loadingMessage:undefined});return _context7.abrupt("return");case 34:_this.setState({status:"success",importCount:importCount});case 35:case"end":return _context7.stop()}}}),null,null,[[5,30]])}));_defineProperty(_assertThisInitialized(_this),"onIndexChanged",(function(id,e){var value=e.target.value;_this.setState((function(state){var conflictIndex=state.unmatchedReferences.findIndex((function(conflict){return conflict.existingIndexPatternId===id}));if(conflictIndex===-1){return state}return{unmatchedReferences:[].concat(_toConsumableArray(state.unmatchedReferences.slice(0,conflictIndex)),[_objectSpread({},state.unmatchedReferences[conflictIndex],{newIndexPatternId:value})],_toConsumableArray(state.unmatchedReferences.slice(conflictIndex+1)))}}))}));_this.state={conflictedIndexPatterns:undefined,conflictedSavedObjectsLinkedToSavedSearches:undefined,conflictedSearchDocs:undefined,unmatchedReferences:undefined,conflictingRecord:undefined,error:undefined,file:undefined,importCount:0,indexPatterns:undefined,isOverwriteAllChecked:true,loadingMessage:undefined,isLegacyFile:false,status:"idle"};return _this}_createClass(Flyout,[{key:"componentDidMount",value:function componentDidMount(){this.fetchIndexPatterns()}},{key:"renderUnmatchedReferences",value:function renderUnmatchedReferences(){var _this2=this;var unmatchedReferences=this.state.unmatchedReferences;if(!unmatchedReferences){return null}var columns=[{field:"existingIndexPatternId",name:_i18n.i18n.translate("kbn.management.objects.objectsTable.flyout.renderConflicts.columnIdName",{defaultMessage:"ID"}),description:_i18n.i18n.translate("kbn.management.objects.objectsTable.flyout.renderConflicts.columnIdDescription",{defaultMessage:"ID of the index pattern"}),sortable:true},{field:"list",name:_i18n.i18n.translate("kbn.management.objects.objectsTable.flyout.renderConflicts.columnCountName",{defaultMessage:"Count"}),description:_i18n.i18n.translate("kbn.management.objects.objectsTable.flyout.renderConflicts.columnCountDescription",{defaultMessage:"How many affected objects"}),render:function render(list){return _react.default.createElement(_react.Fragment,null,list.length)}},{field:"list",name:_i18n.i18n.translate("kbn.management.objects.objectsTable.flyout.renderConflicts.columnSampleOfAffectedObjectsName",{defaultMessage:"Sample of affected objects"}),description:_i18n.i18n.translate("kbn.management.objects.objectsTable.flyout.renderConflicts.columnSampleOfAffectedObjectsDescription",{defaultMessage:"Sample of affected objects"}),render:function render(list){return _react.default.createElement("ul",{style:{listStyle:"none"}},(0,_lodash.take)(list,3).map((function(obj,key){return _react.default.createElement("li",{key:key},obj.title)})))}},{field:"existingIndexPatternId",name:_i18n.i18n.translate("kbn.management.objects.objectsTable.flyout.renderConflicts.columnNewIndexPatternName",{defaultMessage:"New index pattern"}),render:function render(id){var options=_this2.state.indexPatterns.map((function(indexPattern){return _defineProperty({text:indexPattern.title,value:indexPattern.id},"data-test-subj","indexPatternOption-".concat(indexPattern.title))}));options.unshift({text:"-- Skip Import --",value:""});return _react.default.createElement(_eui.EuiSelect,{"data-test-subj":"managementChangeIndexSelection-".concat(id),onChange:function onChange(e){return _this2.onIndexChanged(id,e)},options:options})}}];var pagination={pageSizeOptions:[5,10,25]};return _react.default.createElement(_eui.EuiInMemoryTable,{items:unmatchedReferences,columns:columns,pagination:pagination})}},{key:"renderError",value:function renderError(){var _this$state4=this.state,error=_this$state4.error,status=_this$state4.status;if(status!=="error"){return null}return _react.default.createElement(_react.Fragment,null,_react.default.createElement(_eui.EuiCallOut,{title:_react.default.createElement(_react2.FormattedMessage,{id:"kbn.management.objects.objectsTable.flyout.errorCalloutTitle",defaultMessage:"Sorry, there was an error"}),color:"danger"},_react.default.createElement("p",null,error)),_react.default.createElement(_eui.EuiSpacer,{size:"s"}))}},{key:"renderBody",value:function renderBody(){var _this$state5=this.state,status=_this$state5.status,loadingMessage=_this$state5.loadingMessage,isOverwriteAllChecked=_this$state5.isOverwriteAllChecked,importCount=_this$state5.importCount,_this$state5$failedIm=_this$state5.failedImports,failedImports=_this$state5$failedIm===void 0?[]:_this$state5$failedIm,isLegacyFile=_this$state5.isLegacyFile;if(status==="loading"){return _react.default.createElement(_eui.EuiFlexGroup,{justifyContent:"spaceAround"},_react.default.createElement(_eui.EuiFlexItem,{grow:false},_react.default.createElement(_eui.EuiLoadingKibana,{size:"xl"}),_react.default.createElement(_eui.EuiSpacer,{size:"m"}),_react.default.createElement(_eui.EuiText,null,_react.default.createElement("p",null,loadingMessage))))}if(failedImports.length&&(!this.hasUnmatchedReferences||isLegacyFile===false&&status==="success")){return _react.default.createElement(_eui.EuiCallOut,{"data-test-subj":"importSavedObjectsFailedWarning",title:_react.default.createElement(_react2.FormattedMessage,{id:"kbn.management.objects.objectsTable.flyout.importFailedTitle",defaultMessage:"Import failed"}),color:"warning",iconType:"help"},_react.default.createElement("p",null,_react.default.createElement(_react2.FormattedMessage,{id:"kbn.management.objects.objectsTable.flyout.importFailedDescription",defaultMessage:"Failed to import {failedImportCount} of {totalImportCount} objects. Import failed",values:{failedImportCount:failedImports.length,totalImportCount:importCount+failedImports.length}})),_react.default.createElement("p",null,failedImports.map((function(_ref11){var error=_ref11.error,obj=_ref11.obj;if(error.type==="missing_references"){return error.references.map((function(reference){return _i18n.i18n.translate("kbn.management.objects.objectsTable.flyout.importFailedMissingReference",{defaultMessage:"{type} [id={id}] could not locate {refType} [id={refId}]",values:{id:obj.id,type:obj.type,refId:reference.id,refType:reference.type}})}))}else if(error.type==="unsupported_type"){return _i18n.i18n.translate("kbn.management.objects.objectsTable.flyout.importFailedUnsupportedType",{defaultMessage:"{type} [id={id}] unsupported type",values:{id:obj.id,type:obj.type}})}return(0,_lodash.get)(error,"body.message",error.message||"")})).join(" ")))}if(status==="success"){if(importCount===0){return _react.default.createElement(_eui.EuiCallOut,{"data-test-subj":"importSavedObjectsSuccessNoneImported",title:_react.default.createElement(_react2.FormattedMessage,{id:"kbn.management.objects.objectsTable.flyout.importSuccessfulCallout.noObjectsImportedTitle",defaultMessage:"No objects imported"}),color:"primary"})}return _react.default.createElement(_eui.EuiCallOut,{"data-test-subj":"importSavedObjectsSuccess",title:_react.default.createElement(_react2.FormattedMessage,{id:"kbn.management.objects.objectsTable.flyout.importSuccessfulTitle",defaultMessage:"Import successful"}),color:"success",iconType:"check"},_react.default.createElement("p",null,_react.default.createElement(_react2.FormattedMessage,{id:"kbn.management.objects.objectsTable.flyout.importSuccessfulDescription",defaultMessage:"Successfully imported {importCount} objects.",values:{importCount:importCount}})))}if(this.hasUnmatchedReferences){return this.renderUnmatchedReferences()}return _react.default.createElement(_eui.EuiForm,null,_react.default.createElement(_eui.EuiFormRow,{label:_react.default.createElement(_react2.FormattedMessage,{id:"kbn.management.objects.objectsTable.flyout.selectFileToImportFormRowLabel",defaultMessage:"Please select a file to import"})},_react.default.createElement(_eui.EuiFilePicker,{initialPromptText:_react.default.createElement(_react2.FormattedMessage,{id:"kbn.management.objects.objectsTable.flyout.importPromptText",defaultMessage:"Import"}),onChange:this.setImportFile})),_react.default.createElement(_eui.EuiFormRow,null,_react.default.createElement(_eui.EuiSwitch,{name:"overwriteAll",label:_react.default.createElement(_react2.FormattedMessage,{id:"kbn.management.objects.objectsTable.flyout.overwriteSavedObjectsLabel",defaultMessage:"Automatically overwrite all saved objects?"}),"data-test-subj":"importSavedObjectsOverwriteToggle",checked:isOverwriteAllChecked,onChange:this.changeOverwriteAll})))}},{key:"renderFooter",value:function renderFooter(){var status=this.state.status;var _this$props3=this.props,done=_this$props3.done,close=_this$props3.close;var confirmButton;if(status==="success"){confirmButton=_react.default.createElement(_eui.EuiButton,{onClick:done,size:"s",fill:true,"data-test-subj":"importSavedObjectsDoneBtn"},_react.default.createElement(_react2.FormattedMessage,{id:"kbn.management.objects.objectsTable.flyout.importSuccessful.confirmButtonLabel",defaultMessage:"Done"}))}else if(this.hasUnmatchedReferences){confirmButton=_react.default.createElement(_eui.EuiButton,{onClick:this.state.isLegacyFile?this.confirmLegacyImport:this.resolveImportErrors,size:"s",fill:true,isLoading:status==="loading","data-test-subj":"importSavedObjectsConfirmBtn"},_react.default.createElement(_react2.FormattedMessage,{id:"kbn.management.objects.objectsTable.flyout.importSuccessful.confirmAllChangesButtonLabel",defaultMessage:"Confirm all changes"}))}else{confirmButton=_react.default.createElement(_eui.EuiButton,{onClick:this.state.isLegacyFile?this.legacyImport:this.import,size:"s",fill:true,isLoading:status==="loading","data-test-subj":"importSavedObjectsImportBtn"},_react.default.createElement(_react2.FormattedMessage,{id:"kbn.management.objects.objectsTable.flyout.import.confirmButtonLabel",defaultMessage:"Import"}))}return _react.default.createElement(_eui.EuiFlexGroup,{justifyContent:"spaceBetween"},_react.default.createElement(_eui.EuiFlexItem,{grow:false},_react.default.createElement(_eui.EuiButtonEmpty,{onClick:close,size:"s"},_react.default.createElement(_react2.FormattedMessage,{id:"kbn.management.objects.objectsTable.flyout.import.cancelButtonLabel",defaultMessage:"Cancel"}))),_react.default.createElement(_eui.EuiFlexItem,{grow:false},confirmButton))}},{key:"renderSubheader",value:function renderSubheader(){if(this.state.status==="loading"||this.state.status==="success"){return null}var legacyFileWarning;if(this.state.isLegacyFile){legacyFileWarning=_react.default.createElement(_eui.EuiCallOut,{"data-test-subj":"importSavedObjectsLegacyWarning",title:_react.default.createElement(_react2.FormattedMessage,{id:"kbn.management.objects.objectsTable.flyout.legacyFileUsedTitle",defaultMessage:"Support for JSON files is going away"}),color:"warning",iconType:"help"},_react.default.createElement("p",null,_react.default.createElement(_react2.FormattedMessage,{id:"kbn.management.objects.objectsTable.flyout.legacyFileUsedBody",defaultMessage:"Use our updated export to generate NDJSON files, and you'll be all set."})))}var indexPatternConflictsWarning;if(this.hasUnmatchedReferences){indexPatternConflictsWarning=_react.default.createElement(_eui.EuiCallOut,{"data-test-subj":"importSavedObjectsConflictsWarning",title:_react.default.createElement(_react2.FormattedMessage,{id:"kbn.management.objects.objectsTable.flyout.indexPatternConflictsTitle",defaultMessage:"Index Pattern Conflicts"}),color:"warning",iconType:"help"},_react.default.createElement("p",null,_react.default.createElement(_react2.FormattedMessage,{id:"kbn.management.objects.objectsTable.flyout.indexPatternConflictsDescription",defaultMessage:"The following saved objects use index patterns that do not exist. Please select the index patterns you'd like re-associated with them. You can {indexPatternLink} if necessary.",values:{indexPatternLink:_react.default.createElement(_eui.EuiLink,{href:this.props.newIndexPatternUrl},_react.default.createElement(_react2.FormattedMessage,{id:"kbn.management.objects.objectsTable.flyout.indexPatternConflictsCalloutLinkText",defaultMessage:"create a new index pattern"}))}})))}if(!legacyFileWarning&&!indexPatternConflictsWarning){return null}return _react.default.createElement(_react.Fragment,null,legacyFileWarning&&_react.default.createElement("span",null,_react.default.createElement(_eui.EuiSpacer,{size:"s"}),legacyFileWarning),indexPatternConflictsWarning&&_react.default.createElement("span",null,_react.default.createElement(_eui.EuiSpacer,{size:"s"}),indexPatternConflictsWarning))}},{key:"overwriteConfirmed",value:function overwriteConfirmed(){this.state.conflictingRecord.done(true)}},{key:"overwriteSkipped",value:function overwriteSkipped(){this.state.conflictingRecord.done(false)}},{key:"render",value:function render(){var close=this.props.close;var confirmOverwriteModal;if(this.state.conflictingRecord){confirmOverwriteModal=_react.default.createElement(_eui.EuiOverlayMask,null,_react.default.createElement(_eui.EuiConfirmModal,{title:_i18n.i18n.translate("kbn.management.objects.objectsTable.flyout.confirmOverwriteTitle",{defaultMessage:"Overwrite {type}?",values:{type:this.state.conflictingRecord.type}}),cancelButtonText:_i18n.i18n.translate("kbn.management.objects.objectsTable.flyout.confirmOverwriteCancelButtonText",{defaultMessage:"Cancel"}),confirmButtonText:_i18n.i18n.translate("kbn.management.objects.objectsTable.flyout.confirmOverwriteOverwriteButtonText",{defaultMessage:"Overwrite"}),buttonColor:"danger",onCancel:this.overwriteSkipped.bind(this),onConfirm:this.overwriteConfirmed.bind(this),defaultFocusedButton:_eui.EUI_MODAL_CONFIRM_BUTTON},_react.default.createElement("p",null,_react.default.createElement(_react2.FormattedMessage,{id:"kbn.management.objects.objectsTable.flyout.confirmOverwriteBody",defaultMessage:"Are you sure you want to overwrite {title}?",values:{title:this.state.conflictingRecord.title||(0,_lib.getDefaultTitle)(this.state.conflictingRecord)}}))))}return _react.default.createElement(_eui.EuiFlyout,{onClose:close,size:"s"},_react.default.createElement(_eui.EuiFlyoutHeader,{hasBorder:true},_react.default.createElement(_eui.EuiTitle,{size:"m"},_react.default.createElement("h2",null,_react.default.createElement(_react2.FormattedMessage,{id:"kbn.management.objects.objectsTable.flyout.importSavedObjectTitle",defaultMessage:"Import saved objects"})))),_react.default.createElement(_eui.EuiFlyoutBody,null,this.renderSubheader(),this.renderError(),this.renderBody()),_react.default.createElement(_eui.EuiFlyoutFooter,null,this.renderFooter()),confirmOverwriteModal)}},{key:"hasUnmatchedReferences",get:function get(){return this.state.unmatchedReferences&&this.state.unmatchedReferences.length>0}},{key:"resolutions",get:function get(){return this.state.unmatchedReferences.reduce((function(accum,_ref12){var existingIndexPatternId=_ref12.existingIndexPatternId,newIndexPatternId=_ref12.newIndexPatternId;if(newIndexPatternId){accum.push({oldId:existingIndexPatternId,newId:newIndexPatternId})}return accum}),[])}}]);return Flyout}(_react.Component);exports.Flyout=Flyout;_defineProperty(Flyout,"propTypes",{close:_propTypes.default.func.isRequired,done:_propTypes.default.func.isRequired,services:_propTypes.default.array.isRequired,newIndexPatternUrl:_propTypes.default.string.isRequired,indexPatterns:_propTypes.default.object.isRequired,confirmModalPromise:_propTypes.default.func.isRequired})},1924:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.fetchExportByTypeAndSearch=fetchExportByTypeAndSearch;var _kfetch=__webpack_require__(67);function fetchExportByTypeAndSearch(types,search){var includeReferencesDeep,_args=arguments;return regeneratorRuntime.async((function fetchExportByTypeAndSearch$(_context){while(1){switch(_context.prev=_context.next){case 0:includeReferencesDeep=_args.length>2&&_args[2]!==undefined?_args[2]:false;_context.next=3;return regeneratorRuntime.awrap((0,_kfetch.kfetch)({method:"POST",pathname:"/api/saved_objects/_export",body:JSON.stringify({type:types,search:search,includeReferencesDeep:includeReferencesDeep})}));case 3:return _context.abrupt("return",_context.sent);case 4:case"end":return _context.stop()}}}))}},1925:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.fetchExportObjects=fetchExportObjects;var _kfetch=__webpack_require__(67);function fetchExportObjects(objects){var includeReferencesDeep,_args=arguments;return regeneratorRuntime.async((function fetchExportObjects$(_context){while(1){switch(_context.prev=_context.next){case 0:includeReferencesDeep=_args.length>1&&_args[1]!==undefined?_args[1]:false;_context.next=3;return regeneratorRuntime.awrap((0,_kfetch.kfetch)({method:"POST",pathname:"/api/saved_objects/_export",body:JSON.stringify({objects:objects,includeReferencesDeep:includeReferencesDeep})}));case 3:return _context.abrupt("return",_context.sent);case 4:case"end":return _context.stop()}}}))}},1926:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.getRelationships=getRelationships;var _lodash=__webpack_require__(2);function getRelationships(type,id,savedObjectTypes,$http,basePath){var url,options,response,respBody,err;return regeneratorRuntime.async((function getRelationships$(_context){while(1){switch(_context.prev=_context.next){case 0:url="".concat(basePath,"/api/kibana/management/saved_objects/relationships/").concat(encodeURIComponent(type),"/").concat(encodeURIComponent(id));options={method:"GET",url:url,params:{savedObjectTypes:savedObjectTypes}};_context.prev=2;_context.next=5;return regeneratorRuntime.awrap($http(options));case 5:response=_context.sent;return _context.abrupt("return",response?response.data:undefined);case 9:_context.prev=9;_context.t0=_context["catch"](2);respBody=(0,_lodash.get)(_context.t0,"data",{});err=new Error(respBody.message||respBody.error||"".concat(_context.t0.status," Response"));err.statusCode=respBody.statusCode||_context.t0.status;err.body=respBody;throw err;case 16:case"end":return _context.stop()}}}),null,null,[[2,9]])}},1927:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.getSavedObjectCounts=getSavedObjectCounts;var _chrome=_interopRequireDefault(__webpack_require__(10));function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var apiBase=_chrome.default.addBasePath("/api/kibana/management/saved_objects/scroll");function getSavedObjectCounts($http,typesToInclude,searchString){var results;return regeneratorRuntime.async((function getSavedObjectCounts$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return regeneratorRuntime.awrap($http.post("".concat(apiBase,"/counts"),{typesToInclude:typesToInclude,searchString:searchString}));case 2:results=_context.sent;return _context.abrupt("return",results.data);case 4:case"end":return _context.stop()}}}))}},1928:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.getSavedObjectLabel=getSavedObjectLabel;function getSavedObjectLabel(type){switch(type){case"index-pattern":case"index-patterns":case"indexPatterns":return"index patterns";default:return type}}},1929:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.importFile=importFile;var _kfetch=__webpack_require__(67);function importFile(file){var overwriteAll,formData,_args=arguments;return regeneratorRuntime.async((function importFile$(_context){while(1){switch(_context.prev=_context.next){case 0:overwriteAll=_args.length>1&&_args[1]!==undefined?_args[1]:false;formData=new FormData;formData.append("file",file);_context.next=5;return regeneratorRuntime.awrap((0,_kfetch.kfetch)({method:"POST",pathname:"/api/saved_objects/_import",body:formData,headers:{"Content-Type":undefined},query:{overwrite:overwriteAll}}));case 5:return _context.abrupt("return",_context.sent);case 6:case"end":return _context.stop()}}}))}},1930:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.importLegacyFile=importLegacyFile;function importLegacyFile(file){var FileReader,_args=arguments;return regeneratorRuntime.async((function importLegacyFile$(_context){while(1){switch(_context.prev=_context.next){case 0:FileReader=_args.length>1&&_args[1]!==undefined?_args[1]:window.FileReader;return _context.abrupt("return",new Promise((function(resolve,reject){var fr=new FileReader;fr.onload=function(_ref){var result=_ref.target.result;try{resolve(JSON.parse(result))}catch(e){reject(e)}};fr.readAsText(file)})));case 2:case"end":return _context.stop()}}}))}},1931:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.parseQuery=parseQuery;function parseQuery(query){var queryText=undefined;var visibleTypes=undefined;if(query){if(query.ast.getTermClauses().length){queryText=query.ast.getTermClauses().map((function(clause){return clause.value})).join(" ")}if(query.ast.getFieldClauses("type")){visibleTypes=query.ast.getFieldClauses("type")[0].value}}return{queryText:queryText,visibleTypes:visibleTypes}}},1932:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.resolveImportErrors=resolveImportErrors;var _kfetch=__webpack_require__(67);function _objectWithoutProperties(source,excluded){if(source==null)return{};var target=_objectWithoutPropertiesLoose(source,excluded);var key,i;if(Object.getOwnPropertySymbols){var sourceSymbolKeys=Object.getOwnPropertySymbols(source);for(i=0;i<sourceSymbolKeys.length;i++){key=sourceSymbolKeys[i];if(excluded.indexOf(key)>=0)continue;if(!Object.prototype.propertyIsEnumerable.call(source,key))continue;target[key]=source[key]}}return target}function _objectWithoutPropertiesLoose(source,excluded){if(source==null)return{};var target={};var sourceKeys=Object.keys(source);var key,i;for(i=0;i<sourceKeys.length;i++){key=sourceKeys[i];if(excluded.indexOf(key)>=0)continue;target[key]=source[key]}return target}function callResolveImportErrorsApi(file,retries){var formData;return regeneratorRuntime.async((function callResolveImportErrorsApi$(_context){while(1){switch(_context.prev=_context.next){case 0:formData=new FormData;formData.append("file",file);formData.append("retries",JSON.stringify(retries));_context.next=5;return regeneratorRuntime.awrap((0,_kfetch.kfetch)({method:"POST",pathname:"/api/saved_objects/_resolve_import_errors",headers:{"Content-Type":undefined},body:formData}));case 5:return _context.abrupt("return",_context.sent);case 6:case"end":return _context.stop()}}}))}function mapImportFailureToRetryObject(_ref){var failure=_ref.failure,overwriteDecisionCache=_ref.overwriteDecisionCache,replaceReferencesCache=_ref.replaceReferencesCache,state=_ref.state;var isOverwriteAllChecked=state.isOverwriteAllChecked,unmatchedReferences=state.unmatchedReferences;var isOverwriteGranted=isOverwriteAllChecked||overwriteDecisionCache.get("".concat(failure.obj.type,":").concat(failure.obj.id))===true;if(!isOverwriteGranted&&failure.error.type==="conflict"){return}if(failure.error.type==="missing_references"){var objReplaceReferences=replaceReferencesCache.get("".concat(failure.obj.type,":").concat(failure.obj.id))||[];var indexPatternRefs=failure.error.references.filter((function(obj){return obj.type==="index-pattern"}));var _iteratorNormalCompletion=true;var _didIteratorError=false;var _iteratorError=undefined;try{for(var _iterator=indexPatternRefs[Symbol.iterator](),_step;!(_iteratorNormalCompletion=(_step=_iterator.next()).done);_iteratorNormalCompletion=true){var reference=_step.value;var _iteratorNormalCompletion2=true;var _didIteratorError2=false;var _iteratorError2=undefined;try{for(var _iterator2=unmatchedReferences[Symbol.iterator](),_step2;!(_iteratorNormalCompletion2=(_step2=_iterator2.next()).done);_iteratorNormalCompletion2=true){var unmatchedReference=_step2.value;var hasNewValue=!!unmatchedReference.newIndexPatternId;var matchesIndexPatternId=unmatchedReference.existingIndexPatternId===reference.id;if(!hasNewValue||!matchesIndexPatternId){continue}objReplaceReferences.push({type:"index-pattern",from:unmatchedReference.existingIndexPatternId,to:unmatchedReference.newIndexPatternId})}}catch(err){_didIteratorError2=true;_iteratorError2=err}finally{try{if(!_iteratorNormalCompletion2&&_iterator2.return!=null){_iterator2.return()}}finally{if(_didIteratorError2){throw _iteratorError2}}}}}catch(err){_didIteratorError=true;_iteratorError=err}finally{try{if(!_iteratorNormalCompletion&&_iterator.return!=null){_iterator.return()}}finally{if(_didIteratorError){throw _iteratorError}}}replaceReferencesCache.set("".concat(failure.obj.type,":").concat(failure.obj.id),objReplaceReferences);if(objReplaceReferences.length===0){return}}return{id:failure.obj.id,type:failure.obj.type,overwrite:isOverwriteAllChecked||overwriteDecisionCache.get("".concat(failure.obj.type,":").concat(failure.obj.id))===true,replaceReferences:replaceReferencesCache.get("".concat(failure.obj.type,":").concat(failure.obj.id))||[]}}function resolveImportErrors(_ref2){var getConflictResolutions,state,overwriteDecisionCache,replaceReferencesCache,successImportCount,_state$failedImports,importFailures,file,isOverwriteAllChecked,doesntHaveOverwriteDecision,getOverwriteDecision,callMapImportFailure,isNotSkipped,result,_i,_Object$keys,key,retries,_iteratorNormalCompletion3,_didIteratorError3,_iteratorError3,_loop,_iterator3,_step3,_ret,response,_iteratorNormalCompletion4,_didIteratorError4,_iteratorError4,_iterator4,_step4,_step4$value,error,obj;return regeneratorRuntime.async((function resolveImportErrors$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:getConflictResolutions=_ref2.getConflictResolutions,state=_ref2.state;overwriteDecisionCache=new Map;replaceReferencesCache=new Map;successImportCount=state.importCount,_state$failedImports=state.failedImports,importFailures=_state$failedImports===void 0?[]:_state$failedImports;file=state.file,isOverwriteAllChecked=state.isOverwriteAllChecked;doesntHaveOverwriteDecision=function doesntHaveOverwriteDecision(_ref3){var obj=_ref3.obj;return!overwriteDecisionCache.has("".concat(obj.type,":").concat(obj.id))};getOverwriteDecision=function getOverwriteDecision(_ref4){var obj=_ref4.obj;return overwriteDecisionCache.get("".concat(obj.type,":").concat(obj.id))};callMapImportFailure=function callMapImportFailure(failure){return mapImportFailureToRetryObject({failure:failure,overwriteDecisionCache:overwriteDecisionCache,replaceReferencesCache:replaceReferencesCache,state:state})};isNotSkipped=function isNotSkipped(failure){return failure.error.type!=="conflict"&&failure.error.type!=="missing_references"||getOverwriteDecision(failure)};case 9:if(!importFailures.some((function(failure){return["conflict","missing_references"].includes(failure.error.type)}))){_context2.next=72;break}if(isOverwriteAllChecked){_context2.next=15;break}_context2.next=13;return regeneratorRuntime.awrap(getConflictResolutions(importFailures.filter((function(_ref5){var error=_ref5.error;return error.type==="conflict"})).filter(doesntHaveOverwriteDecision).map((function(_ref6){var obj=_ref6.obj;return obj}))));case 13:result=_context2.sent;for(_i=0,_Object$keys=Object.keys(result);_i<_Object$keys.length;_i++){key=_Object$keys[_i];overwriteDecisionCache.set(key,result[key])}case 15:retries=importFailures.map(callMapImportFailure).filter((function(obj){return!!obj}));_iteratorNormalCompletion3=true;_didIteratorError3=false;_iteratorError3=undefined;_context2.prev=19;_loop=function _loop(){var _step3$value=_step3.value,error=_step3$value.error,obj=_step3$value.obj;if(error.type!=="missing_references"){return"continue"}if(!retries.some((function(retryObj){return retryObj.type===obj.type&&retryObj.id===obj.id}))){return"continue"}var _iteratorNormalCompletion5=true;var _didIteratorError5=false;var _iteratorError5=undefined;try{for(var _iterator5=(error.blocking||[])[Symbol.iterator](),_step5;!(_iteratorNormalCompletion5=(_step5=_iterator5.next()).done);_iteratorNormalCompletion5=true){var _step5$value=_step5.value,type=_step5$value.type,id=_step5$value.id;retries.push({type:type,id:id})}}catch(err){_didIteratorError5=true;_iteratorError5=err}finally{try{if(!_iteratorNormalCompletion5&&_iterator5.return!=null){_iterator5.return()}}finally{if(_didIteratorError5){throw _iteratorError5}}}};_iterator3=importFailures[Symbol.iterator]();case 22:if(_iteratorNormalCompletion3=(_step3=_iterator3.next()).done){_context2.next=29;break}_ret=_loop();if(!(_ret==="continue")){_context2.next=26;break}return _context2.abrupt("continue",26);case 26:_iteratorNormalCompletion3=true;_context2.next=22;break;case 29:_context2.next=35;break;case 31:_context2.prev=31;_context2.t0=_context2["catch"](19);_didIteratorError3=true;_iteratorError3=_context2.t0;case 35:_context2.prev=35;_context2.prev=36;if(!_iteratorNormalCompletion3&&_iterator3.return!=null){_iterator3.return()}case 38:_context2.prev=38;if(!_didIteratorError3){_context2.next=41;break}throw _iteratorError3;case 41:return _context2.finish(38);case 42:return _context2.finish(35);case 43:if(!(retries.length===0)){_context2.next=46;break}importFailures=importFailures.filter(isNotSkipped);return _context2.abrupt("break",72);case 46:_context2.next=48;return regeneratorRuntime.awrap(callResolveImportErrorsApi(file,retries));case 48:response=_context2.sent;successImportCount+=response.successCount;importFailures=[];_iteratorNormalCompletion4=true;_didIteratorError4=false;_iteratorError4=undefined;_context2.prev=54;for(_iterator4=(response.errors||[])[Symbol.iterator]();!(_iteratorNormalCompletion4=(_step4=_iterator4.next()).done);_iteratorNormalCompletion4=true){_step4$value=_step4.value,error=_step4$value.error,obj=_objectWithoutProperties(_step4$value,["error"]);importFailures.push({error:error,obj:obj})}_context2.next=62;break;case 58:_context2.prev=58;_context2.t1=_context2["catch"](54);_didIteratorError4=true;_iteratorError4=_context2.t1;case 62:_context2.prev=62;_context2.prev=63;if(!_iteratorNormalCompletion4&&_iterator4.return!=null){_iterator4.return()}case 65:_context2.prev=65;if(!_didIteratorError4){_context2.next=68;break}throw _iteratorError4;case 68:return _context2.finish(65);case 69:return _context2.finish(62);case 70:_context2.next=9;break;case 72:return _context2.abrupt("return",{status:"success",importCount:successImportCount,failedImports:importFailures});case 73:case"end":return _context2.stop()}}}),null,null,[[19,31,35,43],[36,,38,42],[54,58,62,70],[63,,65,69]])}},1933:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.logLegacyImport=logLegacyImport;var _kfetch=__webpack_require__(67);function logLegacyImport(){return regeneratorRuntime.async((function logLegacyImport$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return regeneratorRuntime.awrap((0,_kfetch.kfetch)({method:"POST",pathname:"/api/saved_objects/_log_legacy_import"}));case 2:return _context.abrupt("return",_context.sent);case 3:case"end":return _context.stop()}}}))}},1934:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.getDefaultTitle=getDefaultTitle;function getDefaultTitle(object){return"".concat(object.type," [id=").concat(object.id,"]")}},1935:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.findObjects=findObjects;var _kfetch=__webpack_require__(67);var _case_conversion=__webpack_require__(1936);function findObjects(findOptions){var response;return regeneratorRuntime.async((function findObjects$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return regeneratorRuntime.awrap((0,_kfetch.kfetch)({method:"GET",pathname:"/api/kibana/management/saved_objects/_find",query:findOptions}));case 2:response=_context.sent;return _context.abrupt("return",(0,_case_conversion.keysToCamelCaseShallow)(response));case 4:case"end":return _context.stop()}}}))}},1936:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.keysToCamelCaseShallow=keysToCamelCaseShallow;var _lodash=__webpack_require__(2);function keysToCamelCaseShallow(object){return(0,_lodash.mapKeys)(object,(function(value,key){return(0,_lodash.camelCase)(key)}))}},1937:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});Object.defineProperty(exports,"Relationships",{enumerable:true,get:function get(){return _relationships.Relationships}});var _relationships=__webpack_require__(1938)},1938:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.Relationships=void 0;var _react=_interopRequireWildcard(__webpack_require__(0));var _propTypes=_interopRequireDefault(__webpack_require__(5));var _eui=__webpack_require__(3);var _chrome=_interopRequireDefault(__webpack_require__(10));var _i18n=__webpack_require__(1);var _react2=__webpack_require__(4);var _lib=__webpack_require__(175);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _interopRequireWildcard(obj){if(obj&&obj.__esModule){return obj}else{var newObj={};if(obj!=null){for(var key in obj){if(Object.prototype.hasOwnProperty.call(obj,key)){var desc=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):{};if(desc.get||desc.set){Object.defineProperty(newObj,key,desc)}else{newObj[key]=obj[key]}}}}newObj.default=obj;return newObj}}function _typeof(obj){if(typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"){_typeof=function _typeof(obj){return typeof obj}}else{_typeof=function _typeof(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj}}return _typeof(obj)}function _toConsumableArray(arr){return _arrayWithoutHoles(arr)||_iterableToArray(arr)||_nonIterableSpread()}function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance")}function _iterableToArray(iter){if(Symbol.iterator in Object(iter)||Object.prototype.toString.call(iter)==="[object Arguments]")return Array.from(iter)}function _arrayWithoutHoles(arr){if(Array.isArray(arr)){for(var i=0,arr2=new Array(arr.length);i<arr.length;i++){arr2[i]=arr[i]}return arr2}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);return Constructor}function _possibleConstructorReturn(self,call){if(call&&(_typeof(call)==="object"||typeof call==="function")){return call}return _assertThisInitialized(self)}function _assertThisInitialized(self){if(self===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return self}function _getPrototypeOf(o){_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o)};return _getPrototypeOf(o)}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function")}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:true,configurable:true}});if(superClass)_setPrototypeOf(subClass,superClass)}function _setPrototypeOf(o,p){_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(o,p){o.__proto__=p;return o};return _setPrototypeOf(o,p)}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}var Relationships=function(_Component){_inherits(Relationships,_Component);function Relationships(props){var _this;_classCallCheck(this,Relationships);_this=_possibleConstructorReturn(this,_getPrototypeOf(Relationships).call(this,props));_this.state={relationships:undefined,isLoading:false,error:undefined};return _this}_createClass(Relationships,[{key:"UNSAFE_componentWillMount",value:function UNSAFE_componentWillMount(){this.getRelationshipData()}},{key:"UNSAFE_componentWillReceiveProps",value:function UNSAFE_componentWillReceiveProps(nextProps){if(nextProps.savedObject.id!==this.props.savedObject.id){this.getRelationshipData()}}},{key:"getRelationshipData",value:function getRelationshipData(){var _this$props,savedObject,getRelationships,relationships;return regeneratorRuntime.async((function getRelationshipData$(_context){while(1){switch(_context.prev=_context.next){case 0:_this$props=this.props,savedObject=_this$props.savedObject,getRelationships=_this$props.getRelationships;this.setState({isLoading:true});_context.prev=2;_context.next=5;return regeneratorRuntime.awrap(getRelationships(savedObject.type,savedObject.id));case 5:relationships=_context.sent;this.setState({relationships:relationships,isLoading:false,error:undefined});_context.next=12;break;case 9:_context.prev=9;_context.t0=_context["catch"](2);this.setState({error:_context.t0.message,isLoading:false});case 12:case"end":return _context.stop()}}}),null,this,[[2,9]])}},{key:"renderError",value:function renderError(){var error=this.state.error;if(!error){return null}return _react.default.createElement(_eui.EuiCallOut,{title:_react.default.createElement(_react2.FormattedMessage,{id:"kbn.management.objects.objectsTable.relationships.renderErrorMessage",defaultMessage:"Error"}),color:"danger"},error)}},{key:"renderRelationships",value:function renderRelationships(){var _this2=this;var _this$props2=this.props,goInspectObject=_this$props2.goInspectObject,savedObject=_this$props2.savedObject;var _this$state=this.state,relationships=_this$state.relationships,isLoading=_this$state.isLoading,error=_this$state.error;if(error){return this.renderError()}if(isLoading){return _react.default.createElement(_eui.EuiLoadingKibana,{size:"xl"})}var columns=[{field:"type",name:_i18n.i18n.translate("kbn.management.objects.objectsTable.relationships.columnTypeName",{defaultMessage:"Type"}),width:"50px",align:"center",description:_i18n.i18n.translate("kbn.management.objects.objectsTable.relationships.columnTypeDescription",{defaultMessage:"Type of the saved object"}),sortable:false,render:function render(type,object){return _react.default.createElement(_eui.EuiToolTip,{position:"top",content:(0,_lib.getSavedObjectLabel)(type)},_react.default.createElement(_eui.EuiIcon,{"aria-label":(0,_lib.getSavedObjectLabel)(type),type:object.meta.icon||"apps",size:"s"}))}},{field:"relationship",name:_i18n.i18n.translate("kbn.management.objects.objectsTable.relationships.columnRelationshipName",{defaultMessage:"Direct relationship"}),dataType:"string",sortable:false,width:"125px",render:function render(relationship){if(relationship==="parent"){return _react.default.createElement(_eui.EuiText,{size:"s"},_react.default.createElement(_react2.FormattedMessage,{id:"kbn.management.objects.objectsTable.relationships.columnRelationship.parentAsValue",defaultMessage:"Parent"}))}if(relationship==="child"){return _react.default.createElement(_eui.EuiText,{size:"s"},_react.default.createElement(_react2.FormattedMessage,{id:"kbn.management.objects.objectsTable.relationships.columnRelationship.childAsValue",defaultMessage:"Child"}))}}},{field:"meta.title",name:_i18n.i18n.translate("kbn.management.objects.objectsTable.relationships.columnTitleName",{defaultMessage:"Title"}),description:_i18n.i18n.translate("kbn.management.objects.objectsTable.relationships.columnTitleDescription",{defaultMessage:"Title of the saved object"}),dataType:"string",sortable:false,render:function render(title,object){var _ref=object.meta.inAppUrl||{},path=_ref.path;var canGoInApp=_this2.props.canGoInApp(object);if(!canGoInApp){return _react.default.createElement(_eui.EuiText,{size:"s"},title||(0,_lib.getDefaultTitle)(object))}return _react.default.createElement(_eui.EuiLink,{href:_chrome.default.addBasePath(path)},title||(0,_lib.getDefaultTitle)(object))}},{name:_i18n.i18n.translate("kbn.management.objects.objectsTable.relationships.columnActionsName",{defaultMessage:"Actions"}),actions:[{name:_i18n.i18n.translate("kbn.management.objects.objectsTable.relationships.columnActions.inspectActionName",{defaultMessage:"Inspect"}),description:_i18n.i18n.translate("kbn.management.objects.objectsTable.relationships.columnActions.inspectActionDescription",{defaultMessage:"Inspect this saved object"}),type:"icon",icon:"inspect",onClick:function onClick(object){return goInspectObject(object)},available:function available(object){return!!object.meta.editUrl}}]}];var filterTypesMap=new Map(relationships.map((function(relationship){return[relationship.type,{value:relationship.type,name:relationship.type,view:relationship.type}]})));var search={filters:[{type:"field_value_selection",field:"relationship",name:_i18n.i18n.translate("kbn.management.objects.objectsTable.relationships.search.filters.relationship.name",{defaultMessage:"Direct relationship"}),multiSelect:"or",options:[{value:"parent",name:"parent",view:_i18n.i18n.translate("kbn.management.objects.objectsTable.relationships.search.filters.relationship.parentAsValue.view",{defaultMessage:"Parent"})},{value:"child",name:"child",view:_i18n.i18n.translate("kbn.management.objects.objectsTable.relationships.search.filters.relationship.childAsValue.view",{defaultMessage:"Child"})}]},{type:"field_value_selection",field:"type",name:_i18n.i18n.translate("kbn.management.objects.objectsTable.relationships.search.filters.type.name",{defaultMessage:"Type"}),multiSelect:"or",options:_toConsumableArray(filterTypesMap.values())}]};return _react.default.createElement("div",null,_react.default.createElement(_eui.EuiCallOut,null,_react.default.createElement("p",null,_i18n.i18n.translate("kbn.management.objects.objectsTable.relationships.relationshipsTitle",{defaultMessage:"Here are the saved objects related to {title}. "+"Deleting this {type} affects its parent objects, but not its children.",values:{type:savedObject.type,title:savedObject.meta.title||(0,_lib.getDefaultTitle)(savedObject)}}))),_react.default.createElement(_eui.EuiSpacer,null),_react.default.createElement(_eui.EuiInMemoryTable,{items:relationships,columns:columns,pagination:true,search:search}))}},{key:"render",value:function render(){var _this$props3=this.props,close=_this$props3.close,savedObject=_this$props3.savedObject;return _react.default.createElement(_eui.EuiFlyout,{onClose:close},_react.default.createElement(_eui.EuiFlyoutHeader,{hasBorder:true},_react.default.createElement(_eui.EuiTitle,{size:"m"},_react.default.createElement("h2",null,_react.default.createElement(_eui.EuiToolTip,{position:"top",content:(0,_lib.getSavedObjectLabel)(savedObject.type)},_react.default.createElement(_eui.EuiIcon,{"aria-label":(0,_lib.getSavedObjectLabel)(savedObject.type),size:"m",type:savedObject.meta.icon||"apps"})),"",savedObject.meta.title||(0,_lib.getDefaultTitle)(savedObject)))),_react.default.createElement(_eui.EuiFlyoutBody,null,this.renderRelationships()))}}]);return Relationships}(_react.Component);exports.Relationships=Relationships;_defineProperty(Relationships,"propTypes",{getRelationships:_propTypes.default.func.isRequired,savedObject:_propTypes.default.object.isRequired,close:_propTypes.default.func.isRequired,goInspectObject:_propTypes.default.func.isRequired,canGoInApp:_propTypes.default.func.isRequired})},1939:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});Object.defineProperty(exports,"Table",{enumerable:true,get:function get(){return _table.Table}});var _table=__webpack_require__(1940)},1940:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.Table=void 0;var _chrome=_interopRequireDefault(__webpack_require__(10));var _legacy=__webpack_require__(176);var _react=_interopRequireWildcard(__webpack_require__(0));var _propTypes=_interopRequireDefault(__webpack_require__(5));var _eui=__webpack_require__(3);var _lib=__webpack_require__(175);var _i18n=__webpack_require__(1);var _react2=__webpack_require__(4);function _interopRequireWildcard(obj){if(obj&&obj.__esModule){return obj}else{var newObj={};if(obj!=null){for(var key in obj){if(Object.prototype.hasOwnProperty.call(obj,key)){var desc=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):{};if(desc.get||desc.set){Object.defineProperty(newObj,key,desc)}else{newObj[key]=obj[key]}}}}newObj.default=obj;return newObj}}function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _typeof(obj){if(typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"){_typeof=function _typeof(obj){return typeof obj}}else{_typeof=function _typeof(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj}}return _typeof(obj)}function ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);if(enumerableOnly)symbols=symbols.filter((function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable}));keys.push.apply(keys,symbols)}return keys}function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=arguments[i]!=null?arguments[i]:{};if(i%2){ownKeys(source,true).forEach((function(key){_defineProperty(target,key,source[key])}))}else if(Object.getOwnPropertyDescriptors){Object.defineProperties(target,Object.getOwnPropertyDescriptors(source))}else{ownKeys(source).forEach((function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))}))}}return target}function _toConsumableArray(arr){return _arrayWithoutHoles(arr)||_iterableToArray(arr)||_nonIterableSpread()}function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance")}function _iterableToArray(iter){if(Symbol.iterator in Object(iter)||Object.prototype.toString.call(iter)==="[object Arguments]")return Array.from(iter)}function _arrayWithoutHoles(arr){if(Array.isArray(arr)){for(var i=0,arr2=new Array(arr.length);i<arr.length;i++){arr2[i]=arr[i]}return arr2}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);return Constructor}function _possibleConstructorReturn(self,call){if(call&&(_typeof(call)==="object"||typeof call==="function")){return call}return _assertThisInitialized(self)}function _getPrototypeOf(o){_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o)};return _getPrototypeOf(o)}function _assertThisInitialized(self){if(self===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return self}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function")}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:true,configurable:true}});if(superClass)_setPrototypeOf(subClass,superClass)}function _setPrototypeOf(o,p){_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(o,p){o.__proto__=p;return o};return _setPrototypeOf(o,p)}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}var Table=function(_PureComponent){_inherits(Table,_PureComponent);function Table(props){var _this;_classCallCheck(this,Table);_this=_possibleConstructorReturn(this,_getPrototypeOf(Table).call(this,props));_defineProperty(_assertThisInitialized(_this),"state",{isSearchTextValid:true,parseErrorMessage:null,isExportPopoverOpen:false,isIncludeReferencesDeepChecked:true,activeAction:null});_defineProperty(_assertThisInitialized(_this),"onChange",(function(_ref){var query=_ref.query,error=_ref.error;if(error){_this.setState({isSearchTextValid:false,parseErrorMessage:error.message});return}_this.setState({isSearchTextValid:true,parseErrorMessage:null});_this.props.onQueryChange({query:query})}));_defineProperty(_assertThisInitialized(_this),"closeExportPopover",(function(){_this.setState({isExportPopoverOpen:false})}));_defineProperty(_assertThisInitialized(_this),"toggleExportPopoverVisibility",(function(){_this.setState((function(state){return{isExportPopoverOpen:!state.isExportPopoverOpen}}))}));_defineProperty(_assertThisInitialized(_this),"toggleIsIncludeReferencesDeepChecked",(function(){_this.setState((function(state){return{isIncludeReferencesDeepChecked:!state.isIncludeReferencesDeepChecked}}))}));_defineProperty(_assertThisInitialized(_this),"onExportClick",(function(){var onExport=_this.props.onExport;var isIncludeReferencesDeepChecked=_this.state.isIncludeReferencesDeepChecked;onExport(isIncludeReferencesDeepChecked);_this.setState({isExportPopoverOpen:false})}));_this.extraActions=_legacy.setup.savedObjects.registry.get();return _this}_createClass(Table,[{key:"render",value:function render(){var _this2=this;var _this$props=this.props,pageIndex=_this$props.pageIndex,pageSize=_this$props.pageSize,itemId=_this$props.itemId,items=_this$props.items,totalItemCount=_this$props.totalItemCount,isSearching=_this$props.isSearching,filterOptions=_this$props.filterOptions,selection=_this$props.selectionConfig,onDelete=_this$props.onDelete,selectedSavedObjects=_this$props.selectedSavedObjects,onTableChange=_this$props.onTableChange,goInspectObject=_this$props.goInspectObject,onShowRelationships=_this$props.onShowRelationships;var pagination={pageIndex:pageIndex,pageSize:pageSize,totalItemCount:totalItemCount,pageSizeOptions:[5,10,20,50]};var filters=[{type:"field_value_selection",field:"type",name:_i18n.i18n.translate("kbn.management.objects.objectsTable.table.typeFilterName",{defaultMessage:"Type"}),multiSelect:"or",options:filterOptions}];var columns=[{field:"type",name:_i18n.i18n.translate("kbn.management.objects.objectsTable.table.columnTypeName",{defaultMessage:"Type"}),width:"50px",align:"center",description:_i18n.i18n.translate("kbn.management.objects.objectsTable.table.columnTypeDescription",{defaultMessage:"Type of the saved object"}),sortable:false,render:function render(type,object){return _react.default.createElement(_eui.EuiToolTip,{position:"top",content:(0,_lib.getSavedObjectLabel)(type)},_react.default.createElement(_eui.EuiIcon,{"aria-label":(0,_lib.getSavedObjectLabel)(type),type:object.meta.icon||"apps",size:"s"}))}},{field:"meta.title",name:_i18n.i18n.translate("kbn.management.objects.objectsTable.table.columnTitleName",{defaultMessage:"Title"}),description:_i18n.i18n.translate("kbn.management.objects.objectsTable.table.columnTitleDescription",{defaultMessage:"Title of the saved object"}),dataType:"string",sortable:false,render:function render(title,object){var _ref2=object.meta.inAppUrl||{},path=_ref2.path;var canGoInApp=_this2.props.canGoInApp(object);if(!canGoInApp){return _react.default.createElement(_eui.EuiText,{size:"s"},title||(0,_lib.getDefaultTitle)(object))}return _react.default.createElement(_eui.EuiLink,{href:_chrome.default.addBasePath(path)},title||(0,_lib.getDefaultTitle)(object))}},{name:_i18n.i18n.translate("kbn.management.objects.objectsTable.table.columnActionsName",{defaultMessage:"Actions"}),actions:[{name:_i18n.i18n.translate("kbn.management.objects.objectsTable.table.columnActions.inspectActionName",{defaultMessage:"Inspect"}),description:_i18n.i18n.translate("kbn.management.objects.objectsTable.table.columnActions.inspectActionDescription",{defaultMessage:"Inspect this saved object"}),type:"icon",icon:"inspect",onClick:function onClick(object){return goInspectObject(object)},available:function available(object){return!!object.meta.editUrl}},{name:_i18n.i18n.translate("kbn.management.objects.objectsTable.table.columnActions.viewRelationshipsActionName",{defaultMessage:"Relationships"}),description:_i18n.i18n.translate("kbn.management.objects.objectsTable.table.columnActions.viewRelationshipsActionDescription",{defaultMessage:"View the relationships this saved object has to other saved objects"}),type:"icon",icon:"kqlSelector",onClick:function onClick(object){return onShowRelationships(object)}}].concat(_toConsumableArray(this.extraActions.map((function(action){return _objectSpread({},action.euiAction,{onClick:function onClick(object){_this2.setState({activeAction:action});action.registerOnFinishCallback((function(){_this2.setState({activeAction:null})}));action.euiAction.onClick(object)}})}))))}];var queryParseError;if(!this.state.isSearchTextValid){var parseErrorMsg=_i18n.i18n.translate("kbn.management.objects.objectsTable.searchBar.unableToParseQueryErrorMessage",{defaultMessage:"Unable to parse query"});queryParseError=_react.default.createElement(_eui.EuiFormErrorText,null,"".concat(parseErrorMsg,". ").concat(this.state.parseErrorMessage))}var button=_react.default.createElement(_eui.EuiButton,{iconType:"arrowDown",iconSide:"right",onClick:this.toggleExportPopoverVisibility,isDisabled:selectedSavedObjects.length===0},_react.default.createElement(_react2.FormattedMessage,{id:"kbn.management.objects.objectsTable.table.exportPopoverButtonLabel",defaultMessage:"Export"}));var activeActionContents=this.state.activeAction?this.state.activeAction.render():null;return _react.default.createElement(_react.Fragment,null,activeActionContents,_react.default.createElement(_eui.EuiSearchBar,{box:{"data-test-subj":"savedObjectSearchBar"},filters:filters,onChange:this.onChange,toolsRight:[_react.default.createElement(_eui.EuiButton,{key:"deleteSO",iconType:"trash",color:"danger",onClick:onDelete,isDisabled:selectedSavedObjects.length===0||!this.props.canDelete,title:this.props.canDelete?undefined:_i18n.i18n.translate("kbn.management.objects.objectsTable.table.deleteButtonTitle",{defaultMessage:"Unable to delete saved objects"}),"data-test-subj":"savedObjectsManagementDelete"},_react.default.createElement(_react2.FormattedMessage,{id:"kbn.management.objects.objectsTable.table.deleteButtonLabel",defaultMessage:"Delete"})),_react.default.createElement(_eui.EuiPopover,{key:"exportSOOptions",button:button,isOpen:this.state.isExportPopoverOpen,closePopover:this.closeExportPopover},_react.default.createElement(_eui.EuiFormRow,{label:_react.default.createElement(_react2.FormattedMessage,{id:"kbn.management.objects.objectsTable.exportObjectsConfirmModal.exportOptionsLabel",defaultMessage:"Options"})},_react.default.createElement(_eui.EuiSwitch,{name:"includeReferencesDeep",label:_react.default.createElement(_react2.FormattedMessage,{id:"kbn.management.objects.objectsTable.exportObjectsConfirmModal.includeReferencesDeepLabel",defaultMessage:"Include related objects"}),checked:this.state.isIncludeReferencesDeepChecked,onChange:this.toggleIsIncludeReferencesDeepChecked})),_react.default.createElement(_eui.EuiFormRow,null,_react.default.createElement(_eui.EuiButton,{key:"exportSO",iconType:"exportAction",onClick:this.onExportClick,fill:true},_react.default.createElement(_react2.FormattedMessage,{id:"kbn.management.objects.objectsTable.table.exportButtonLabel",defaultMessage:"Export"}))))]}),queryParseError,_react.default.createElement(_eui.EuiSpacer,{size:"s"}),_react.default.createElement("div",{"data-test-subj":"savedObjectsTable"},_react.default.createElement(_eui.EuiBasicTable,{loading:isSearching,itemId:itemId,items:items,columns:columns,pagination:pagination,selection:selection,onChange:onTableChange})))}}]);return Table}(_react.PureComponent);exports.Table=Table;_defineProperty(Table,"propTypes",{selectedSavedObjects:_propTypes.default.array.isRequired,selectionConfig:_propTypes.default.shape({selectable:_propTypes.default.func,selectableMessage:_propTypes.default.func,onSelectionChange:_propTypes.default.func.isRequired}).isRequired,filterOptions:_propTypes.default.array.isRequired,canDelete:_propTypes.default.bool.isRequired,onDelete:_propTypes.default.func.isRequired,onExport:_propTypes.default.func.isRequired,goInspectObject:_propTypes.default.func.isRequired,pageIndex:_propTypes.default.number.isRequired,pageSize:_propTypes.default.number.isRequired,items:_propTypes.default.array.isRequired,itemId:_propTypes.default.oneOfType([_propTypes.default.string,_propTypes.default.func]),totalItemCount:_propTypes.default.number.isRequired,onQueryChange:_propTypes.default.func.isRequired,onTableChange:_propTypes.default.func.isRequired,isSearching:_propTypes.default.bool.isRequired,onShowRelationships:_propTypes.default.func.isRequired})},1941:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});Object.defineProperty(exports,"ManagementSetup",{enumerable:true,get:function get(){return _np_ready.ManagementSetup}});Object.defineProperty(exports,"ManagementStart",{enumerable:true,get:function get(){return _np_ready.ManagementStart}});Object.defineProperty(exports,"plugin",{enumerable:true,get:function get(){return _np_ready.plugin}});Object.defineProperty(exports,"IndexPatternCreationConfig",{enumerable:true,get:function get(){return _np_ready.IndexPatternCreationConfig}});Object.defineProperty(exports,"IndexPatternListConfig",{enumerable:true,get:function get(){return _np_ready.IndexPatternListConfig}});Object.defineProperty(exports,"SavedObjectsManagementAction",{enumerable:true,get:function get(){return _np_ready.SavedObjectsManagementAction}});Object.defineProperty(exports,"SavedObjectsManagementRecord",{enumerable:true,get:function get(){return _np_ready.SavedObjectsManagementRecord}});Object.defineProperty(exports,"processImportResponse",{enumerable:true,get:function get(){return _process_import_response.processImportResponse}});Object.defineProperty(exports,"ProcessedImportResponse",{enumerable:true,get:function get(){return _process_import_response.ProcessedImportResponse}});var _np_ready=__webpack_require__(1942);var _process_import_response=__webpack_require__(267)},1942:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.plugin=plugin;Object.defineProperty(exports,"ManagementSetup",{enumerable:true,get:function get(){return _plugin.ManagementSetup}});Object.defineProperty(exports,"ManagementStart",{enumerable:true,get:function get(){return _plugin.ManagementStart}});Object.defineProperty(exports,"IndexPatternCreationConfig",{enumerable:true,get:function get(){return _index_pattern_management.IndexPatternCreationConfig}});Object.defineProperty(exports,"IndexPatternListConfig",{enumerable:true,get:function get(){return _index_pattern_management.IndexPatternListConfig}});Object.defineProperty(exports,"SavedObjectsManagementAction",{enumerable:true,get:function get(){return _saved_objects_management.SavedObjectsManagementAction}});Object.defineProperty(exports,"SavedObjectsManagementRecord",{enumerable:true,get:function get(){return _saved_objects_management.SavedObjectsManagementRecord}});var _plugin=__webpack_require__(1943);var _index_pattern_management=__webpack_require__(608);var _saved_objects_management=__webpack_require__(268);function plugin(initializerContext){return new _plugin.ManagementPlugin(initializerContext)}},1943:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.ManagementPlugin=void 0;var _services=__webpack_require__(1944);var _saved_objects_management=__webpack_require__(268);function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);return Constructor}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}var ManagementPlugin=function(){function ManagementPlugin(initializerContext){_classCallCheck(this,ManagementPlugin);_defineProperty(this,"indexPattern",new _services.IndexPatternManagementService);_defineProperty(this,"savedObjects",new _saved_objects_management.SavedObjectsManagementService)}_createClass(ManagementPlugin,[{key:"setup",value:function setup(core,deps){return{indexPattern:this.indexPattern.setup({httpClient:core.http}),savedObjects:this.savedObjects.setup()}}},{key:"start",value:function start(core,plugins){return{}}},{key:"stop",value:function stop(){this.indexPattern.stop()}}]);return ManagementPlugin}();exports.ManagementPlugin=ManagementPlugin},1944:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _index_pattern_management=__webpack_require__(608);Object.keys(_index_pattern_management).forEach((function(key){if(key==="default"||key==="__esModule")return;Object.defineProperty(exports,key,{enumerable:true,get:function get(){return _index_pattern_management[key]}})}));var _saved_objects_management=__webpack_require__(268);Object.keys(_saved_objects_management).forEach((function(key){if(key==="default"||key==="__esModule")return;Object.defineProperty(exports,key,{enumerable:true,get:function get(){return _saved_objects_management[key]}})}))},1945:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.IndexPatternManagementService=void 0;var _creation=__webpack_require__(609);var _list=__webpack_require__(610);function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);return Constructor}var IndexPatternManagementService=function(){function IndexPatternManagementService(){_classCallCheck(this,IndexPatternManagementService)}_createClass(IndexPatternManagementService,[{key:"setup",value:function setup(_ref){var httpClient=_ref.httpClient;var creation=new _creation.IndexPatternCreationManager(httpClient);var list=new _list.IndexPatternListManager;creation.add(_creation.IndexPatternCreationConfig);list.add(_list.IndexPatternListConfig);return{creation:creation,list:list}}},{key:"stop",value:function stop(){}}]);return IndexPatternManagementService}();exports.IndexPatternManagementService=IndexPatternManagementService},1946:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.IndexPatternCreationConfig=void 0;var _i18n=__webpack_require__(1);function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);return Constructor}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}var indexPatternTypeName=_i18n.i18n.translate("management.editIndexPattern.createIndex.defaultTypeName",{defaultMessage:"index pattern"});var indexPatternButtonText=_i18n.i18n.translate("management.editIndexPattern.createIndex.defaultButtonText",{defaultMessage:"Standard index pattern"});var indexPatternButtonDescription=_i18n.i18n.translate("management.editIndexPattern.createIndex.defaultButtonDescription",{defaultMessage:"Perform full aggregations against any data"});var IndexPatternCreationConfig=function(){function IndexPatternCreationConfig(_ref){var _ref$type=_ref.type,type=_ref$type===void 0?undefined:_ref$type,_ref$name=_ref.name,name=_ref$name===void 0?indexPatternTypeName:_ref$name,_ref$showSystemIndice=_ref.showSystemIndices,showSystemIndices=_ref$showSystemIndice===void 0?true:_ref$showSystemIndice,_ref$httpClient=_ref.httpClient,httpClient=_ref$httpClient===void 0?null:_ref$httpClient,_ref$isBeta=_ref.isBeta,isBeta=_ref$isBeta===void 0?false:_ref$isBeta;_classCallCheck(this,IndexPatternCreationConfig);_defineProperty(this,"key","default");_defineProperty(this,"type",void 0);_defineProperty(this,"name",void 0);_defineProperty(this,"showSystemIndices",void 0);_defineProperty(this,"httpClient",void 0);_defineProperty(this,"isBeta",void 0);this.type=type;this.name=name;this.showSystemIndices=showSystemIndices;this.httpClient=httpClient;this.isBeta=isBeta}_createClass(IndexPatternCreationConfig,[{key:"getIndexPatternCreationOption",value:function getIndexPatternCreationOption(urlHandler){return regeneratorRuntime.async((function getIndexPatternCreationOption$(_context){while(1){switch(_context.prev=_context.next){case 0:return _context.abrupt("return",{text:indexPatternButtonText,description:indexPatternButtonDescription,testSubj:"createStandardIndexPatternButton",onClick:function onClick(){urlHandler("/management/kibana/index_pattern")}});case 1:case"end":return _context.stop()}}}))}},{key:"getIndexPatternType",value:function getIndexPatternType(){return this.type}},{key:"getIndexPatternName",value:function getIndexPatternName(){return this.name}},{key:"getIsBeta",value:function getIsBeta(){return this.isBeta}},{key:"getShowSystemIndices",value:function getShowSystemIndices(){return this.showSystemIndices}},{key:"getIndexTags",value:function getIndexTags(){return[]}},{key:"checkIndicesForErrors",value:function checkIndicesForErrors(){return undefined}},{key:"getIndexPatternMappings",value:function getIndexPatternMappings(){return{}}},{key:"renderPrompt",value:function renderPrompt(){return null}},{key:"getFetchForWildcardOptions",value:function getFetchForWildcardOptions(){return{}}}]);return IndexPatternCreationConfig}();exports.IndexPatternCreationConfig=IndexPatternCreationConfig},1947:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.IndexPatternCreationManager=void 0;function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);return Constructor}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}var IndexPatternCreationManager=function(){function IndexPatternCreationManager(httpClient){_classCallCheck(this,IndexPatternCreationManager);this.httpClient=httpClient;_defineProperty(this,"configs",void 0);this.configs=[]}_createClass(IndexPatternCreationManager,[{key:"add",value:function add(Config){var config=new Config({httpClient:this.httpClient});if(this.configs.findIndex((function(c){return c.key===config.key}))!==-1){throw new Error("".concat(config.key," exists in IndexPatternCreationManager."))}this.configs.push(config)}},{key:"getType",value:function getType(key){if(key){var index=this.configs.findIndex((function(config){return config.key===key}));return this.configs[index]||null}else{return this.getType("default")}}},{key:"getIndexPatternCreationOptions",value:function getIndexPatternCreationOptions(urlHandler){var options;return regeneratorRuntime.async((function getIndexPatternCreationOptions$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:options=[];_context2.next=3;return regeneratorRuntime.awrap(Promise.all(this.configs.map((function _callee(config){var option;return regeneratorRuntime.async((function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:if(!config.getIndexPatternCreationOption){_context.next=6;break}_context.next=3;return regeneratorRuntime.awrap(config.getIndexPatternCreationOption(urlHandler));case 3:_context.t0=_context.sent;_context.next=7;break;case 6:_context.t0=null;case 7:option=_context.t0;if(option){options.push(option)}case 9:case"end":return _context.stop()}}}))}))));case 3:return _context2.abrupt("return",options);case 4:case"end":return _context2.stop()}}}),null,this)}}]);return IndexPatternCreationManager}();exports.IndexPatternCreationManager=IndexPatternCreationManager},1948:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.IndexPatternListConfig=void 0;var _i18n=__webpack_require__(1);function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);return Constructor}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}var IndexPatternListConfig=function(){function IndexPatternListConfig(){_classCallCheck(this,IndexPatternListConfig);_defineProperty(this,"key","default")}_createClass(IndexPatternListConfig,[{key:"getIndexPatternTags",value:function getIndexPatternTags(indexPattern,isDefault){return isDefault?[{key:"default",name:_i18n.i18n.translate("management.editIndexPattern.list.defaultIndexPatternListName",{defaultMessage:"Default"})}]:[]}},{key:"getFieldInfo",value:function getFieldInfo(indexPattern,field){return[]}},{key:"areScriptedFieldsEnabled",value:function areScriptedFieldsEnabled(indexPattern){return true}}]);return IndexPatternListConfig}();exports.IndexPatternListConfig=IndexPatternListConfig},1949:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.IndexPatternListManager=void 0;function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);return Constructor}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}var IndexPatternListManager=function(){function IndexPatternListManager(){_classCallCheck(this,IndexPatternListManager);_defineProperty(this,"configs",void 0);this.configs=[]}_createClass(IndexPatternListManager,[{key:"add",value:function add(Config){var config=new Config;if(this.configs.findIndex((function(c){return c.key===config.key}))!==-1){throw new Error("".concat(config.key," exists in IndexPatternListManager."))}this.configs.push(config)}},{key:"getIndexPatternTags",value:function getIndexPatternTags(indexPattern,isDefault){return this.configs.reduce((function(tags,config){return config.getIndexPatternTags?tags.concat(config.getIndexPatternTags(indexPattern,isDefault)):tags}),[])}},{key:"getFieldInfo",value:function getFieldInfo(indexPattern,field){return this.configs.reduce((function(info,config){return config.getFieldInfo?info.concat(config.getFieldInfo(indexPattern,field)):info}),[])}},{key:"areScriptedFieldsEnabled",value:function areScriptedFieldsEnabled(indexPattern){return this.configs.every((function(config){return config.areScriptedFieldsEnabled?config.areScriptedFieldsEnabled(indexPattern):true}))}}]);return IndexPatternListManager}();exports.IndexPatternListManager=IndexPatternListManager},1950:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.SavedObjectsManagementAction=void 0;function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);return Constructor}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}var SavedObjectsManagementAction=function(){function SavedObjectsManagementAction(){_classCallCheck(this,SavedObjectsManagementAction);_defineProperty(this,"render",void 0);_defineProperty(this,"id",void 0);_defineProperty(this,"euiAction",void 0);_defineProperty(this,"callbacks",[]);_defineProperty(this,"record",null)}_createClass(SavedObjectsManagementAction,[{key:"registerOnFinishCallback",value:function registerOnFinishCallback(callback){this.callbacks.push(callback)}},{key:"start",value:function start(record){this.record=record}},{key:"finish",value:function finish(){this.record=null;this.callbacks.forEach((function(callback){return callback()}))}}]);return SavedObjectsManagementAction}();exports.SavedObjectsManagementAction=SavedObjectsManagementAction},1951:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.SavedObjectsManagementService=void 0;var _saved_objects_management_action_registry=__webpack_require__(611);function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);return Constructor}var SavedObjectsManagementService=function(){function SavedObjectsManagementService(){_classCallCheck(this,SavedObjectsManagementService)}_createClass(SavedObjectsManagementService,[{key:"setup",value:function setup(){return{registry:_saved_objects_management_action_registry.SavedObjectsManagementActionRegistry}}},{key:"stop",value:function stop(){}}]);return SavedObjectsManagementService}();exports.SavedObjectsManagementService=SavedObjectsManagementService},1953:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.updateIndexPatternList=updateIndexPatternList;exports.destroyIndexPatternList=void 0;var _management=__webpack_require__(80);var _legacy=__webpack_require__(176);__webpack_require__(1954);__webpack_require__(1991);var _routes=_interopRequireDefault(__webpack_require__(31));var _modules=__webpack_require__(8);var _index=_interopRequireDefault(__webpack_require__(2042));var _list=_interopRequireDefault(__webpack_require__(2043));var _index_pattern_table=__webpack_require__(2044);var _saved_objects=__webpack_require__(68);var _feature_catalogue=__webpack_require__(106);var _i18n=__webpack_require__(1);var _i18n2=__webpack_require__(24);var _react=__webpack_require__(614);var _breadcrumbs=__webpack_require__(177);var _react2=_interopRequireDefault(__webpack_require__(0));var _reactDom=__webpack_require__(9);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var INDEX_PATTERN_LIST_DOM_ELEMENT_ID="indexPatternListReact";function updateIndexPatternList(indexPatterns,kbnUrl,indexPatternCreationOptions){var node=document.getElementById(INDEX_PATTERN_LIST_DOM_ELEMENT_ID);if(!node){return}(0,_reactDom.render)(_react2.default.createElement(_i18n2.I18nContext,null,_react2.default.createElement(_react.UICapabilitiesProvider,null,_react2.default.createElement(_index_pattern_table.IndexPatternTable,{indexPatterns:indexPatterns,navTo:kbnUrl.redirect,indexPatternCreationOptions:indexPatternCreationOptions}))),node)}var destroyIndexPatternList=function destroyIndexPatternList(){var node=document.getElementById(INDEX_PATTERN_LIST_DOM_ELEMENT_ID);node&&(0,_reactDom.unmountComponentAtNode)(node)};exports.destroyIndexPatternList=destroyIndexPatternList;var indexPatternsResolutions={indexPatterns:function indexPatterns(Private){var savedObjectsClient=Private(_saved_objects.SavedObjectsClientProvider);return savedObjectsClient.find({type:"index-pattern",fields:["title","type"],perPage:1e4}).then((function(response){return response.savedObjects}))}};_routes.default.defaults(/management\/kibana\/(index_patterns|index_pattern)/,{resolve:indexPatternsResolutions,requireUICapability:"management.kibana.index_patterns",badge:function badge(uiCapabilities){if(uiCapabilities.indexPatterns.save){return undefined}return{text:_i18n.i18n.translate("kbn.management.indexPatterns.badge.readOnly.text",{defaultMessage:"Read only"}),tooltip:_i18n.i18n.translate("kbn.management.indexPatterns.badge.readOnly.tooltip",{defaultMessage:"Unable to save index patterns"}),iconType:"glasses"}}});_routes.default.when("/management/kibana/index_patterns",{template:_list.default,k7Breadcrumbs:_breadcrumbs.getListBreadcrumbs});_modules.uiModules.get("apps/management").directive("kbnManagementIndexPatterns",(function($route,config,kbnUrl){return{restrict:"E",transclude:true,template:_index.default,link:function link($scope){var indexPatternCreationOptions,renderList;return regeneratorRuntime.async((function link$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return regeneratorRuntime.awrap(_legacy.setup.indexPattern.creation.getIndexPatternCreationOptions((function(url){$scope.$evalAsync((function(){return kbnUrl.change(url)}))})));case 2:indexPatternCreationOptions=_context.sent;renderList=function renderList(){$scope.indexPatternList=$route.current.locals.indexPatterns.map((function(pattern){var id=pattern.id;var title=pattern.get("title");var isDefault=$scope.defaultIndex===id;var tags=_legacy.setup.indexPattern.list.getIndexPatternTags(pattern,isDefault);return{id:id,title:title,url:kbnUrl.eval("#/management/kibana/index_patterns/{{id}}",{id:id}),active:$scope.editingId===id,default:isDefault,tags:tags,sort:"".concat(isDefault?"0":"1").concat(title)}})).sort((function(a,b){if(a.sort<b.sort){return-1}else if(a.sort>b.sort){return 1}else{return 0}}))||[];updateIndexPatternList($scope.indexPatternList,kbnUrl,indexPatternCreationOptions)};$scope.$on("$destroy",destroyIndexPatternList);$scope.editingId=$route.current.params.indexPatternId;$scope.$watch("defaultIndex",(function(){return renderList()}));config.bindToScope($scope,"defaultIndex");$scope.$apply();case 9:case"end":return _context.stop()}}}))}}}));_management.management.getSection("kibana").register("index_patterns",{display:_i18n.i18n.translate("kbn.management.indexPattern.sectionsHeader",{defaultMessage:"Index Patterns"}),order:0,url:"#/management/kibana/index_patterns/"});_feature_catalogue.FeatureCatalogueRegistryProvider.register((function(){return{id:"index_patterns",title:_i18n.i18n.translate("kbn.management.indexPatternHeader",{defaultMessage:"Index Patterns"}),description:_i18n.i18n.translate("kbn.management.indexPatternLabel",{defaultMessage:"Manage the index patterns that help retrieve your data from Elasticsearch."}),icon:"indexPatternApp",path:"/app/kibana#/management/kibana/index_patterns",showOnHomePage:true,category:_feature_catalogue.FeatureCatalogueCategory.ADMIN}}))},1954:function(module,exports,__webpack_require__){"use strict";var _saved_objects=__webpack_require__(68);var _routes=_interopRequireDefault(__webpack_require__(31));var _angular_template=_interopRequireDefault(__webpack_require__(1955));var _new_platform=__webpack_require__(6);var _legacy=__webpack_require__(176);var _breadcrumbs=__webpack_require__(177);var _render=__webpack_require__(1956);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}_routes.default.when("/management/kibana/index_pattern",{template:_angular_template.default,k7Breadcrumbs:_breadcrumbs.getCreateBreadcrumbs,controller:function controller($scope,$injector){var kbnUrl=$injector.get("kbnUrl");var Private=$injector.get("Private");$scope.$$postDigest((function(){var $routeParams=$injector.get("$routeParams");var indexPatternCreationType=_legacy.setup.indexPattern.creation.getType($routeParams.type);var services={config:$injector.get("config"),es:$injector.get("es"),indexPatterns:_new_platform.npStart.plugins.data.indexPatterns,$http:$injector.get("$http"),savedObjectsClient:Private(_saved_objects.SavedObjectsClientProvider),indexPatternCreationType:indexPatternCreationType,confirmModalPromise:$injector.get("confirmModalPromise"),changeUrl:function changeUrl(url){$scope.$evalAsync((function(){return kbnUrl.changePath(url)}))}};var initialQuery=$routeParams.id?decodeURIComponent($routeParams.id):undefined;(0,_render.renderCreateIndexPatternWizard)(initialQuery,services)}));$scope.$on("$destroy",_render.destroyCreateIndexPatternWizard)}})},1955:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__);__webpack_exports__["default"]='<kbn-management-app section="kibana/index_patterns">\n  <div class="euiPanel euiPanel--paddingLarge">\n    <div id="createIndexPatternReact"></div>\n  </div>\n</kbn-management-app>\n'},1956:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.renderCreateIndexPatternWizard=renderCreateIndexPatternWizard;exports.destroyCreateIndexPatternWizard=destroyCreateIndexPatternWizard;var _react=_interopRequireDefault(__webpack_require__(0));var _reactDom=__webpack_require__(9);var _create_index_pattern_wizard=__webpack_require__(1957);var _i18n=__webpack_require__(24);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var CREATE_INDEX_PATTERN_DOM_ELEMENT_ID="createIndexPatternReact";function renderCreateIndexPatternWizard(initialQuery,services){var node=document.getElementById(CREATE_INDEX_PATTERN_DOM_ELEMENT_ID);if(!node){return}(0,_reactDom.render)(_react.default.createElement(_i18n.I18nContext,null,_react.default.createElement(_create_index_pattern_wizard.CreateIndexPatternWizard,{initialQuery:initialQuery,services:services})),node)}function destroyCreateIndexPatternWizard(){var node=document.getElementById(CREATE_INDEX_PATTERN_DOM_ELEMENT_ID);node&&(0,_reactDom.unmountComponentAtNode)(node)}},1957:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.CreateIndexPatternWizard=void 0;var _react=_interopRequireWildcard(__webpack_require__(0));var _propTypes=_interopRequireDefault(__webpack_require__(5));var _eui=__webpack_require__(3);var _react2=__webpack_require__(4);var _step_index_pattern=__webpack_require__(1958);var _step_time_field=__webpack_require__(1974);var _header=__webpack_require__(1985);var _loading_state=__webpack_require__(1987);var _empty_state=__webpack_require__(1989);var _constants=__webpack_require__(178);var _lib=__webpack_require__(269);var _i18n=__webpack_require__(1);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _interopRequireWildcard(obj){if(obj&&obj.__esModule){return obj}else{var newObj={};if(obj!=null){for(var key in obj){if(Object.prototype.hasOwnProperty.call(obj,key)){var desc=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):{};if(desc.get||desc.set){Object.defineProperty(newObj,key,desc)}else{newObj[key]=obj[key]}}}}newObj.default=obj;return newObj}}function _typeof(obj){if(typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"){_typeof=function _typeof(obj){return typeof obj}}else{_typeof=function _typeof(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj}}return _typeof(obj)}function ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);if(enumerableOnly)symbols=symbols.filter((function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable}));keys.push.apply(keys,symbols)}return keys}function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=arguments[i]!=null?arguments[i]:{};if(i%2){ownKeys(source,true).forEach((function(key){_defineProperty(target,key,source[key])}))}else if(Object.getOwnPropertyDescriptors){Object.defineProperties(target,Object.getOwnPropertyDescriptors(source))}else{ownKeys(source).forEach((function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))}))}}return target}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);return Constructor}function _possibleConstructorReturn(self,call){if(call&&(_typeof(call)==="object"||typeof call==="function")){return call}return _assertThisInitialized(self)}function _getPrototypeOf(o){_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o)};return _getPrototypeOf(o)}function _assertThisInitialized(self){if(self===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return self}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function")}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:true,configurable:true}});if(superClass)_setPrototypeOf(subClass,superClass)}function _setPrototypeOf(o,p){_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(o,p){o.__proto__=p;return o};return _setPrototypeOf(o,p)}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}var CreateIndexPatternWizard=function(_Component){_inherits(CreateIndexPatternWizard,_Component);function CreateIndexPatternWizard(props){var _this;_classCallCheck(this,CreateIndexPatternWizard);_this=_possibleConstructorReturn(this,_getPrototypeOf(CreateIndexPatternWizard).call(this,props));_defineProperty(_assertThisInitialized(_this),"catchAndWarn",(function _callee(asyncFn,errorValue,errorMsg){return regeneratorRuntime.async((function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.prev=0;_context.next=3;return regeneratorRuntime.awrap(asyncFn);case 3:return _context.abrupt("return",_context.sent);case 6:_context.prev=6;_context.t0=_context["catch"](0);_this.setState((function(prevState){return{toasts:prevState.toasts.concat([{title:errorMsg,id:errorMsg.props.id,color:"warning",iconType:"alert"}])}}));return _context.abrupt("return",errorValue);case 10:case"end":return _context.stop()}}}),null,null,[[0,6]])}));_defineProperty(_assertThisInitialized(_this),"fetchData",(function _callee2(){var services,indicesFailMsg,clustersFailMsg;return regeneratorRuntime.async((function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:services=_this.props.services;_this.setState({allIndices:[],isInitiallyLoadingIndices:true,remoteClustersExist:false});indicesFailMsg=_react.default.createElement(_react2.FormattedMessage,{id:"kbn.management.createIndexPattern.loadIndicesFailMsg",defaultMessage:"Failed to load indices"});clustersFailMsg=_react.default.createElement(_react2.FormattedMessage,{id:"kbn.management.createIndexPattern.loadClustersFailMsg",defaultMessage:"Failed to load remote clusters"});(0,_lib.ensureMinimumTime)(_this.catchAndWarn((0,_lib.getIndices)(services.es,_this.indexPatternCreationType,"*",_constants.MAX_SEARCH_SIZE),[],indicesFailMsg)).then((function(allIndices){return _this.setState({allIndices:allIndices,isInitiallyLoadingIndices:false})}));_this.catchAndWarn((0,_lib.getIndices)(services.es,_this.indexPatternCreationType,"*:*",1),["a"],clustersFailMsg).then((function(remoteIndices){return _this.setState({remoteClustersExist:!!remoteIndices.length})}));case 6:case"end":return _context2.stop()}}}))}));_defineProperty(_assertThisInitialized(_this),"createIndexPattern",(function _callee3(timeFieldName,indexPatternId){var services,indexPattern,emptyPattern,createdId,confirmMessage;return regeneratorRuntime.async((function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:services=_this.props.services;indexPattern=_this.state.indexPattern;_context3.next=4;return regeneratorRuntime.awrap(services.indexPatterns.make());case 4:emptyPattern=_context3.sent;Object.assign(emptyPattern,_objectSpread({id:indexPatternId,title:indexPattern,timeFieldName:timeFieldName},_this.indexPatternCreationType.getIndexPatternMappings()));_context3.next=8;return regeneratorRuntime.awrap(emptyPattern.create());case 8:createdId=_context3.sent;if(createdId){_context3.next=20;break}confirmMessage=_i18n.i18n.translate("kbn.management.indexPattern.titleExistsLabel",{values:{title:_this.title},defaultMessage:"An index pattern with the title '{title}' already exists."});_context3.prev=11;_context3.next=14;return regeneratorRuntime.awrap(services.confirmModalPromise(confirmMessage,{confirmButtonText:"Go to existing pattern"}));case 14:return _context3.abrupt("return",services.changeUrl("/management/kibana/index_patterns/".concat(indexPatternId)));case 17:_context3.prev=17;_context3.t0=_context3["catch"](11);return _context3.abrupt("return",false);case 20:if(services.config.get("defaultIndex")){_context3.next=23;break}_context3.next=23;return regeneratorRuntime.awrap(services.config.set("defaultIndex",createdId));case 23:services.indexPatterns.clearCache(createdId);services.changeUrl("/management/kibana/index_patterns/".concat(createdId));case 25:case"end":return _context3.stop()}}}),null,null,[[11,17]])}));_defineProperty(_assertThisInitialized(_this),"goToTimeFieldStep",(function(indexPattern){_this.setState({step:2,indexPattern:indexPattern})}));_defineProperty(_assertThisInitialized(_this),"goToIndexPatternStep",(function(){_this.setState({step:1})}));_defineProperty(_assertThisInitialized(_this),"onChangeIncludingSystemIndices",(function(){_this.setState((function(state){return{isIncludingSystemIndices:!state.isIncludingSystemIndices}}))}));_defineProperty(_assertThisInitialized(_this),"removeToast",(function(removedToast){_this.setState((function(prevState){return{toasts:prevState.toasts.filter((function(toast){return toast.id!==removedToast.id}))}}))}));_this.indexPatternCreationType=_this.props.services.indexPatternCreationType;_this.state={step:1,indexPattern:"",allIndices:[],remoteClustersExist:false,isInitiallyLoadingIndices:true,isIncludingSystemIndices:false,toasts:[]};return _this}_createClass(CreateIndexPatternWizard,[{key:"UNSAFE_componentWillMount",value:function UNSAFE_componentWillMount(){return regeneratorRuntime.async((function UNSAFE_componentWillMount$(_context4){while(1){switch(_context4.prev=_context4.next){case 0:this.fetchData();case 1:case"end":return _context4.stop()}}}),null,this)}},{key:"renderHeader",value:function renderHeader(){var isIncludingSystemIndices=this.state.isIncludingSystemIndices;return _react.default.createElement(_header.Header,{prompt:this.indexPatternCreationType.renderPrompt(),showSystemIndices:this.indexPatternCreationType.getShowSystemIndices(),isIncludingSystemIndices:isIncludingSystemIndices,onChangeIncludingSystemIndices:this.onChangeIncludingSystemIndices,indexPatternName:this.indexPatternCreationType.getIndexPatternName(),isBeta:this.indexPatternCreationType.getIsBeta()})}},{key:"renderContent",value:function renderContent(){var _this$state=this.state,allIndices=_this$state.allIndices,isInitiallyLoadingIndices=_this$state.isInitiallyLoadingIndices,isIncludingSystemIndices=_this$state.isIncludingSystemIndices,step=_this$state.step,indexPattern=_this$state.indexPattern,remoteClustersExist=_this$state.remoteClustersExist;if(isInitiallyLoadingIndices){return _react.default.createElement(_loading_state.LoadingState,null)}var hasDataIndices=allIndices.some((function(_ref){var name=_ref.name;return!name.startsWith(".")}));if(!hasDataIndices&&!isIncludingSystemIndices&&!remoteClustersExist){return _react.default.createElement(_empty_state.EmptyState,{onRefresh:this.fetchData})}if(step===1){var _this$props=this.props,_services=_this$props.services,initialQuery=_this$props.initialQuery;return _react.default.createElement(_step_index_pattern.StepIndexPattern,{allIndices:allIndices,initialQuery:indexPattern||initialQuery,isIncludingSystemIndices:isIncludingSystemIndices,esService:_services.es,savedObjectsClient:_services.savedObjectsClient,indexPatternCreationType:this.indexPatternCreationType,goToNextStep:this.goToTimeFieldStep})}if(step===2){var _services2=this.props.services;return _react.default.createElement(_step_time_field.StepTimeField,{indexPattern:indexPattern,indexPatternsService:_services2.indexPatterns,goToPreviousStep:this.goToIndexPatternStep,createIndexPattern:this.createIndexPattern,indexPatternCreationType:this.indexPatternCreationType})}return null}},{key:"render",value:function render(){var header=this.renderHeader();var content=this.renderContent();return _react.default.createElement(_react.default.Fragment,null,_react.default.createElement("div",null,header,content),_react.default.createElement(_eui.EuiGlobalToastList,{toasts:this.state.toasts,dismissToast:this.removeToast,toastLifeTimeMs:6e3}))}}]);return CreateIndexPatternWizard}(_react.Component);exports.CreateIndexPatternWizard=CreateIndexPatternWizard;_defineProperty(CreateIndexPatternWizard,"propTypes",{initialQuery:_propTypes.default.string,services:_propTypes.default.shape({es:_propTypes.default.object.isRequired,indexPatterns:_propTypes.default.object.isRequired,savedObjectsClient:_propTypes.default.object.isRequired,indexPatternCreationType:_propTypes.default.object.isRequired,config:_propTypes.default.object.isRequired,changeUrl:_propTypes.default.func.isRequired}).isRequired})},1958:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});Object.defineProperty(exports,"StepIndexPattern",{enumerable:true,get:function get(){return _step_index_pattern.StepIndexPattern}});var _step_index_pattern=__webpack_require__(1959)},1959:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.StepIndexPattern=void 0;var _react=_interopRequireWildcard(__webpack_require__(0));var _propTypes=_interopRequireDefault(__webpack_require__(5));var _public=__webpack_require__(7);var _constants=__webpack_require__(178);var _lib=__webpack_require__(269);var _loading_indices=__webpack_require__(1966);var _status_message=__webpack_require__(1968);var _indices_list=__webpack_require__(1970);var _header=__webpack_require__(1972);var _eui=__webpack_require__(3);var _i18n=__webpack_require__(1);var _react2=__webpack_require__(4);var _chrome=_interopRequireDefault(__webpack_require__(10));function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _interopRequireWildcard(obj){if(obj&&obj.__esModule){return obj}else{var newObj={};if(obj!=null){for(var key in obj){if(Object.prototype.hasOwnProperty.call(obj,key)){var desc=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):{};if(desc.get||desc.set){Object.defineProperty(newObj,key,desc)}else{newObj[key]=obj[key]}}}}newObj.default=obj;return newObj}}function _typeof(obj){if(typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"){_typeof=function _typeof(obj){return typeof obj}}else{_typeof=function _typeof(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj}}return _typeof(obj)}function _toConsumableArray(arr){return _arrayWithoutHoles(arr)||_iterableToArray(arr)||_nonIterableSpread()}function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance")}function _iterableToArray(iter){if(Symbol.iterator in Object(iter)||Object.prototype.toString.call(iter)==="[object Arguments]")return Array.from(iter)}function _arrayWithoutHoles(arr){if(Array.isArray(arr)){for(var i=0,arr2=new Array(arr.length);i<arr.length;i++){arr2[i]=arr[i]}return arr2}}function _slicedToArray(arr,i){return _arrayWithHoles(arr)||_iterableToArrayLimit(arr,i)||_nonIterableRest()}function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}function _iterableToArrayLimit(arr,i){var _arr=[];var _n=true;var _d=false;var _e=undefined;try{for(var _i=arr[Symbol.iterator](),_s;!(_n=(_s=_i.next()).done);_n=true){_arr.push(_s.value);if(i&&_arr.length===i)break}}catch(err){_d=true;_e=err}finally{try{if(!_n&&_i["return"]!=null)_i["return"]()}finally{if(_d)throw _e}}return _arr}function _arrayWithHoles(arr){if(Array.isArray(arr))return arr}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);return Constructor}function _possibleConstructorReturn(self,call){if(call&&(_typeof(call)==="object"||typeof call==="function")){return call}return _assertThisInitialized(self)}function _getPrototypeOf(o){_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o)};return _getPrototypeOf(o)}function _assertThisInitialized(self){if(self===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return self}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function")}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:true,configurable:true}});if(superClass)_setPrototypeOf(subClass,superClass)}function _setPrototypeOf(o,p){_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(o,p){o.__proto__=p;return o};return _setPrototypeOf(o,p)}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}var uiSettings=_chrome.default.getUiSettingsClient();var StepIndexPattern=function(_Component){_inherits(StepIndexPattern,_Component);function StepIndexPattern(props){var _this;_classCallCheck(this,StepIndexPattern);_this=_possibleConstructorReturn(this,_getPrototypeOf(StepIndexPattern).call(this,props));_defineProperty(_assertThisInitialized(_this),"fetchExistingIndexPatterns",(function _callee(){var _ref,savedObjects,existingIndexPatterns;return regeneratorRuntime.async((function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return regeneratorRuntime.awrap(_this.props.savedObjectsClient.find({type:"index-pattern",fields:["title"],perPage:1e4}));case 2:_ref=_context.sent;savedObjects=_ref.savedObjects;existingIndexPatterns=savedObjects.map((function(obj){return obj&&obj.attributes?obj.attributes.title:""}));_this.setState({existingIndexPatterns:existingIndexPatterns});case 6:case"end":return _context.stop()}}}))}));_defineProperty(_assertThisInitialized(_this),"fetchIndices",(function _callee2(query){var _this$props,esService,indexPatternCreationType,existingIndexPatterns,_exactMatchedIndices,_ref2,_ref3,partialMatchedIndices,exactMatchedIndices;return regeneratorRuntime.async((function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:_this$props=_this.props,esService=_this$props.esService,indexPatternCreationType=_this$props.indexPatternCreationType;existingIndexPatterns=_this.state.existingIndexPatterns;if(!existingIndexPatterns.includes(query)){_context2.next=5;break}_this.setState({indexPatternExists:true});return _context2.abrupt("return");case 5:_this.setState({isLoadingIndices:true,indexPatternExists:false});if(!query.endsWith("*")){_context2.next=14;break}_context2.next=9;return regeneratorRuntime.awrap((0,_lib.ensureMinimumTime)((0,_lib.getIndices)(esService,indexPatternCreationType,query,_constants.MAX_SEARCH_SIZE)));case 9:_exactMatchedIndices=_context2.sent;if(!(query!==_this.lastQuery)){_context2.next=12;break}return _context2.abrupt("return");case 12:_this.setState({exactMatchedIndices:_exactMatchedIndices,isLoadingIndices:false});return _context2.abrupt("return");case 14:_context2.next=16;return regeneratorRuntime.awrap((0,_lib.ensureMinimumTime)([(0,_lib.getIndices)(esService,indexPatternCreationType,"".concat(query,"*"),_constants.MAX_SEARCH_SIZE),(0,_lib.getIndices)(esService,indexPatternCreationType,query,_constants.MAX_SEARCH_SIZE)]));case 16:_ref2=_context2.sent;_ref3=_slicedToArray(_ref2,2);partialMatchedIndices=_ref3[0];exactMatchedIndices=_ref3[1];if(!(query!==_this.lastQuery)){_context2.next=22;break}return _context2.abrupt("return");case 22:_this.setState({partialMatchedIndices:partialMatchedIndices,exactMatchedIndices:exactMatchedIndices,isLoadingIndices:false});case 23:case"end":return _context2.stop()}}}))}));_defineProperty(_assertThisInitialized(_this),"onQueryChanged",(function(e){var appendedWildcard=_this.state.appendedWildcard;var target=e.target;var query=target.value;if(query.length===1&&(0,_lib.canAppendWildcard)(query)){query+="*";_this.setState({appendedWildcard:true});setTimeout((function(){return target.setSelectionRange(1,1)}))}else{if(query==="*"&&appendedWildcard){query="";_this.setState({appendedWildcard:false})}}_this.lastQuery=query;_this.setState({query:query,showingIndexPatternQueryErrors:!!query.length});_this.fetchIndices(query)}));var _indexPatternCreationType=_this.props.indexPatternCreationType;_this.state={partialMatchedIndices:[],exactMatchedIndices:[],isLoadingIndices:false,existingIndexPatterns:[],indexPatternExists:false,query:props.initialQuery,appendedWildcard:false,showingIndexPatternQueryErrors:false,indexPatternName:_indexPatternCreationType.getIndexPatternName()};_this.ILLEGAL_CHARACTERS=_toConsumableArray(_public.indexPatterns.ILLEGAL_CHARACTERS);_this.lastQuery=null;return _this}_createClass(StepIndexPattern,[{key:"UNSAFE_componentWillMount",value:function UNSAFE_componentWillMount(){return regeneratorRuntime.async((function UNSAFE_componentWillMount$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:this.fetchExistingIndexPatterns();if(this.state.query){this.lastQuery=this.state.query;this.fetchIndices(this.state.query)}case 2:case"end":return _context3.stop()}}}),null,this)}},{key:"renderLoadingState",value:function renderLoadingState(){var isLoadingIndices=this.state.isLoadingIndices;if(!isLoadingIndices){return null}return _react.default.createElement(_loading_indices.LoadingIndices,{"data-test-subj":"createIndexPatternStep1Loading"})}},{key:"renderStatusMessage",value:function renderStatusMessage(matchedIndices){var indexPatternCreationType=this.props.indexPatternCreationType;var _this$state=this.state,query=_this$state.query,isLoadingIndices=_this$state.isLoadingIndices,indexPatternExists=_this$state.indexPatternExists,isIncludingSystemIndices=_this$state.isIncludingSystemIndices;if(isLoadingIndices||indexPatternExists){return null}return _react.default.createElement(_status_message.StatusMessage,{matchedIndices:matchedIndices,showSystemIndices:indexPatternCreationType.getShowSystemIndices(),isIncludingSystemIndices:isIncludingSystemIndices,query:query})}},{key:"renderList",value:function renderList(_ref4){var visibleIndices=_ref4.visibleIndices,allIndices=_ref4.allIndices;var _this$state2=this.state,query=_this$state2.query,isLoadingIndices=_this$state2.isLoadingIndices,indexPatternExists=_this$state2.indexPatternExists;if(isLoadingIndices||indexPatternExists){return null}var indicesToList=query.length?visibleIndices:allIndices;return _react.default.createElement(_indices_list.IndicesList,{"data-test-subj":"createIndexPatternStep1IndicesList",query:query,indices:indicesToList})}},{key:"renderIndexPatternExists",value:function renderIndexPatternExists(){var _this$state3=this.state,indexPatternExists=_this$state3.indexPatternExists,query=_this$state3.query;if(!indexPatternExists){return null}return _react.default.createElement(_eui.EuiCallOut,{title:_react.default.createElement(_react2.FormattedMessage,{id:"kbn.management.createIndexPattern.step.warningHeader",defaultMessage:"There's already an index pattern called {query}",values:{query:query}}),iconType:"help",color:"warning"})}},{key:"renderHeader",value:function renderHeader(_ref5){var indices=_ref5.exactMatchedIndices;var _this$props2=this.props,goToNextStep=_this$props2.goToNextStep,indexPatternCreationType=_this$props2.indexPatternCreationType;var _this$state4=this.state,query=_this$state4.query,showingIndexPatternQueryErrors=_this$state4.showingIndexPatternQueryErrors,indexPatternExists=_this$state4.indexPatternExists,indexPatternName=_this$state4.indexPatternName;var containsErrors=false;var errors=[];var characterList=this.ILLEGAL_CHARACTERS.slice(0,this.ILLEGAL_CHARACTERS.length-1).join(", ");var checkIndices=indexPatternCreationType.checkIndicesForErrors(indices);if(!query||!query.length||query==="."||query===".."){containsErrors=true}else if((0,_lib.containsIllegalCharacters)(query,_public.indexPatterns.ILLEGAL_CHARACTERS)){var errorMessage=_i18n.i18n.translate("kbn.management.createIndexPattern.step.invalidCharactersErrorMessage",{defaultMessage:"A {indexPatternName} cannot contain spaces or the characters: {characterList}",values:{characterList:characterList,indexPatternName:indexPatternName}});errors.push(errorMessage);containsErrors=true}else if(checkIndices){errors.push.apply(errors,_toConsumableArray(checkIndices));containsErrors=true}var isInputInvalid=showingIndexPatternQueryErrors&&containsErrors&&errors.length>0;var isNextStepDisabled=containsErrors||indices.length===0||indexPatternExists;return _react.default.createElement(_header.Header,{"data-test-subj":"createIndexPatternStep1Header",isInputInvalid:isInputInvalid,errors:errors,characterList:characterList,query:query,onQueryChanged:this.onQueryChanged,goToNextStep:goToNextStep,isNextStepDisabled:isNextStepDisabled})}},{key:"render",value:function render(){var _this$props3=this.props,isIncludingSystemIndices=_this$props3.isIncludingSystemIndices,allIndices=_this$props3.allIndices;var _this$state5=this.state,query=_this$state5.query,partialMatchedIndices=_this$state5.partialMatchedIndices,exactMatchedIndices=_this$state5.exactMatchedIndices;var matchedIndices=(0,_lib.getMatchedIndices)(allIndices,partialMatchedIndices,exactMatchedIndices,query,isIncludingSystemIndices);return _react.default.createElement(_eui.EuiPanel,{paddingSize:"l"},this.renderHeader(matchedIndices),_react.default.createElement(_eui.EuiSpacer,{size:"s"}),this.renderLoadingState(matchedIndices),this.renderIndexPatternExists(),this.renderStatusMessage(matchedIndices),_react.default.createElement(_eui.EuiSpacer,{size:"s"}),this.renderList(matchedIndices))}}]);return StepIndexPattern}(_react.Component);exports.StepIndexPattern=StepIndexPattern;_defineProperty(StepIndexPattern,"propTypes",{allIndices:_propTypes.default.array.isRequired,isIncludingSystemIndices:_propTypes.default.bool.isRequired,esService:_propTypes.default.object.isRequired,savedObjectsClient:_propTypes.default.object.isRequired,indexPatternCreationType:_propTypes.default.object.isRequired,goToNextStep:_propTypes.default.func.isRequired,initialQuery:_propTypes.default.string});_defineProperty(StepIndexPattern,"defaultProps",{initialQuery:uiSettings.get("indexPattern:placeholder")})},1960:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.canAppendWildcard=void 0;var canAppendWildcard=function canAppendWildcard(keyPressed){if(!keyPressed||!/[a-z0-9]/i.test(keyPressed)||keyPressed.length!==1){return false}return true};exports.canAppendWildcard=canAppendWildcard},1961:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.ensureMinimumTime=ensureMinimumTime;exports.DEFAULT_MINIMUM_TIME_MS=void 0;var DEFAULT_MINIMUM_TIME_MS=300;exports.DEFAULT_MINIMUM_TIME_MS=DEFAULT_MINIMUM_TIME_MS;function ensureMinimumTime(promiseOrPromises){var minimumTimeMs,returnValue,bufferedMinimumTimeMs,asyncActionStartTime,asyncActionCompletionTime,asyncActionDuration,additionalWaitingTime,_args=arguments;return regeneratorRuntime.async((function ensureMinimumTime$(_context){while(1){switch(_context.prev=_context.next){case 0:minimumTimeMs=_args.length>1&&_args[1]!==undefined?_args[1]:DEFAULT_MINIMUM_TIME_MS;bufferedMinimumTimeMs=minimumTimeMs+5;asyncActionStartTime=(new Date).getTime();if(!Array.isArray(promiseOrPromises)){_context.next=9;break}_context.next=6;return regeneratorRuntime.awrap(Promise.all(promiseOrPromises));case 6:returnValue=_context.sent;_context.next=12;break;case 9:_context.next=11;return regeneratorRuntime.awrap(promiseOrPromises);case 11:returnValue=_context.sent;case 12:asyncActionCompletionTime=(new Date).getTime();asyncActionDuration=asyncActionCompletionTime-asyncActionStartTime;if(!(asyncActionDuration<bufferedMinimumTimeMs)){_context.next=18;break}additionalWaitingTime=bufferedMinimumTimeMs-(asyncActionCompletionTime-asyncActionStartTime);_context.next=18;return regeneratorRuntime.awrap(new Promise((function(resolve){return setTimeout(resolve,additionalWaitingTime)})));case 18:return _context.abrupt("return",returnValue);case 19:case"end":return _context.stop()}}}))}},1962:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.getIndices=getIndices;var _lodash=__webpack_require__(2);function getIndices(es,indexPatternCreationType,rawPattern,limit){var pattern,params,response,type;return regeneratorRuntime.async((function getIndices$(_context){while(1){switch(_context.prev=_context.next){case 0:pattern=rawPattern.trim();if(!(pattern==="*:")){_context.next=3;break}return _context.abrupt("return",[]);case 3:if(!(pattern==="")){_context.next=5;break}return _context.abrupt("return",[]);case 5:if(!pattern.startsWith(",")){_context.next=7;break}return _context.abrupt("return",[]);case 7:if(limit){_context.next=9;break}throw new Error("`getIndices()` was called without the required `limit` parameter.");case 9:params={ignoreUnavailable:true,index:pattern,ignore:[404],body:{size:0,aggs:{indices:{terms:{field:"_index",size:limit}}}}};_context.prev=10;_context.next=13;return regeneratorRuntime.awrap(es.search(params));case 13:response=_context.sent;if(!(!response||response.error||!response.aggregations)){_context.next=16;break}return _context.abrupt("return",[]);case 16:return _context.abrupt("return",(0,_lodash.sortBy)(response.aggregations.indices.buckets.map((function(bucket){return bucket.key})).map((function(indexName){return{name:indexName,tags:indexPatternCreationType.getIndexTags(indexName)}})),"name"));case 19:_context.prev=19;_context.t0=_context["catch"](10);type=(0,_lodash.get)(_context.t0,"body.error.caused_by.type");if(!(type==="index_not_found_exception")){_context.next=24;break}return _context.abrupt("return",[]);case 24:throw _context.t0;case 25:case"end":return _context.stop()}}}),null,null,[[10,19]])}},1963:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.getMatchedIndices=getMatchedIndices;var _constants=__webpack_require__(178);function isSystemIndex(index){if(index.startsWith(".")){return true}if(index.includes(":")){return index.split(":").reduce((function(isSystem,index){return isSystem||isSystemIndex(index)}),false)}return false}function filterSystemIndices(indices,isIncludingSystemIndices){if(!indices){return indices}var acceptableIndices=isIncludingSystemIndices?indices:indices.filter((function(index){return!isSystemIndex(index.name)}));return acceptableIndices.slice(0,_constants.MAX_NUMBER_OF_MATCHING_INDICES)}function getMatchedIndices(unfilteredAllIndices,unfilteredPartialMatchedIndices,unfilteredExactMatchedIndices,query,isIncludingSystemIndices){var allIndices=filterSystemIndices(unfilteredAllIndices,isIncludingSystemIndices);var partialMatchedIndices=filterSystemIndices(unfilteredPartialMatchedIndices,isIncludingSystemIndices);var exactMatchedIndices=filterSystemIndices(unfilteredExactMatchedIndices,isIncludingSystemIndices);var visibleIndices;if(exactMatchedIndices.length){visibleIndices=exactMatchedIndices}else if(partialMatchedIndices.length){visibleIndices=partialMatchedIndices}else{visibleIndices=allIndices}return{allIndices:allIndices,exactMatchedIndices:exactMatchedIndices,partialMatchedIndices:partialMatchedIndices,visibleIndices:visibleIndices}}},1964:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.containsIllegalCharacters=containsIllegalCharacters;function containsIllegalCharacters(pattern,illegalCharacters){return illegalCharacters.some((function(char){return pattern.includes(char)}))}},1965:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.extractTimeFields=extractTimeFields;var _i18n=__webpack_require__(1);function _toConsumableArray(arr){return _arrayWithoutHoles(arr)||_iterableToArray(arr)||_nonIterableSpread()}function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance")}function _iterableToArray(iter){if(Symbol.iterator in Object(iter)||Object.prototype.toString.call(iter)==="[object Arguments]")return Array.from(iter)}function _arrayWithoutHoles(arr){if(Array.isArray(arr)){for(var i=0,arr2=new Array(arr.length);i<arr.length;i++){arr2[i]=arr[i]}return arr2}}function extractTimeFields(fields){var dateFields=fields.filter((function(field){return field.type==="date"}));var label=_i18n.i18n.translate("kbn.management.createIndexPattern.stepTime.noTimeFieldsLabel",{defaultMessage:"The indices which match this index pattern don't contain any time fields."});if(dateFields.length===0){return[{display:label}]}var disabledDividerOption={isDisabled:true,display:"",fieldName:""};var noTimeFieldLabel=_i18n.i18n.translate("kbn.management.createIndexPattern.stepTime.noTimeFieldOptionLabel",{defaultMessage:"I don't want to use the Time Filter"});var noTimeFieldOption={display:noTimeFieldLabel,fieldName:undefined};return[].concat(_toConsumableArray(dateFields.map((function(field){return{display:field.name,fieldName:field.name}}))),[disabledDividerOption,noTimeFieldOption])}},1966:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});Object.defineProperty(exports,"LoadingIndices",{enumerable:true,get:function get(){return _loading_indices.LoadingIndices}});var _loading_indices=__webpack_require__(1967)},1967:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.LoadingIndices=void 0;var _react=_interopRequireDefault(__webpack_require__(0));var _eui=__webpack_require__(3);var _react2=__webpack_require__(4);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _extends(){_extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source){if(Object.prototype.hasOwnProperty.call(source,key)){target[key]=source[key]}}}return target};return _extends.apply(this,arguments)}var LoadingIndices=function LoadingIndices(_ref){var rest=Object.assign({},_ref);return _react.default.createElement(_eui.EuiFlexGroup,_extends({justifyContent:"center",alignItems:"center"},rest),_react.default.createElement(_eui.EuiFlexItem,{grow:false},_react.default.createElement(_eui.EuiLoadingSpinner,{size:"m"})),_react.default.createElement(_eui.EuiFlexItem,{grow:false},_react.default.createElement(_eui.EuiText,null,_react.default.createElement(_eui.EuiTextColor,{color:"subdued"},_react.default.createElement(_react2.FormattedMessage,{id:"kbn.management.createIndexPattern.step.loadingHeader",defaultMessage:"Looking for matching indices"}))),_react.default.createElement(_eui.EuiText,{size:"s",style:{textAlign:"center"}},_react.default.createElement(_eui.EuiTextColor,{color:"subdued"},_react.default.createElement(_react2.FormattedMessage,{id:"kbn.management.createIndexPattern.step.loadingLabel",defaultMessage:"Just a sec"})))))};exports.LoadingIndices=LoadingIndices},1968:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});Object.defineProperty(exports,"StatusMessage",{enumerable:true,get:function get(){return _status_message.StatusMessage}});var _status_message=__webpack_require__(1969)},1969:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.StatusMessage=void 0;var _react=_interopRequireDefault(__webpack_require__(0));var _eui=__webpack_require__(3);var _react2=__webpack_require__(4);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var StatusMessage=function StatusMessage(_ref){var _ref$matchedIndices=_ref.matchedIndices,_ref$matchedIndices$a=_ref$matchedIndices.allIndices,allIndices=_ref$matchedIndices$a===void 0?[]:_ref$matchedIndices$a,_ref$matchedIndices$e=_ref$matchedIndices.exactMatchedIndices,exactMatchedIndices=_ref$matchedIndices$e===void 0?[]:_ref$matchedIndices$e,_ref$matchedIndices$p=_ref$matchedIndices.partialMatchedIndices,partialMatchedIndices=_ref$matchedIndices$p===void 0?[]:_ref$matchedIndices$p,isIncludingSystemIndices=_ref.isIncludingSystemIndices,query=_ref.query,showSystemIndicies=_ref.showSystemIndicies;var statusIcon;var statusMessage;var statusColor;var allIndicesLength=allIndices.length;if(query.length===0){statusIcon=null;statusColor="default";if(allIndicesLength>1){statusMessage=_react.default.createElement("span",null,_react.default.createElement(_react2.FormattedMessage,{id:"kbn.management.createIndexPattern.step.status.matchAnyLabel.matchAnyDetail",defaultMessage:"Your index pattern can match any of your {strongIndices}, below.",values:{strongIndices:_react.default.createElement("strong",null,allIndicesLength," indices")}}))}else if(!isIncludingSystemIndices&&showSystemIndicies){statusMessage=_react.default.createElement("span",null,_react.default.createElement(_react2.FormattedMessage,{id:"kbn.management.createIndexPattern.step.status.noSystemIndicesWithPromptLabel",defaultMessage:"No Elasticsearch indices match your pattern. To view the matching system indices, toggle the switch in the upper right."}))}else{statusMessage=_react.default.createElement("span",null,_react.default.createElement(_react2.FormattedMessage,{id:"kbn.management.createIndexPattern.step.status.noSystemIndicesLabel",defaultMessage:"No Elasticsearch indices match your pattern."}))}}else if(exactMatchedIndices.length){statusIcon="check";statusColor="secondary";statusMessage=_react.default.createElement("span",null,"",_react.default.createElement(_react2.FormattedMessage,{id:"kbn.management.createIndexPattern.step.status.successLabel.successDetail",defaultMessage:"{strongSuccess} Your index pattern matches {strongIndices}.",values:{strongSuccess:_react.default.createElement("strong",null,_react.default.createElement(_react2.FormattedMessage,{id:"kbn.management.createIndexPattern.step.status.successLabel.strongSuccessLabel",defaultMessage:"Success!"})),strongIndices:_react.default.createElement("strong",null,_react.default.createElement(_react2.FormattedMessage,{id:"kbn.management.createIndexPattern.step.status.successLabel.strongIndicesLabel",defaultMessage:"{indicesLength, plural, one {# index} other {# indices}}",values:{indicesLength:exactMatchedIndices.length}}))}}))}else if(partialMatchedIndices.length){statusIcon=null;statusColor="default";statusMessage=_react.default.createElement("span",null,_react.default.createElement(_react2.FormattedMessage,{id:"kbn.management.createIndexPattern.step.status.partialMatchLabel.partialMatchDetail",defaultMessage:"Your index pattern doesn't match any indices, but you have {strongIndices} which {matchedIndicesLength, plural, one {looks} other {look}} similar.",values:{matchedIndicesLength:partialMatchedIndices.length,strongIndices:_react.default.createElement("strong",null,_react.default.createElement(_react2.FormattedMessage,{id:"kbn.management.createIndexPattern.step.status.partialMatchLabel.strongIndicesLabel",defaultMessage:"{matchedIndicesLength, plural, one {# index} other {# indices}}",values:{matchedIndicesLength:partialMatchedIndices.length}}))}}))}else if(allIndicesLength){statusIcon=null;statusColor="default";statusMessage=_react.default.createElement("span",null,_react.default.createElement(_react2.FormattedMessage,{id:"kbn.management.createIndexPattern.step.status.notMatchLabel.notMatchDetail",defaultMessage:"The index pattern you've entered doesn't match any indices. You can match {indicesLength, plural, one {your} other {any of your}} {strongIndices}, below.",values:{strongIndices:_react.default.createElement("strong",null,_react.default.createElement(_react2.FormattedMessage,{id:"kbn.management.createIndexPattern.step.status.notMatchLabel.allIndicesLabel",defaultMessage:"{indicesLength, plural, one {# index} other {# indices}}",values:{indicesLength:allIndicesLength}})),indicesLength:allIndicesLength}}))}return _react.default.createElement(_eui.EuiText,{size:"s","data-test-subj":"createIndexPatternStatusMessage"},_react.default.createElement(_eui.EuiTextColor,{color:statusColor},statusIcon?_react.default.createElement(_eui.EuiIcon,{type:statusIcon}):null,statusMessage))};exports.StatusMessage=StatusMessage},1970:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});Object.defineProperty(exports,"IndicesList",{enumerable:true,get:function get(){return _indices_list.IndicesList}});var _indices_list=__webpack_require__(1971)},1971:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.IndicesList=void 0;var _react=_interopRequireWildcard(__webpack_require__(0));var _propTypes=_interopRequireDefault(__webpack_require__(5));var _constants=__webpack_require__(178);var _eui=__webpack_require__(3);var _services=__webpack_require__(47);var _react2=__webpack_require__(4);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _interopRequireWildcard(obj){if(obj&&obj.__esModule){return obj}else{var newObj={};if(obj!=null){for(var key in obj){if(Object.prototype.hasOwnProperty.call(obj,key)){var desc=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):{};if(desc.get||desc.set){Object.defineProperty(newObj,key,desc)}else{newObj[key]=obj[key]}}}}newObj.default=obj;return newObj}}function _typeof(obj){if(typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"){_typeof=function _typeof(obj){return typeof obj}}else{_typeof=function _typeof(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj}}return _typeof(obj)}function _objectWithoutProperties(source,excluded){if(source==null)return{};var target=_objectWithoutPropertiesLoose(source,excluded);var key,i;if(Object.getOwnPropertySymbols){var sourceSymbolKeys=Object.getOwnPropertySymbols(source);for(i=0;i<sourceSymbolKeys.length;i++){key=sourceSymbolKeys[i];if(excluded.indexOf(key)>=0)continue;if(!Object.prototype.propertyIsEnumerable.call(source,key))continue;target[key]=source[key]}}return target}function _objectWithoutPropertiesLoose(source,excluded){if(source==null)return{};var target={};var sourceKeys=Object.keys(source);var key,i;for(i=0;i<sourceKeys.length;i++){key=sourceKeys[i];if(excluded.indexOf(key)>=0)continue;target[key]=source[key]}return target}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);return Constructor}function _possibleConstructorReturn(self,call){if(call&&(_typeof(call)==="object"||typeof call==="function")){return call}return _assertThisInitialized(self)}function _getPrototypeOf(o){_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o)};return _getPrototypeOf(o)}function _assertThisInitialized(self){if(self===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return self}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function")}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:true,configurable:true}});if(superClass)_setPrototypeOf(subClass,superClass)}function _setPrototypeOf(o,p){_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(o,p){o.__proto__=p;return o};return _setPrototypeOf(o,p)}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}var IndicesList=function(_Component){_inherits(IndicesList,_Component);function IndicesList(props){var _this;_classCallCheck(this,IndicesList);_this=_possibleConstructorReturn(this,_getPrototypeOf(IndicesList).call(this,props));_defineProperty(_assertThisInitialized(_this),"resetPageTo0",(function(){return _this.onChangePage(0)}));_defineProperty(_assertThisInitialized(_this),"onChangePage",(function(page){_this.pager.goToPageIndex(page);_this.setState({page:page})}));_defineProperty(_assertThisInitialized(_this),"onChangePerPage",(function(perPage){_this.pager.setItemsPerPage(perPage);_this.setState({perPage:perPage});_this.resetPageTo0();_this.closePerPageControl()}));_defineProperty(_assertThisInitialized(_this),"openPerPageControl",(function(){_this.setState({isPerPageControlOpen:true})}));_defineProperty(_assertThisInitialized(_this),"closePerPageControl",(function(){_this.setState({isPerPageControlOpen:false})}));_this.state={page:0,perPage:_constants.PER_PAGE_INCREMENTS[1],isPerPageControlOpen:false};_this.pager=new _services.Pager(props.indices.length,_this.state.perPage,_this.state.page);return _this}_createClass(IndicesList,[{key:"UNSAFE_componentWillReceiveProps",value:function UNSAFE_componentWillReceiveProps(nextProps){if(nextProps.indices.length!==this.props.indices.length){this.pager.setTotalItems(nextProps.indices.length);this.resetPageTo0()}}},{key:"renderPagination",value:function renderPagination(){var _this2=this;var _this$state=this.state,perPage=_this$state.perPage,page=_this$state.page,isPerPageControlOpen=_this$state.isPerPageControlOpen;var button=_react.default.createElement(_eui.EuiButtonEmpty,{size:"s",color:"text",iconType:"arrowDown",iconSide:"right",onClick:this.openPerPageControl},_react.default.createElement(_react2.FormattedMessage,{id:"kbn.management.createIndexPattern.step.pagingLabel",defaultMessage:"Rows per page: {perPage}",values:{perPage:perPage}}));var items=_constants.PER_PAGE_INCREMENTS.map((function(increment){return _react.default.createElement(_eui.EuiContextMenuItem,{key:increment,icon:"empty",onClick:function onClick(){return _this2.onChangePerPage(increment)}},increment)}));var pageCount=this.pager.getTotalPages();var paginationControls=pageCount>1?_react.default.createElement(_eui.EuiFlexItem,{grow:false},_react.default.createElement(_eui.EuiPagination,{pageCount:pageCount,activePage:page,onPageClick:this.onChangePage})):null;return _react.default.createElement(_eui.EuiFlexGroup,{justifyContent:"spaceBetween",alignItems:"center"},_react.default.createElement(_eui.EuiFlexItem,{grow:false},_react.default.createElement(_eui.EuiPopover,{id:"customizablePagination",button:button,isOpen:isPerPageControlOpen,closePopover:this.closePerPageControl,panelPaddingSize:"none",withTitle:true},_react.default.createElement(_eui.EuiContextMenuPanel,{items:items}))),paginationControls)}},{key:"highlightIndexName",value:function highlightIndexName(indexName,query){var queryIdx=indexName.indexOf(query);if(!query||queryIdx===-1){return indexName}var preStr=indexName.substr(0,queryIdx);var postStr=indexName.substr(queryIdx+query.length);return _react.default.createElement("span",null,preStr,_react.default.createElement("strong",null,query),postStr)}},{key:"render",value:function render(){var _this3=this;var _this$props=this.props,indices=_this$props.indices,query=_this$props.query,rest=_objectWithoutProperties(_this$props,["indices","query"]);var queryWithoutWildcard=query.endsWith("*")?query.substr(0,query.length-1):query;var paginatedIndices=indices.slice(this.pager.firstItemIndex,this.pager.lastItemIndex+1);var rows=paginatedIndices.map((function(index,key){return _react.default.createElement(_eui.EuiTableRow,{key:key},_react.default.createElement(_eui.EuiTableRowCell,null,_this3.highlightIndexName(index.name,queryWithoutWildcard)),_react.default.createElement(_eui.EuiTableRowCell,null,index.tags.map((function(tag){return _react.default.createElement(_eui.EuiBadge,{key:"index_".concat(key,"_tag_").concat(tag.key),color:"primary"},tag.name)}))))}));return _react.default.createElement("div",rest,_react.default.createElement(_eui.EuiTable,null,_react.default.createElement(_eui.EuiTableBody,null,rows)),_react.default.createElement(_eui.EuiSpacer,{size:"m"}),this.renderPagination())}}]);return IndicesList}(_react.Component);exports.IndicesList=IndicesList;_defineProperty(IndicesList,"propTypes",{indices:_propTypes.default.array.isRequired,query:_propTypes.default.string.isRequired})},1972:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});Object.defineProperty(exports,"Header",{enumerable:true,get:function get(){return _header.Header}});var _header=__webpack_require__(1973)},1973:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.Header=void 0;var _react=_interopRequireDefault(__webpack_require__(0));var _eui=__webpack_require__(3);var _i18n=__webpack_require__(1);var _react2=__webpack_require__(4);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _objectWithoutProperties(source,excluded){if(source==null)return{};var target=_objectWithoutPropertiesLoose(source,excluded);var key,i;if(Object.getOwnPropertySymbols){var sourceSymbolKeys=Object.getOwnPropertySymbols(source);for(i=0;i<sourceSymbolKeys.length;i++){key=sourceSymbolKeys[i];if(excluded.indexOf(key)>=0)continue;if(!Object.prototype.propertyIsEnumerable.call(source,key))continue;target[key]=source[key]}}return target}function _objectWithoutPropertiesLoose(source,excluded){if(source==null)return{};var target={};var sourceKeys=Object.keys(source);var key,i;for(i=0;i<sourceKeys.length;i++){key=sourceKeys[i];if(excluded.indexOf(key)>=0)continue;target[key]=source[key]}return target}var Header=function Header(_ref){var isInputInvalid=_ref.isInputInvalid,errors=_ref.errors,characterList=_ref.characterList,query=_ref.query,onQueryChanged=_ref.onQueryChanged,goToNextStep=_ref.goToNextStep,isNextStepDisabled=_ref.isNextStepDisabled,rest=_objectWithoutProperties(_ref,["isInputInvalid","errors","characterList","query","onQueryChanged","goToNextStep","isNextStepDisabled"]);return _react.default.createElement("div",rest,_react.default.createElement(_eui.EuiTitle,{size:"s"},_react.default.createElement("h2",null,_react.default.createElement(_react2.FormattedMessage,{id:"kbn.management.createIndexPattern.stepHeader",defaultMessage:"Step 1 of 2: Define index pattern"}))),_react.default.createElement(_eui.EuiSpacer,{size:"m"}),_react.default.createElement(_eui.EuiFlexGroup,{justifyContent:"spaceBetween",alignItems:"flexEnd"},_react.default.createElement(_eui.EuiFlexItem,{grow:false},_react.default.createElement(_eui.EuiForm,{isInvalid:isInputInvalid},_react.default.createElement(_eui.EuiFormRow,{label:_react.default.createElement(_react2.FormattedMessage,{id:"kbn.management.createIndexPattern.step.indexPatternLabel",defaultMessage:"Index pattern"}),isInvalid:isInputInvalid,error:errors,helpText:_react.default.createElement("div",null,_react.default.createElement("p",null,_react.default.createElement(_react2.FormattedMessage,{id:"kbn.management.createIndexPattern.step.indexPattern.allowLabel",defaultMessage:"You can use a {asterisk} as a wildcard in your index pattern.",values:{asterisk:_react.default.createElement("strong",null,"*")}})),_react.default.createElement("p",null,_react.default.createElement(_react2.FormattedMessage,{id:"kbn.management.createIndexPattern.step.indexPattern.disallowLabel",defaultMessage:"You can't use spaces or the characters {characterList}.",values:{characterList:_react.default.createElement("strong",null,characterList)}})))},_react.default.createElement(_eui.EuiFieldText,{name:"indexPattern",placeholder:_i18n.i18n.translate("kbn.management.createIndexPattern.step.indexPatternPlaceholder",{defaultMessage:"index-name-*"}),value:query,isInvalid:isInputInvalid,onChange:onQueryChanged,"data-test-subj":"createIndexPatternNameInput"})))),_react.default.createElement(_eui.EuiFlexItem,{grow:false},_react.default.createElement(_eui.EuiButton,{iconType:"arrowRight",onClick:function onClick(){return goToNextStep(query)},isDisabled:isNextStepDisabled,"data-test-subj":"createIndexPatternGoToStep2Button"},_react.default.createElement(_react2.FormattedMessage,{id:"kbn.management.createIndexPattern.step.nextStepButton",defaultMessage:"Next step"})))))};exports.Header=Header},1974:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});Object.defineProperty(exports,"StepTimeField",{enumerable:true,get:function get(){return _step_time_field.StepTimeField}});var _step_time_field=__webpack_require__(1975)},1975:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.StepTimeField=void 0;var _react=_interopRequireWildcard(__webpack_require__(0));var _propTypes=_interopRequireDefault(__webpack_require__(5));var _lib=__webpack_require__(269);var _header=__webpack_require__(1976);var _time_field=__webpack_require__(1978);var _advanced_options=__webpack_require__(1981);var _action_buttons=__webpack_require__(1983);var _eui=__webpack_require__(3);var _react2=__webpack_require__(4);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _interopRequireWildcard(obj){if(obj&&obj.__esModule){return obj}else{var newObj={};if(obj!=null){for(var key in obj){if(Object.prototype.hasOwnProperty.call(obj,key)){var desc=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):{};if(desc.get||desc.set){Object.defineProperty(newObj,key,desc)}else{newObj[key]=obj[key]}}}}newObj.default=obj;return newObj}}function _typeof(obj){if(typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"){_typeof=function _typeof(obj){return typeof obj}}else{_typeof=function _typeof(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj}}return _typeof(obj)}function _toConsumableArray(arr){return _arrayWithoutHoles(arr)||_iterableToArray(arr)||_nonIterableSpread()}function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance")}function _iterableToArray(iter){if(Symbol.iterator in Object(iter)||Object.prototype.toString.call(iter)==="[object Arguments]")return Array.from(iter)}function _arrayWithoutHoles(arr){if(Array.isArray(arr)){for(var i=0,arr2=new Array(arr.length);i<arr.length;i++){arr2[i]=arr[i]}return arr2}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);return Constructor}function _possibleConstructorReturn(self,call){if(call&&(_typeof(call)==="object"||typeof call==="function")){return call}return _assertThisInitialized(self)}function _getPrototypeOf(o){_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o)};return _getPrototypeOf(o)}function _assertThisInitialized(self){if(self===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return self}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function")}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:true,configurable:true}});if(superClass)_setPrototypeOf(subClass,superClass)}function _setPrototypeOf(o,p){_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(o,p){o.__proto__=p;return o};return _setPrototypeOf(o,p)}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}var StepTimeField=function(_Component){_inherits(StepTimeField,_Component);function StepTimeField(props){var _this;_classCallCheck(this,StepTimeField);_this=_possibleConstructorReturn(this,_getPrototypeOf(StepTimeField).call(this,props));_defineProperty(_assertThisInitialized(_this),"mounted",false);_defineProperty(_assertThisInitialized(_this),"fetchTimeFields",(function _callee(){var _this$props,indexPatternsService,pattern,getFetchForWildcardOptions,indexPattern,fields,timeFields;return regeneratorRuntime.async((function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_this$props=_this.props,indexPatternsService=_this$props.indexPatternsService,pattern=_this$props.indexPattern;getFetchForWildcardOptions=_this.props.indexPatternCreationType.getFetchForWildcardOptions;_context.next=4;return regeneratorRuntime.awrap(indexPatternsService.make());case 4:indexPattern=_context.sent;indexPattern.title=pattern;_this.setState({isFetchingTimeFields:true});_context.next=9;return regeneratorRuntime.awrap((0,_lib.ensureMinimumTime)(indexPattern.fieldsFetcher.fetchForWildcard(pattern,getFetchForWildcardOptions())));case 9:fields=_context.sent;timeFields=(0,_lib.extractTimeFields)(fields);_this.setState({timeFields:timeFields,isFetchingTimeFields:false});case 12:case"end":return _context.stop()}}}))}));_defineProperty(_assertThisInitialized(_this),"onTimeFieldChanged",(function(e){var value=e.target.value;var timeField=_this.state.timeFields.find((function(timeField){return timeField.fieldName===value}));var validSelection=value!=="";_this.setState({selectedTimeField:timeField?timeField.fieldName:undefined,timeFieldSet:validSelection})}));_defineProperty(_assertThisInitialized(_this),"onChangeIndexPatternId",(function(e){_this.setState({indexPatternId:e.target.value})}));_defineProperty(_assertThisInitialized(_this),"toggleAdvancedOptions",(function(){_this.setState((function(state){return{isAdvancedOptionsVisible:!state.isAdvancedOptionsVisible}}))}));_defineProperty(_assertThisInitialized(_this),"createIndexPattern",(function _callee2(){var createIndexPattern,_this$state,selectedTimeField,indexPatternId;return regeneratorRuntime.async((function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:createIndexPattern=_this.props.createIndexPattern;_this$state=_this.state,selectedTimeField=_this$state.selectedTimeField,indexPatternId=_this$state.indexPatternId;_this.setState({isCreating:true});_context2.prev=3;_context2.next=6;return regeneratorRuntime.awrap(createIndexPattern(selectedTimeField,indexPatternId));case 6:_context2.next=13;break;case 8:_context2.prev=8;_context2.t0=_context2["catch"](3);if(_this.mounted){_context2.next=12;break}return _context2.abrupt("return");case 12:_this.setState({error:_context2.t0 instanceof Error?_context2.t0.message:String(_context2.t0),isCreating:false});case 13:case"end":return _context2.stop()}}}),null,null,[[3,8]])}));_this.state={error:"",timeFields:[],selectedTimeField:undefined,timeFieldSet:false,isAdvancedOptionsVisible:false,isFetchingTimeFields:false,isCreating:false,indexPatternId:"",indexPatternType:props.indexPatternCreationType.getIndexPatternType(),indexPatternName:props.indexPatternCreationType.getIndexPatternName()};return _this}_createClass(StepTimeField,[{key:"componentDidMount",value:function componentDidMount(){this.mounted=true;this.fetchTimeFields()}},{key:"componentWillUnmount",value:function componentWillUnmount(){this.mounted=false}},{key:"formatErrorMessage",value:function formatErrorMessage(message){return message==="Conflict"?_react.default.createElement(_react2.FormattedMessage,{id:"kbn.management.createIndexPattern.stepTime.patterAlreadyExists",defaultMessage:"Custom index pattern ID already exists."}):message}},{key:"render",value:function render(){var _this$state2=this.state,timeFields=_this$state2.timeFields,selectedTimeField=_this$state2.selectedTimeField,timeFieldSet=_this$state2.timeFieldSet,isAdvancedOptionsVisible=_this$state2.isAdvancedOptionsVisible,indexPatternId=_this$state2.indexPatternId,isCreating=_this$state2.isCreating,isFetchingTimeFields=_this$state2.isFetchingTimeFields,indexPatternName=_this$state2.indexPatternName;if(isCreating){return _react.default.createElement(_eui.EuiPanel,null,_react.default.createElement(_eui.EuiFlexGroup,{alignItems:"center"},_react.default.createElement(_eui.EuiFlexItem,{grow:false},_react.default.createElement(_eui.EuiLoadingSpinner,null)),_react.default.createElement(_eui.EuiFlexItem,{grow:false},_react.default.createElement(_eui.EuiText,null,_react.default.createElement(_react2.FormattedMessage,{id:"kbn.management.createIndexPattern.stepTime.creatingLabel",defaultMessage:"Creating index pattern"})))))}var _this$props2=this.props,indexPattern=_this$props2.indexPattern,goToPreviousStep=_this$props2.goToPreviousStep;var timeFieldOptions=timeFields?[{text:"",value:""}].concat(_toConsumableArray(timeFields.map((function(timeField){return{text:timeField.display,value:timeField.fieldName,disabled:timeFields.isDisabled}})))):[];var showTimeField=!timeFields||timeFields.length>1;var submittable=!showTimeField||timeFieldSet;var error=this.state.error?_react.default.createElement(_react.default.Fragment,null,_react.default.createElement(_eui.EuiCallOut,{title:_react.default.createElement(_react2.FormattedMessage,{id:"kbn.management.createIndexPattern.stepTime.error",defaultMessage:"Error"}),color:"danger",iconType:"cross"},_react.default.createElement("p",null,this.formatErrorMessage(this.state.error))),_react.default.createElement(_eui.EuiSpacer,{size:"m"})):null;return _react.default.createElement(_eui.EuiPanel,{paddingSize:"l"},_react.default.createElement(_header.Header,{indexPattern:indexPattern,indexPatternName:indexPatternName}),_react.default.createElement(_eui.EuiSpacer,{size:"m"}),_react.default.createElement(_time_field.TimeField,{isVisible:showTimeField,fetchTimeFields:this.fetchTimeFields,timeFieldOptions:timeFieldOptions,isLoading:isFetchingTimeFields,selectedTimeField:selectedTimeField,onTimeFieldChanged:this.onTimeFieldChanged}),_react.default.createElement(_eui.EuiSpacer,{size:"s"}),_react.default.createElement(_advanced_options.AdvancedOptions,{isVisible:isAdvancedOptionsVisible,indexPatternId:indexPatternId,toggleAdvancedOptions:this.toggleAdvancedOptions,onChangeIndexPatternId:this.onChangeIndexPatternId}),_react.default.createElement(_eui.EuiSpacer,{size:"m"}),error,_react.default.createElement(_action_buttons.ActionButtons,{goToPreviousStep:goToPreviousStep,submittable:submittable,createIndexPattern:this.createIndexPattern}))}}]);return StepTimeField}(_react.Component);exports.StepTimeField=StepTimeField;_defineProperty(StepTimeField,"propTypes",{indexPattern:_propTypes.default.string.isRequired,indexPatternsService:_propTypes.default.object.isRequired,goToPreviousStep:_propTypes.default.func.isRequired,createIndexPattern:_propTypes.default.func.isRequired,indexPatternCreationType:_propTypes.default.object.isRequired})},1976:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});Object.defineProperty(exports,"Header",{enumerable:true,get:function get(){return _header.Header}});var _header=__webpack_require__(1977)},1977:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.Header=void 0;var _react=_interopRequireDefault(__webpack_require__(0));var _eui=__webpack_require__(3);var _react2=__webpack_require__(4);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var Header=function Header(_ref){var indexPattern=_ref.indexPattern,indexPatternName=_ref.indexPatternName;return _react.default.createElement("div",null,_react.default.createElement(_eui.EuiTitle,{size:"s"},_react.default.createElement("h2",null,_react.default.createElement(_react2.FormattedMessage,{id:"kbn.management.createIndexPattern.stepTimeHeader",defaultMessage:"Step 2 of 2: Configure settings"}))),_react.default.createElement(_eui.EuiSpacer,{size:"m"}),_react.default.createElement(_eui.EuiText,{color:"subdued"},_react.default.createElement(_react2.FormattedMessage,{id:"kbn.management.createIndexPattern.stepTimeLabel",defaultMessage:"You've defined {indexPattern} as your {indexPatternName}. Now you can specify some settings before we create it.",values:{indexPattern:_react.default.createElement("strong",null,indexPattern),indexPatternName:indexPatternName}})))};exports.Header=Header},1978:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});Object.defineProperty(exports,"TimeField",{enumerable:true,get:function get(){return _time_field.TimeField}});var _time_field=__webpack_require__(1979)},1979:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.TimeField=void 0;var _react=_interopRequireDefault(__webpack_require__(0));__webpack_require__(1980);var _eui=__webpack_require__(3);var _i18n=__webpack_require__(1);var _react2=__webpack_require__(4);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var TimeField=function TimeField(_ref){var isVisible=_ref.isVisible,fetchTimeFields=_ref.fetchTimeFields,timeFieldOptions=_ref.timeFieldOptions,isLoading=_ref.isLoading,selectedTimeField=_ref.selectedTimeField,onTimeFieldChanged=_ref.onTimeFieldChanged;return _react.default.createElement(_eui.EuiForm,null,isVisible?_react.default.createElement(_eui.EuiFormRow,{label:_react.default.createElement(_eui.EuiFlexGroup,{gutterSize:"xs",justifyContent:"spaceBetween",alignItems:"center"},_react.default.createElement(_eui.EuiFlexItem,{grow:false},_react.default.createElement("span",null,_react.default.createElement(_react2.FormattedMessage,{id:"kbn.management.createIndexPattern.stepTime.fieldHeader",defaultMessage:"Time Filter field name"}))),_react.default.createElement(_eui.EuiFlexItem,{grow:false},isLoading?_react.default.createElement(_eui.EuiLoadingSpinner,{size:"s"}):_react.default.createElement(_eui.EuiLink,{className:"timeFieldRefreshButton",onClick:fetchTimeFields},_react.default.createElement(_react2.FormattedMessage,{id:"kbn.management.createIndexPattern.stepTime.refreshButton",defaultMessage:"Refresh"})))),helpText:_react.default.createElement("div",null,_react.default.createElement("p",null,_react.default.createElement(_react2.FormattedMessage,{id:"kbn.management.createIndexPattern.stepTime.fieldLabel",defaultMessage:"The Time Filter will use this field to filter your data by time."})),_react.default.createElement("p",null,_react.default.createElement(_react2.FormattedMessage,{id:"kbn.management.createIndexPattern.stepTime.fieldWarningLabel",defaultMessage:"You can choose not to have a time field, but you will not be able to narrow down your data by a time range."})))},isLoading?_react.default.createElement(_eui.EuiSelect,{name:"timeField","data-test-subj":"createIndexPatternTimeFieldSelect",options:[{text:_i18n.i18n.translate("kbn.management.createIndexPattern.stepTime.field.loadingDropDown",{defaultMessage:"Loading"}),value:""}],disabled:true}):_react.default.createElement(_eui.EuiSelect,{name:"timeField","data-test-subj":"createIndexPatternTimeFieldSelect",options:timeFieldOptions,isLoading:isLoading,disabled:isLoading,value:selectedTimeField,onChange:onTimeFieldChanged})):_react.default.createElement(_eui.EuiText,null,_react.default.createElement("p",null,_react.default.createElement(_react2.FormattedMessage,{id:"kbn.management.createIndexPattern.stepTime.field.noTimeFieldsLabel",defaultMessage:"The indices which match this index pattern don't contain any time fields."}))))};exports.TimeField=TimeField},1980:function(module,exports,__webpack_require__){},1981:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});Object.defineProperty(exports,"AdvancedOptions",{enumerable:true,get:function get(){return _advanced_options.AdvancedOptions}});var _advanced_options=__webpack_require__(1982)},1982:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.AdvancedOptions=void 0;var _react=_interopRequireDefault(__webpack_require__(0));var _eui=__webpack_require__(3);var _i18n=__webpack_require__(1);var _react2=__webpack_require__(4);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var AdvancedOptions=function AdvancedOptions(_ref){var isVisible=_ref.isVisible,indexPatternId=_ref.indexPatternId,toggleAdvancedOptions=_ref.toggleAdvancedOptions,onChangeIndexPatternId=_ref.onChangeIndexPatternId;return _react.default.createElement("div",null,_react.default.createElement(_eui.EuiButtonEmpty,{iconType:isVisible?"arrowDown":"arrowRight",onClick:toggleAdvancedOptions},isVisible?_react.default.createElement(_react2.FormattedMessage,{id:"kbn.management.createIndexPattern.stepTime.options.hideButton",defaultMessage:"Hide advanced options"}):_react.default.createElement(_react2.FormattedMessage,{id:"kbn.management.createIndexPattern.stepTime.options.showButton",defaultMessage:"Show advanced options"})),_react.default.createElement(_eui.EuiSpacer,{size:"xs"}),isVisible?_react.default.createElement(_eui.EuiForm,null,_react.default.createElement(_eui.EuiFormRow,{label:_react.default.createElement(_react2.FormattedMessage,{id:"kbn.management.createIndexPattern.stepTime.options.patternHeader",defaultMessage:"Custom index pattern ID"}),helpText:_react.default.createElement(_react2.FormattedMessage,{id:"kbn.management.createIndexPattern.stepTime.options.patternLabel",defaultMessage:"Kibana will provide a unique identifier for each index pattern. If you do not want to use this unique ID, enter a custom one."})},_react.default.createElement(_eui.EuiFieldText,{name:"indexPatternId","data-test-subj":"createIndexPatternIdInput",value:indexPatternId,onChange:onChangeIndexPatternId,placeholder:_i18n.i18n.translate("kbn.management.createIndexPattern.stepTime.options.patternPlaceholder",{defaultMessage:"custom-index-pattern-id"})}))):null)};exports.AdvancedOptions=AdvancedOptions},1983:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});Object.defineProperty(exports,"ActionButtons",{enumerable:true,get:function get(){return _action_buttons.ActionButtons}});var _action_buttons=__webpack_require__(1984)},1984:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.ActionButtons=void 0;var _react=_interopRequireDefault(__webpack_require__(0));var _eui=__webpack_require__(3);var _react2=__webpack_require__(4);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var ActionButtons=function ActionButtons(_ref){var goToPreviousStep=_ref.goToPreviousStep,submittable=_ref.submittable,createIndexPattern=_ref.createIndexPattern;return _react.default.createElement(_eui.EuiFlexGroup,{justifyContent:"flexEnd"},_react.default.createElement(_eui.EuiFlexItem,{grow:false},_react.default.createElement(_eui.EuiButtonEmpty,{iconType:"arrowLeft",onClick:goToPreviousStep},_react.default.createElement(_react2.FormattedMessage,{id:"kbn.management.createIndexPattern.stepTime.backButton",defaultMessage:"Back"}))),_react.default.createElement(_eui.EuiFlexItem,{grow:false},_react.default.createElement(_eui.EuiButton,{isDisabled:!submittable,"data-test-subj":"createIndexPatternButton",fill:true,onClick:createIndexPattern},_react.default.createElement(_react2.FormattedMessage,{id:"kbn.management.createIndexPattern.stepTime.createPatternButton",defaultMessage:"Create index pattern"}))))};exports.ActionButtons=ActionButtons},1985:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});Object.defineProperty(exports,"Header",{enumerable:true,get:function get(){return _header.Header}});var _header=__webpack_require__(1986)},1986:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.Header=void 0;var _react=_interopRequireWildcard(__webpack_require__(0));var _eui=__webpack_require__(3);var _i18n=__webpack_require__(1);var _react2=__webpack_require__(4);function _interopRequireWildcard(obj){if(obj&&obj.__esModule){return obj}else{var newObj={};if(obj!=null){for(var key in obj){if(Object.prototype.hasOwnProperty.call(obj,key)){var desc=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):{};if(desc.get||desc.set){Object.defineProperty(newObj,key,desc)}else{newObj[key]=obj[key]}}}}newObj.default=obj;return newObj}}var Header=function Header(_ref){var prompt=_ref.prompt,indexPatternName=_ref.indexPatternName,showSystemIndices=_ref.showSystemIndices,isIncludingSystemIndices=_ref.isIncludingSystemIndices,onChangeIncludingSystemIndices=_ref.onChangeIncludingSystemIndices,isBeta=_ref.isBeta;return _react.default.createElement("div",null,_react.default.createElement(_eui.EuiTitle,null,_react.default.createElement("h1",null,_react.default.createElement(_react2.FormattedMessage,{id:"kbn.management.createIndexPatternHeader",defaultMessage:"Create {indexPatternName}",values:{indexPatternName:indexPatternName}}),isBeta?_react.default.createElement(_react.Fragment,null," ",_react.default.createElement(_eui.EuiBetaBadge,{label:_i18n.i18n.translate("kbn.management.createIndexPattern.betaLabel",{defaultMessage:"Beta"})})):null)),_react.default.createElement(_eui.EuiFlexGroup,{justifyContent:"spaceBetween",alignItems:"flexEnd"},_react.default.createElement(_eui.EuiFlexItem,{grow:false},_react.default.createElement(_eui.EuiText,{size:"s"},_react.default.createElement("p",null,_react.default.createElement(_eui.EuiTextColor,{color:"subdued"},_react.default.createElement(_react2.FormattedMessage,{id:"kbn.management.createIndexPatternLabel",defaultMessage:"Kibana uses index patterns to retrieve data from Elasticsearch indices for things like visualizations."}))))),showSystemIndices?_react.default.createElement(_eui.EuiFlexItem,{grow:false},_react.default.createElement(_eui.EuiSwitch,{label:_react.default.createElement(_react2.FormattedMessage,{id:"kbn.management.createIndexPattern.includeSystemIndicesToggleSwitchLabel",defaultMessage:"Include system indices"}),id:"checkboxShowSystemIndices",checked:isIncludingSystemIndices,onChange:onChangeIncludingSystemIndices})):null),prompt?_react.default.createElement(_react.Fragment,null,_react.default.createElement(_eui.EuiSpacer,{size:"s"}),prompt):null,_react.default.createElement(_eui.EuiSpacer,{size:"m"}))};exports.Header=Header},1987:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});Object.defineProperty(exports,"LoadingState",{enumerable:true,get:function get(){return _loading_state.LoadingState}});var _loading_state=__webpack_require__(1988)},1988:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.LoadingState=void 0;var _react=_interopRequireDefault(__webpack_require__(0));var _eui=__webpack_require__(3);var _react2=__webpack_require__(4);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var LoadingState=function LoadingState(){return _react.default.createElement(_eui.EuiFlexGroup,{justifyContent:"center",alignItems:"center",direction:"column",gutterSize:"s"},_react.default.createElement(_eui.EuiFlexItem,{grow:false},_react.default.createElement(_eui.EuiTitle,{size:"s"},_react.default.createElement("h2",{style:{textAlign:"center"}},_react.default.createElement(_react2.FormattedMessage,{id:"kbn.management.createIndexPattern.loadingState.checkingLabel",defaultMessage:"Checking for Elasticsearch data"})))),_react.default.createElement(_eui.EuiFlexItem,{grow:false},_react.default.createElement(_eui.EuiLoadingSpinner,{size:"l"})))};exports.LoadingState=LoadingState},1989:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});Object.defineProperty(exports,"EmptyState",{enumerable:true,get:function get(){return _empty_state.EmptyState}});var _empty_state=__webpack_require__(1990)},1990:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.EmptyState=void 0;var _react=_interopRequireDefault(__webpack_require__(0));var _propTypes=_interopRequireDefault(__webpack_require__(5));var _eui=__webpack_require__(3);var _react2=__webpack_require__(4);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var EmptyState=function EmptyState(_ref){var onRefresh=_ref.onRefresh;return _react.default.createElement("div",null,_react.default.createElement(_eui.EuiCallOut,{color:"warning",title:_react.default.createElement(_react2.FormattedMessage,{id:"kbn.management.createIndexPattern.emptyStateHeader",defaultMessage:"Couldn't find any Elasticsearch data"})},_react.default.createElement("p",null,_react.default.createElement(_react2.FormattedMessage,{id:"kbn.management.createIndexPattern.emptyStateLabel.emptyStateDetail",defaultMessage:"{needToIndex} {learnHowLink} or {getStartedLink}",values:{needToIndex:_react.default.createElement(_eui.EuiTextColor,{color:"subdued"},_react.default.createElement(_react2.FormattedMessage,{id:"kbn.management.createIndexPattern.emptyStateLabel.needToIndexLabel",defaultMessage:"You'll need to index some data into Elasticsearch before you can create an index pattern."})),learnHowLink:_react.default.createElement(_eui.EuiLink,{href:"#/home/tutorial_directory"},_react.default.createElement(_react2.FormattedMessage,{id:"kbn.management.createIndexPattern.emptyStateLabel.learnHowLink",defaultMessage:"Learn how"})),getStartedLink:_react.default.createElement(_eui.EuiLink,{href:"#/home/tutorial_directory/sampleData"},_react.default.createElement(_react2.FormattedMessage,{id:"kbn.management.createIndexPattern.emptyStateLabel.getStartedLink",defaultMessage:"get started with some sample data sets."}))}})),_react.default.createElement(_eui.EuiButton,{iconType:"refresh",onClick:onRefresh,"data-test-subj":"refreshIndicesButton",color:"warning"},_react.default.createElement(_react2.FormattedMessage,{id:"kbn.management.createIndexPattern.emptyState.checkDataButton",defaultMessage:"Check for new data"}))))};exports.EmptyState=EmptyState;EmptyState.propTypes={onRefresh:_propTypes.default.func.isRequired}},1991:function(module,exports,__webpack_require__){"use strict";__webpack_require__(1992)},1992:function(module,exports,__webpack_require__){"use strict";var _lodash=_interopRequireDefault(__webpack_require__(2));__webpack_require__(1993);__webpack_require__(1996);var _doc_title=__webpack_require__(270);var _url=__webpack_require__(70);var _edit_sections=__webpack_require__(2017);var _notify=__webpack_require__(18);var _routes=_interopRequireDefault(__webpack_require__(31));var _modules=__webpack_require__(8);var _edit_index_pattern=_interopRequireDefault(__webpack_require__(2018));var _public=__webpack_require__(13);var _legacy=__webpack_require__(176);var _react=_interopRequireDefault(__webpack_require__(0));var _reactDom=__webpack_require__(9);var _source_filters_table=__webpack_require__(2019);var _indexed_fields_table=__webpack_require__(2027);var _scripted_fields_table=__webpack_require__(2033);var _i18n=__webpack_require__(1);var _i18n2=__webpack_require__(24);var _new_platform=__webpack_require__(6);var _breadcrumbs=__webpack_require__(177);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var REACT_SOURCE_FILTERS_DOM_ELEMENT_ID="reactSourceFiltersTable";var REACT_INDEXED_FIELDS_DOM_ELEMENT_ID="reactIndexedFieldsTable";var REACT_SCRIPTED_FIELDS_DOM_ELEMENT_ID="reactScriptedFieldsTable";function updateSourceFiltersTable($scope,$state){if($state.tab==="sourceFilters"){$scope.$$postDigest((function(){var node=document.getElementById(REACT_SOURCE_FILTERS_DOM_ELEMENT_ID);if(!node){return}(0,_reactDom.render)(_react.default.createElement(_i18n2.I18nContext,null,_react.default.createElement(_source_filters_table.SourceFiltersTable,{indexPattern:$scope.indexPattern,filterFilter:$scope.fieldFilter,fieldWildcardMatcher:$scope.fieldWildcardMatcher,onAddOrRemoveFilter:function onAddOrRemoveFilter(){$scope.editSections=$scope.editSectionsProvider($scope.indexPattern,$scope.fieldFilter,$scope.indexPatternListProvider);$scope.refreshFilters();$scope.$apply()}})),node)}))}else{destroySourceFiltersTable()}}function destroySourceFiltersTable(){var node=document.getElementById(REACT_SOURCE_FILTERS_DOM_ELEMENT_ID);node&&(0,_reactDom.unmountComponentAtNode)(node)}function updateScriptedFieldsTable($scope,$state){if($state.tab==="scriptedFields"){$scope.$$postDigest((function(){var node=document.getElementById(REACT_SCRIPTED_FIELDS_DOM_ELEMENT_ID);if(!node){return}(0,_reactDom.render)(_react.default.createElement(_i18n2.I18nContext,null,_react.default.createElement(_scripted_fields_table.ScriptedFieldsTable,{indexPattern:$scope.indexPattern,fieldFilter:$scope.fieldFilter,scriptedFieldLanguageFilter:$scope.scriptedFieldLanguageFilter,helpers:{redirectToRoute:function redirectToRoute(obj,route){$scope.kbnUrl.redirectToRoute(obj,route);$scope.$apply()},getRouteHref:function getRouteHref(obj,route){return $scope.kbnUrl.getRouteHref(obj,route)}},onRemoveField:function onRemoveField(){$scope.editSections=$scope.editSectionsProvider($scope.indexPattern,$scope.fieldFilter,$scope.indexPatternListProvider);$scope.refreshFilters();$scope.$apply()}})),node)}))}else{destroyScriptedFieldsTable()}}function destroyScriptedFieldsTable(){var node=document.getElementById(REACT_SCRIPTED_FIELDS_DOM_ELEMENT_ID);node&&(0,_reactDom.unmountComponentAtNode)(node)}function updateIndexedFieldsTable($scope,$state){if($state.tab==="indexedFields"){$scope.$$postDigest((function(){var node=document.getElementById(REACT_INDEXED_FIELDS_DOM_ELEMENT_ID);if(!node){return}(0,_reactDom.render)(_react.default.createElement(_i18n2.I18nContext,null,_react.default.createElement(_indexed_fields_table.IndexedFieldsTable,{fields:$scope.fields,indexPattern:$scope.indexPattern,fieldFilter:$scope.fieldFilter,fieldWildcardMatcher:$scope.fieldWildcardMatcher,indexedFieldTypeFilter:$scope.indexedFieldTypeFilter,helpers:{redirectToRoute:function redirectToRoute(obj,route){$scope.kbnUrl.redirectToRoute(obj,route);$scope.$apply()},getFieldInfo:$scope.getFieldInfo}})),node)}))}else{destroyIndexedFieldsTable()}}function destroyIndexedFieldsTable(){var node=document.getElementById(REACT_INDEXED_FIELDS_DOM_ELEMENT_ID);node&&(0,_reactDom.unmountComponentAtNode)(node)}_routes.default.when("/management/kibana/index_patterns/:indexPatternId",{template:_edit_index_pattern.default,k7Breadcrumbs:_breadcrumbs.getEditBreadcrumbs,resolve:{indexPattern:function indexPattern($route,Promise,redirectWhenMissing){var indexPatterns=_new_platform.npStart.plugins.data.indexPatterns;return Promise.resolve(indexPatterns.get($route.current.params.indexPatternId)).catch(redirectWhenMissing("/management/kibana/index_patterns"))}}});_modules.uiModules.get("apps/management").controller("managementIndexPatternsEdit",(function($scope,$location,$route,Promise,config,Private,AppState,confirmModal){var $state=$scope.state=new AppState;$scope.fieldWildcardMatcher=function(){for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key]}return _public.fieldWildcardMatcher.apply(void 0,args.concat([config.get("metaFields")]))};$scope.editSectionsProvider=Private(_edit_sections.IndicesEditSectionsProvider);$scope.kbnUrl=Private(_url.KbnUrlProvider);$scope.indexPattern=$route.current.locals.indexPattern;$scope.indexPatternListProvider=_legacy.setup.indexPattern.list;$scope.indexPattern.tags=_legacy.setup.indexPattern.list.getIndexPatternTags($scope.indexPattern,$scope.indexPattern.id===config.get("defaultIndex"));$scope.getFieldInfo=_legacy.setup.indexPattern.list.getFieldInfo.bind(_legacy.setup.indexPattern.list);_doc_title.docTitle.change($scope.indexPattern.title);var otherPatterns=_lodash.default.filter($route.current.locals.indexPatterns,(function(pattern){return pattern.id!==$scope.indexPattern.id}));$scope.$watch("indexPattern.fields",(function(){$scope.editSections=$scope.editSectionsProvider($scope.indexPattern,$scope.fieldFilter,_legacy.setup.indexPattern.list);$scope.refreshFilters();$scope.fields=$scope.indexPattern.getNonScriptedFields();updateIndexedFieldsTable($scope,$state);updateScriptedFieldsTable($scope,$state)}));$scope.migration={isMigrating:false,newTitle:$scope.indexPattern.getIndex()};$scope.migrate=function _callee(){return regeneratorRuntime.async((function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:$scope.migration.isMigrating=true;_context.next=3;return regeneratorRuntime.awrap($scope.indexPattern.migrate($scope.migration.newTitle));case 3:$scope.$evalAsync((function(){$scope.migration.isMigrating=false}));case 4:case"end":return _context.stop()}}}))};$scope.refreshFilters=function(){var indexedFieldTypes=[];var scriptedFieldLanguages=[];$scope.indexPattern.fields.forEach((function(field){if(field.scripted){scriptedFieldLanguages.push(field.lang)}else{indexedFieldTypes.push(field.type)}}));$scope.indexedFieldTypes=_lodash.default.unique(indexedFieldTypes);$scope.scriptedFieldLanguages=_lodash.default.unique(scriptedFieldLanguages)};$scope.changeFilter=function(filter,val){$scope[filter]=val||""};$scope.changeTab=function(obj){$state.tab=obj.index;updateIndexedFieldsTable($scope,$state);updateScriptedFieldsTable($scope,$state);updateSourceFiltersTable($scope,$state);$state.save()};$scope.$watch("state.tab",(function(tab){if(!tab)$scope.changeTab($scope.editSections[0])}));$scope.$watchCollection("indexPattern.fields",(function(){$scope.conflictFields=$scope.indexPattern.fields.filter((function(field){return field.type==="conflict"}))}));$scope.refreshFields=function(){var confirmMessage=_i18n.i18n.translate("kbn.management.editIndexPattern.refreshLabel",{defaultMessage:"This action resets the popularity counter of each field."});var confirmModalOptions={confirmButtonText:_i18n.i18n.translate("kbn.management.editIndexPattern.refreshButton",{defaultMessage:"Refresh"}),onConfirm:function onConfirm(){return regeneratorRuntime.async((function onConfirm$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:_context2.next=2;return regeneratorRuntime.awrap($scope.indexPattern.init(true));case 2:$scope.fields=$scope.indexPattern.getNonScriptedFields();case 3:case"end":return _context2.stop()}}}))},title:_i18n.i18n.translate("kbn.management.editIndexPattern.refreshHeader",{defaultMessage:"Refresh field list?"})};confirmModal(confirmMessage,confirmModalOptions)};$scope.removePattern=function(){function doRemove(){if($scope.indexPattern.id===config.get("defaultIndex")){config.remove("defaultIndex");if(otherPatterns.length){config.set("defaultIndex",otherPatterns[0].id)}}Promise.resolve($scope.indexPattern.destroy()).then((function(){$location.url("/management/kibana/index_patterns")})).catch(_notify.fatalError)}var confirmModalOptions={confirmButtonText:_i18n.i18n.translate("kbn.management.editIndexPattern.deleteButton",{defaultMessage:"Delete"}),onConfirm:doRemove,title:_i18n.i18n.translate("kbn.management.editIndexPattern.deleteHeader",{defaultMessage:"Delete index pattern?"})};confirmModal("",confirmModalOptions)};$scope.setDefaultPattern=function(){config.set("defaultIndex",$scope.indexPattern.id)};$scope.setIndexPatternsTimeField=function(field){if(field.type!=="date"){var errorMessage=_i18n.i18n.translate("kbn.management.editIndexPattern.notDateErrorMessage",{defaultMessage:"That field is a {fieldType} not a date.",values:{fieldType:field.type}});_notify.toastNotifications.addDanger(errorMessage);return}$scope.indexPattern.timeFieldName=field.name;return $scope.indexPattern.save()};$scope.$watch("fieldFilter",(function(){$scope.editSections=$scope.editSectionsProvider($scope.indexPattern,$scope.fieldFilter,_legacy.setup.indexPattern.list);if($scope.fieldFilter===undefined){return}switch($state.tab){case"indexedFields":updateIndexedFieldsTable($scope,$state);case"scriptedFields":updateScriptedFieldsTable($scope,$state);case"sourceFilters":updateSourceFiltersTable($scope,$state)}}));$scope.$watch("indexedFieldTypeFilter",(function(){if($scope.indexedFieldTypeFilter!==undefined&&$state.tab==="indexedFields"){updateIndexedFieldsTable($scope,$state)}}));$scope.$watch("scriptedFieldLanguageFilter",(function(){if($scope.scriptedFieldLanguageFilter!==undefined&&$state.tab==="scriptedFields"){updateScriptedFieldsTable($scope,$state)}}));$scope.$on("$destroy",(function(){destroyIndexedFieldsTable();destroyScriptedFieldsTable()}));updateScriptedFieldsTable($scope,$state);updateSourceFiltersTable($scope,$state)}))},1993:function(module,exports,__webpack_require__){"use strict";__webpack_require__(1994)},1994:function(module,exports,__webpack_require__){"use strict";var _modules=__webpack_require__(8);var _index_header=_interopRequireDefault(__webpack_require__(1995));function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}_modules.uiModules.get("apps/management").directive("kbnManagementIndexPatternsHeader",(function(config){return{restrict:"E",template:_index_header.default,replace:true,scope:{indexPattern:"=",setDefault:"&",refreshFields:"&",delete:"&"},link:function link($scope,$el,attrs){$scope.delete=attrs.delete?$scope.delete:null;$scope.setDefault=attrs.setDefault?$scope.setDefault:null;$scope.refreshFields=attrs.refreshFields?$scope.refreshFields:null;config.bindToScope($scope,"defaultIndex")}}}))},1995:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__);__webpack_exports__["default"]='<div class="kuiBar kuiVerticalRhythm">\n  <div class="kuiBarSection">\n    \x3c!-- Index pattern name --\x3e\n    <h1\n      class="euiTitle euiTitle--medium"\n      data-test-subj="indexPatternTitle"\n    >\n      <span\n        aria-hidden="true"\n        ng-if="defaultIndex === indexPattern.id"\n        class="kuiIcon fa-star"\n      ></span>\n      {{indexPattern.title}}\n    </h1>\n  </div>\n\n  <div class="kuiBarSection">\n    <button\n      ng-if="setDefault"\n      ng-click="setDefault()"\n      aria-label="{{::\'kbn.management.editIndexPattern.setDefaultAria\' | i18n: { defaultMessage: \'Set as default index\' } }}"\n      tooltip="{{::\'kbn.management.editIndexPattern.setDefaultTooltip\' | i18n: { defaultMessage: \'Set as default index\' } }}"\n      class="kuiButton kuiButton--basic"\n      data-test-subj="setDefaultIndexPatternButton"\n    >\n      <span\n        aria-hidden="true"\n        class="kuiIcon fa-star"\n      ></span>\n    </button>\n\n    <button\n      ng-if="refreshFields"\n      ng-click="refreshFields()"\n      aria-label="{{::\'kbn.management.editIndexPattern.refreshAria\' | i18n: { defaultMessage: \'Reload field list\' } }}"\n      tooltip="{{::\'kbn.management.editIndexPattern.refreshTooltip\' | i18n: { defaultMessage: \'Refresh field list\' } }}"\n      class="kuiButton kuiButton--basic"\n    >\n      <span\n        aria-hidden="true"\n        class="kuiIcon fa-refresh"\n      ></span>\n    </button>\n\n    <button\n      ng-if="delete"\n      ng-click="delete()"\n      aria-label="{{::\'kbn.management.editIndexPattern.removeAria\' | i18n: { defaultMessage: \'Remove index pattern\' } }}"\n      tooltip="{{::\'kbn.management.editIndexPattern.removeTooltip\' | i18n: { defaultMessage: \'Remove index pattern\' } }}"\n      class="kuiButton kuiButton--danger"\n      data-test-subj="deleteIndexPatternButton"\n    >\n      <span\n        aria-hidden="true"\n        class="kuiIcon fa-trash"\n      ></span>\n    </button>\n  </div>\n</div>\n'},1996:function(module,exports,__webpack_require__){"use strict";__webpack_require__(1997)},1997:function(module,exports,__webpack_require__){"use strict";var _public=__webpack_require__(7);var _field_format_editors=__webpack_require__(562);var _doc_title=__webpack_require__(270);var _url=__webpack_require__(70);var _routes=_interopRequireDefault(__webpack_require__(31));var _notify=__webpack_require__(18);var _new_platform=__webpack_require__(6);var _create_edit_field=_interopRequireDefault(__webpack_require__(1999));var _breadcrumbs=__webpack_require__(177);var _react=_interopRequireDefault(__webpack_require__(0));var _reactDom=__webpack_require__(9);var _field_editor=__webpack_require__(2e3);var _i18n=__webpack_require__(24);var _i18n2=__webpack_require__(1);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);if(enumerableOnly)symbols=symbols.filter((function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable}));keys.push.apply(keys,symbols)}return keys}function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=arguments[i]!=null?arguments[i]:{};if(i%2){ownKeys(source,true).forEach((function(key){_defineProperty(target,key,source[key])}))}else if(Object.getOwnPropertyDescriptors){Object.defineProperties(target,Object.getOwnPropertyDescriptors(source))}else{ownKeys(source).forEach((function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))}))}}return target}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}var REACT_FIELD_EDITOR_ID="reactFieldEditor";var renderFieldEditor=function renderFieldEditor($scope,indexPattern,field,_ref){var Field=_ref.Field,getConfig=_ref.getConfig,$http=_ref.$http,fieldFormatEditors=_ref.fieldFormatEditors,redirectAway=_ref.redirectAway;$scope.$$postDigest((function(){var node=document.getElementById(REACT_FIELD_EDITOR_ID);if(!node){return}(0,_reactDom.render)(_react.default.createElement(_i18n.I18nContext,null,_react.default.createElement(_field_editor.FieldEditor,{indexPattern:indexPattern,field:field,helpers:{Field:Field,getConfig:getConfig,$http:$http,fieldFormatEditors:fieldFormatEditors,redirectAway:redirectAway}})),node)}))};var destroyFieldEditor=function destroyFieldEditor(){var node=document.getElementById(REACT_FIELD_EDITOR_ID);node&&(0,_reactDom.unmountComponentAtNode)(node)};_routes.default.when("/management/kibana/index_patterns/:indexPatternId/field/:fieldName*",{mode:"edit",k7Breadcrumbs:_breadcrumbs.getEditFieldBreadcrumbs}).when("/management/kibana/index_patterns/:indexPatternId/create-field/",{mode:"create",k7Breadcrumbs:_breadcrumbs.getCreateFieldBreadcrumbs}).defaults(/management\/kibana\/index_patterns\/[^\/]+\/(field|create-field)(\/|$)/,{template:_create_edit_field.default,mapBreadcrumbs:function mapBreadcrumbs($route,breadcrumbs){var indexPattern=$route.current.locals.indexPattern;return breadcrumbs.map((function(crumb){if(crumb.id!==indexPattern.id){return crumb}return _objectSpread({},crumb,{display:indexPattern.title})}))},resolve:{indexPattern:function indexPattern($route,Promise,redirectWhenMissing){var indexPatterns=_new_platform.npStart.plugins.data.indexPatterns;return Promise.resolve(indexPatterns.get($route.current.params.indexPatternId)).catch(redirectWhenMissing("/management/kibana/index_patterns"))}},controllerAs:"fieldSettings",controller:function FieldEditorPageController($scope,$route,$timeout,$http,Private,config){var _this=this;var getConfig=function getConfig(){return config.get.apply(config,arguments)};var fieldFormatEditors=Private(_field_format_editors.RegistryFieldFormatEditorsProvider);var kbnUrl=Private(_url.KbnUrlProvider);this.mode=$route.current.mode;this.indexPattern=$route.current.locals.indexPattern;if(this.mode==="edit"){var _fieldName=$route.current.params.fieldName;this.field=this.indexPattern.fields.getByName(_fieldName);if(!this.field){var message=_i18n2.i18n.translate("kbn.management.editIndexPattern.scripted.noFieldLabel",{defaultMessage:"'{indexPatternTitle}' index pattern doesn't have a scripted field called '{fieldName}'",values:{indexPatternTitle:this.indexPattern.title,fieldName:_fieldName}});_notify.toastNotifications.add(message);kbnUrl.redirectToRoute(this.indexPattern,"edit");return}}else if(this.mode==="create"){this.field=new _public.Field(this.indexPattern,{scripted:true,type:"number"})}else{var errorMessage=_i18n2.i18n.translate("kbn.management.editIndexPattern.scripted.unknownModeErrorMessage",{defaultMessage:"unknown fieldSettings mode {mode}",values:{mode:this.mode}});throw new Error(errorMessage)}var fieldName=this.field.name||_i18n2.i18n.translate("kbn.management.editIndexPattern.scripted.newFieldPlaceholder",{defaultMessage:"New Scripted Field"});_doc_title.docTitle.change([fieldName,this.indexPattern.title]);renderFieldEditor($scope,this.indexPattern,this.field,{Field:_public.Field,getConfig:getConfig,$http:$http,fieldFormatEditors:fieldFormatEditors,redirectAway:function redirectAway(){$timeout((function(){kbnUrl.changeToRoute(_this.indexPattern,_this.field.scripted?"scriptedFields":"indexedFields")}))}});$scope.$on("$destroy",(function(){destroyFieldEditor()}))}})},1999:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__);__webpack_exports__["default"]='<kbn-management-app section="kibana/index_patterns">\n  <div class="euiPanel euiPanel--paddingLarge">\n    <div class="kuiViewContent">\n      <kbn-management-index-patterns-header\n        index-pattern="fieldSettings.indexPattern"\n      ></kbn-management-index-patterns-header>\n    </div>\n\n    <div id="reactFieldEditor"></div>\n  </div>\n</kbn-management-app>\n'},20:function(module,exports){module.exports=__kbnSharedDeps__.Angular},2e3:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});Object.defineProperty(exports,"FieldEditor",{enumerable:true,get:function get(){return _field_editor.FieldEditor}});var _field_editor=__webpack_require__(2001)},2001:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.FieldEditor=void 0;var _react=_interopRequireWildcard(__webpack_require__(0));var _propTypes=_interopRequireDefault(__webpack_require__(5));var _lodash=__webpack_require__(2);var _scripting_languages=__webpack_require__(612);var _documentation_links=__webpack_require__(127);var _notify=__webpack_require__(18);var _new_platform=__webpack_require__(6);var _eui=__webpack_require__(3);var _scripting_call_outs=__webpack_require__(2002);var _scripting_help=__webpack_require__(2005);var _field_format_editor=__webpack_require__(2009);var _constants=__webpack_require__(2011);var _lib=__webpack_require__(2012);var _i18n=__webpack_require__(1);var _react2=__webpack_require__(4);__webpack_require__(2291);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _interopRequireWildcard(obj){if(obj&&obj.__esModule){return obj}else{var newObj={};if(obj!=null){for(var key in obj){if(Object.prototype.hasOwnProperty.call(obj,key)){var desc=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):{};if(desc.get||desc.set){Object.defineProperty(newObj,key,desc)}else{newObj[key]=obj[key]}}}}newObj.default=obj;return newObj}}function _slicedToArray(arr,i){return _arrayWithHoles(arr)||_iterableToArrayLimit(arr,i)||_nonIterableRest()}function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}function _iterableToArrayLimit(arr,i){var _arr=[];var _n=true;var _d=false;var _e=undefined;try{for(var _i=arr[Symbol.iterator](),_s;!(_n=(_s=_i.next()).done);_n=true){_arr.push(_s.value);if(i&&_arr.length===i)break}}catch(err){_d=true;_e=err}finally{try{if(!_n&&_i["return"]!=null)_i["return"]()}finally{if(_d)throw _e}}return _arr}function _arrayWithHoles(arr){if(Array.isArray(arr))return arr}function _typeof(obj){if(typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"){_typeof=function _typeof(obj){return typeof obj}}else{_typeof=function _typeof(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj}}return _typeof(obj)}function _toConsumableArray(arr){return _arrayWithoutHoles(arr)||_iterableToArray(arr)||_nonIterableSpread()}function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance")}function _iterableToArray(iter){if(Symbol.iterator in Object(iter)||Object.prototype.toString.call(iter)==="[object Arguments]")return Array.from(iter)}function _arrayWithoutHoles(arr){if(Array.isArray(arr)){for(var i=0,arr2=new Array(arr.length);i<arr.length;i++){arr2[i]=arr[i]}return arr2}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);return Constructor}function _possibleConstructorReturn(self,call){if(call&&(_typeof(call)==="object"||typeof call==="function")){return call}return _assertThisInitialized(self)}function _getPrototypeOf(o){_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o)};return _getPrototypeOf(o)}function _assertThisInitialized(self){if(self===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return self}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function")}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:true,configurable:true}});if(superClass)_setPrototypeOf(subClass,superClass)}function _setPrototypeOf(o,p){_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(o,p){o.__proto__=p;return o};return _setPrototypeOf(o,p)}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}var getFieldFormats=function getFieldFormats(){return _new_platform.npStart.plugins.data.fieldFormats};var FieldEditor=function(_PureComponent){_inherits(FieldEditor,_PureComponent);function FieldEditor(props){var _this;_classCallCheck(this,FieldEditor);_this=_possibleConstructorReturn(this,_getPrototypeOf(FieldEditor).call(this,props));_defineProperty(_assertThisInitialized(_this),"onFieldChange",(function(fieldName,value){var field=_this.state.field;field[fieldName]=value;_this.forceUpdate()}));_defineProperty(_assertThisInitialized(_this),"onTypeChange",(function(type){var getConfig=_this.props.helpers.getConfig;var field=_this.state.field;var fieldFormats=getFieldFormats();var DefaultFieldFormat=fieldFormats.getDefaultType(type);field.type=type;var fieldTypeFormats=[(0,_lib.getDefaultFormat)(DefaultFieldFormat)].concat(_toConsumableArray(getFieldFormats().getByFieldType(field.type)));var FieldFormat=fieldTypeFormats[0];field.format=new FieldFormat(null,getConfig);_this.setState({fieldTypeFormats:fieldTypeFormats,fieldFormatId:FieldFormat.id,fieldFormatParams:field.format.params()})}));_defineProperty(_assertThisInitialized(_this),"onLangChange",(function(lang){var field=_this.state.field;var fieldTypes=(0,_lodash.get)(_constants.FIELD_TYPES_BY_LANG,lang,_constants.DEFAULT_FIELD_TYPES);field.lang=lang;field.type=fieldTypes.includes(field.type)?field.type:fieldTypes[0];_this.setState({fieldTypes:fieldTypes})}));_defineProperty(_assertThisInitialized(_this),"onFormatChange",(function(formatId,params){var getConfig=_this.props.helpers.getConfig;var _this$state=_this.state,field=_this$state.field,fieldTypeFormats=_this$state.fieldTypeFormats;var FieldFormat=fieldTypeFormats.find((function(format){return format.id===formatId}))||fieldTypeFormats[0];field.format=new FieldFormat(params,getConfig);_this.setState({fieldFormatId:FieldFormat.id,fieldFormatParams:field.format.params()})}));_defineProperty(_assertThisInitialized(_this),"onFormatParamsChange",(function(newParams){var fieldFormatId=_this.state.fieldFormatId;_this.onFormatChange(fieldFormatId,newParams)}));_defineProperty(_assertThisInitialized(_this),"onFormatParamsError",(function(error){_this.setState({hasFormatError:!!error})}));_defineProperty(_assertThisInitialized(_this),"onScriptChange",(function(value){_this.setState({hasScriptError:false});_this.onFieldChange("script",value)}));_defineProperty(_assertThisInitialized(_this),"showScriptingHelp",(function(){_this.setState({showScriptingHelp:true})}));_defineProperty(_assertThisInitialized(_this),"hideScriptingHelp",(function(){_this.setState({showScriptingHelp:false})}));_defineProperty(_assertThisInitialized(_this),"renderDeleteModal",(function(){var field=_this.state.field;return _this.state.showDeleteModal?_react.default.createElement(_eui.EuiOverlayMask,null,_react.default.createElement(_eui.EuiConfirmModal,{title:_i18n.i18n.translate("common.ui.fieldEditor.deleteFieldHeader",{defaultMessage:"Delete field '{fieldName}'",values:{fieldName:field.name}}),onCancel:_this.hideDeleteModal,onConfirm:function onConfirm(){_this.hideDeleteModal();_this.deleteField()},cancelButtonText:_i18n.i18n.translate("common.ui.fieldEditor.deleteField.cancelButton",{defaultMessage:"Cancel"}),confirmButtonText:_i18n.i18n.translate("common.ui.fieldEditor.deleteField.deleteButton",{defaultMessage:"Delete"}),buttonColor:"danger",defaultFocusedButton:_eui.EUI_MODAL_CONFIRM_BUTTON},_react.default.createElement("p",null,_react.default.createElement(_react2.FormattedMessage,{id:"common.ui.fieldEditor.deleteFieldLabel",defaultMessage:"You can't recover a deleted field.{separator}Are you sure you want to do this?",values:{separator:_react.default.createElement("span",null,_react.default.createElement("br",null),_react.default.createElement("br",null))}})))):null}));_defineProperty(_assertThisInitialized(_this),"showDeleteModal",(function(){_this.setState({showDeleteModal:true})}));_defineProperty(_assertThisInitialized(_this),"hideDeleteModal",(function(){_this.setState({showDeleteModal:false})}));_defineProperty(_assertThisInitialized(_this),"renderScriptingPanels",(function(){var _this$state2=_this.state,scriptingLangs=_this$state2.scriptingLangs,field=_this$state2.field,showScriptingHelp=_this$state2.showScriptingHelp;if(!field.scripted){return}return _react.default.createElement(_react.Fragment,null,_react.default.createElement(_scripting_call_outs.ScriptingDisabledCallOut,{isVisible:!scriptingLangs.length}),_react.default.createElement(_scripting_call_outs.ScriptingWarningCallOut,{isVisible:true}),_react.default.createElement(_scripting_help.ScriptingHelpFlyout,{isVisible:showScriptingHelp,onClose:_this.hideScriptingHelp,indexPattern:_this.props.indexPattern,lang:field.lang,name:field.name,script:field.script,executeScript:_lib.executeScript}))}));_defineProperty(_assertThisInitialized(_this),"deleteField",(function(){var redirectAway=_this.props.helpers.redirectAway;var indexPattern=_this.props.indexPattern;var field=_this.state.field;var remove=indexPattern.removeScriptedField(field);if(remove){remove.then((function(){var message=_i18n.i18n.translate("common.ui.fieldEditor.deleteField.deletedHeader",{defaultMessage:"Deleted '{fieldName}'",values:{fieldName:field.name}});_notify.toastNotifications.addSuccess(message);redirectAway()}))}else{redirectAway()}}));_defineProperty(_assertThisInitialized(_this),"saveField",(function _callee(){var field,indexPattern,fieldFormatId,isValid,redirectAway,index;return regeneratorRuntime.async((function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:field=_this.state.field.toActualField();indexPattern=_this.props.indexPattern;fieldFormatId=_this.state.fieldFormatId;if(!field.scripted){_context.next=11;break}_this.setState({isSaving:true});_context.next=7;return regeneratorRuntime.awrap((0,_lib.isScriptValid)({name:field.name,lang:field.lang,script:field.script,indexPatternTitle:indexPattern.title}));case 7:isValid=_context.sent;if(isValid){_context.next=11;break}_this.setState({hasScriptError:true,isSaving:false});return _context.abrupt("return");case 11:redirectAway=_this.props.helpers.redirectAway;index=indexPattern.fields.findIndex((function(f){return f.name===field.name}));if(index>-1){indexPattern.fields.update(field)}else{indexPattern.fields.add(field)}if(!fieldFormatId){indexPattern.fieldFormatMap[field.name]=undefined}else{indexPattern.fieldFormatMap[field.name]=field.format}return _context.abrupt("return",indexPattern.save().then((function(){var message=_i18n.i18n.translate("common.ui.fieldEditor.deleteField.savedHeader",{defaultMessage:"Saved '{fieldName}'",values:{fieldName:field.name}});_notify.toastNotifications.addSuccess(message);redirectAway()})));case 16:case"end":return _context.stop()}}}))}));var _field=props.field,_indexPattern=props.indexPattern,Field=props.helpers.Field;_this.state={isReady:false,isCreating:false,isDeprecatedLang:false,scriptingLangs:[],fieldTypes:[],fieldTypeFormats:[],existingFieldNames:_indexPattern.fields.map((function(f){return f.name})),field:(0,_lib.copyField)(_field,_indexPattern,Field),fieldFormatId:undefined,fieldFormatParams:{},showScriptingHelp:false,showDeleteModal:false,hasFormatError:false,hasScriptError:false,isSaving:false};_this.supportedLangs=(0,_scripting_languages.getSupportedScriptingLanguages)();_this.deprecatedLangs=(0,_scripting_languages.getDeprecatedScriptingLanguages)();_this.init();return _this}_createClass(FieldEditor,[{key:"init",value:function init(){var $http,field,indexPattern,getEnabledScriptingLanguages,enabledLangs,scriptingLangs,fieldTypes,fieldFormats,fieldTypeFormats;return regeneratorRuntime.async((function init$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:$http=this.props.helpers.$http;field=this.state.field;indexPattern=this.props.indexPattern;getEnabledScriptingLanguages=new _scripting_languages.GetEnabledScriptingLanguagesProvider($http);_context2.next=6;return regeneratorRuntime.awrap(getEnabledScriptingLanguages());case 6:enabledLangs=_context2.sent;scriptingLangs=(0,_lodash.intersection)(enabledLangs,(0,_lodash.union)(this.supportedLangs,this.deprecatedLangs));field.lang=scriptingLangs.includes(field.lang)?field.lang:undefined;fieldTypes=(0,_lodash.get)(_constants.FIELD_TYPES_BY_LANG,field.lang,_constants.DEFAULT_FIELD_TYPES);field.type=fieldTypes.includes(field.type)?field.type:fieldTypes[0];fieldFormats=getFieldFormats();fieldTypeFormats=[(0,_lib.getDefaultFormat)(fieldFormats.getDefaultType(field.type,field.esTypes))].concat(_toConsumableArray(fieldFormats.getByFieldType(field.type)));this.setState({isReady:true,isCreating:!indexPattern.fields.getByName(field.name),isDeprecatedLang:this.deprecatedLangs.includes(field.lang),errors:[],scriptingLangs:scriptingLangs,fieldTypes:fieldTypes,fieldTypeFormats:fieldTypeFormats,fieldFormatId:(0,_lodash.get)(indexPattern,["fieldFormatMap",field.name,"type","id"]),fieldFormatParams:field.format.params()});case 14:case"end":return _context2.stop()}}}),null,this)}},{key:"isDuplicateName",value:function isDuplicateName(){var _this$state3=this.state,isCreating=_this$state3.isCreating,field=_this$state3.field,existingFieldNames=_this$state3.existingFieldNames;return isCreating&&existingFieldNames.includes(field.name)}},{key:"renderName",value:function renderName(){var _this2=this;var _this$state4=this.state,isCreating=_this$state4.isCreating,field=_this$state4.field;var isInvalid=!field.name||!field.name.trim();return isCreating?_react.default.createElement(_eui.EuiFormRow,{label:_i18n.i18n.translate("common.ui.fieldEditor.nameLabel",{defaultMessage:"Name"}),helpText:this.isDuplicateName()?_react.default.createElement("span",null,_react.default.createElement(_eui.EuiIcon,{type:"alert",color:"warning",size:"s"}),"",_react.default.createElement(_react2.FormattedMessage,{id:"common.ui.fieldEditor.mappingConflictLabel.mappingConflictDetail",defaultMessage:"{mappingConflict} You already have a field with the name {fieldName}. Naming your scripted field with the same name means you won't be able to query both fields at the same time.",values:{mappingConflict:_react.default.createElement("strong",null,_react.default.createElement(_react2.FormattedMessage,{id:"common.ui.fieldEditor.mappingConflictLabel.mappingConflictLabel",defaultMessage:"Mapping Conflict:"})),fieldName:_react.default.createElement(_eui.EuiCode,null,field.name)}})):null,isInvalid:isInvalid,error:isInvalid?_i18n.i18n.translate("common.ui.fieldEditor.nameErrorMessage",{defaultMessage:"Name is required"}):null},_react.default.createElement(_eui.EuiFieldText,{value:field.name||"",placeholder:_i18n.i18n.translate("common.ui.fieldEditor.namePlaceholder",{defaultMessage:"New scripted field"}),"data-test-subj":"editorFieldName",onChange:function onChange(e){_this2.onFieldChange("name",e.target.value)},isInvalid:isInvalid})):null}},{key:"renderLanguage",value:function renderLanguage(){var _this3=this;var _this$state5=this.state,field=_this$state5.field,scriptingLangs=_this$state5.scriptingLangs,isDeprecatedLang=_this$state5.isDeprecatedLang;return field.scripted?_react.default.createElement(_eui.EuiFormRow,{label:_i18n.i18n.translate("common.ui.fieldEditor.languageLabel",{defaultMessage:"Language"}),helpText:isDeprecatedLang?_react.default.createElement("span",null,_react.default.createElement(_eui.EuiIcon,{type:"alert",color:"warning",size:"s"}),"",_react.default.createElement("strong",null,_react.default.createElement(_react2.FormattedMessage,{id:"common.ui.fieldEditor.warningHeader",defaultMessage:"Deprecation Warning:"})),"",_react.default.createElement(_react2.FormattedMessage,{id:"common.ui.fieldEditor.warningLabel.warningDetail",defaultMessage:"{language} is deprecated and support will be removed in the next major version of Kibana and Elasticsearch. We recommend using {painlessLink} for new scripted fields.",values:{language:_react.default.createElement(_eui.EuiCode,null,field.lang),painlessLink:_react.default.createElement(_eui.EuiLink,{target:"_blank",href:(0,_documentation_links.getDocLink)("scriptedFields.painless")},_react.default.createElement(_react2.FormattedMessage,{id:"common.ui.fieldEditor.warningLabel.painlessLinkLabel",defaultMessage:"Painless"}))}})):null},_react.default.createElement(_eui.EuiSelect,{value:field.lang,options:scriptingLangs.map((function(lang){return{value:lang,text:lang}})),"data-test-subj":"editorFieldLang",onChange:function onChange(e){_this3.onLangChange(e.target.value)}})):null}},{key:"renderType",value:function renderType(){var _this4=this;var _this$state6=this.state,field=_this$state6.field,fieldTypes=_this$state6.fieldTypes;return _react.default.createElement(_eui.EuiFormRow,{label:_i18n.i18n.translate("common.ui.fieldEditor.typeLabel",{defaultMessage:"Type"})},_react.default.createElement(_eui.EuiSelect,{value:field.type,disabled:!field.scripted,options:fieldTypes.map((function(type){return{value:type,text:type}})),"data-test-subj":"editorFieldType",onChange:function onChange(e){_this4.onTypeChange(e.target.value)}}))}},{key:"renderTypeConflict",value:function renderTypeConflict(){var _this$state$field=this.state.field,field=_this$state$field===void 0?{}:_this$state$field;if(!field.conflictDescriptions||_typeof(field.conflictDescriptions)!=="object"){return null}var columns=[{field:"type",name:_i18n.i18n.translate("common.ui.fieldEditor.typeLabel",{defaultMessage:"Type"}),width:"100px"},{field:"indices",name:_i18n.i18n.translate("common.ui.fieldEditor.indexNameLabel",{defaultMessage:"Index names"})}];var items=Object.entries(field.conflictDescriptions).map((function(_ref){var _ref2=_slicedToArray(_ref,2),type=_ref2[0],indices=_ref2[1];return{type:type,indices:Array.isArray(indices)?indices.join(", "):"Index names unavailable"}}));return _react.default.createElement("div",null,_react.default.createElement(_eui.EuiSpacer,{size:"m"}),_react.default.createElement(_eui.EuiCallOut,{color:"warning",iconType:"alert",title:_react.default.createElement(_react2.FormattedMessage,{id:"common.ui.fieldEditor.fieldTypeConflict",defaultMessage:"Field type conflict"}),size:"s"},_react.default.createElement(_react2.FormattedMessage,{id:"common.ui.fieldEditor.multiTypeLabelDesc",defaultMessage:"The type of this field changes across indices. It is unavailable for many analysis functions. The indices per type are as follows:"})),_react.default.createElement(_eui.EuiSpacer,{size:"m"}),_react.default.createElement(_eui.EuiBasicTable,{items:items,columns:columns}),_react.default.createElement(_eui.EuiSpacer,{size:"m"}))}},{key:"renderFormat",value:function renderFormat(){var _this5=this;var _this$state7=this.state,field=_this$state7.field,fieldTypeFormats=_this$state7.fieldTypeFormats,fieldFormatId=_this$state7.fieldFormatId,fieldFormatParams=_this$state7.fieldFormatParams;var fieldFormatEditors=this.props.helpers.fieldFormatEditors;var defaultFormat=fieldTypeFormats[0]&&fieldTypeFormats[0].resolvedTitle;var label=defaultFormat?_react.default.createElement(_react2.FormattedMessage,{id:"common.ui.fieldEditor.defaultFormatHeader",defaultMessage:"Format (Default: {defaultFormat})",values:{defaultFormat:_react.default.createElement(_eui.EuiCode,null,defaultFormat)}}):_react.default.createElement(_react2.FormattedMessage,{id:"common.ui.fieldEditor.formatHeader",defaultMessage:"Format"});return _react.default.createElement(_react.Fragment,null,_react.default.createElement(_eui.EuiFormRow,{label:label,helpText:_react.default.createElement(_react2.FormattedMessage,{id:"common.ui.fieldEditor.formatLabel",defaultMessage:"Formatting allows you to control the way that specific values are displayed. It can also cause values to be completely changed and prevent highlighting in Discover from working."})},_react.default.createElement(_eui.EuiSelect,{value:fieldFormatId,options:fieldTypeFormats.map((function(format){return{value:format.id||"",text:format.title}})),"data-test-subj":"editorSelectedFormatId",onChange:function onChange(e){_this5.onFormatChange(e.target.value)}})),fieldFormatId?_react.default.createElement(_field_format_editor.FieldFormatEditor,{fieldType:field.type,fieldFormat:field.format,fieldFormatId:fieldFormatId,fieldFormatParams:fieldFormatParams,fieldFormatEditors:fieldFormatEditors,onChange:this.onFormatParamsChange,onError:this.onFormatParamsError}):null)}},{key:"renderPopularity",value:function renderPopularity(){var _this6=this;var field=this.state.field;return _react.default.createElement(_eui.EuiFormRow,{label:_i18n.i18n.translate("common.ui.fieldEditor.popularityLabel",{defaultMessage:"Popularity",description:'"Popularity" refers to Kibana\'s measurement how popular a field is (i.e. how commonly it is used).'})},_react.default.createElement(_eui.EuiFieldNumber,{value:field.count,"data-test-subj":"editorFieldCount",onChange:function onChange(e){_this6.onFieldChange("count",e.target.value?Number(e.target.value):"")}}))}},{key:"renderScript",value:function renderScript(){var _this$state8=this.state,field=_this$state8.field,hasScriptError=_this$state8.hasScriptError;var isInvalid=!field.script||!field.script.trim()||hasScriptError;var errorMsg=hasScriptError?_react.default.createElement("span",{"data-test-subj":"invalidScriptError"},_react.default.createElement(_react2.FormattedMessage,{id:"common.ui.fieldEditor.scriptInvalidErrorMessage",defaultMessage:"Script is invalid. View script preview for details"})):_react.default.createElement(_react2.FormattedMessage,{id:"common.ui.fieldEditor.scriptRequiredErrorMessage",defaultMessage:"Script is required"});return field.scripted?_react.default.createElement(_react.Fragment,null,_react.default.createElement(_eui.EuiFormRow,{fullWidth:true,label:_i18n.i18n.translate("common.ui.fieldEditor.scriptLabel",{defaultMessage:"Script"}),isInvalid:isInvalid,error:isInvalid?errorMsg:null},_react.default.createElement(_eui.EuiCodeEditor,{value:field.script,"data-test-subj":"editorFieldScript",onChange:this.onScriptChange,mode:"groovy",width:"100%",height:"300px"})),_react.default.createElement(_eui.EuiFormRow,null,_react.default.createElement(_react.Fragment,null,_react.default.createElement(_eui.EuiText,null,_react.default.createElement(_react2.FormattedMessage,{id:"common.ui.fieldEditor.script.accessWithLabel",defaultMessage:"Access fields with {code}.",values:{code:_react.default.createElement("code",null,"doc['some_field'].value")}})),_react.default.createElement("br",null),_react.default.createElement(_eui.EuiLink,{onClick:this.showScriptingHelp,"data-test-subj":"scriptedFieldsHelpLink"},_react.default.createElement(_react2.FormattedMessage,{id:"common.ui.fieldEditor.script.getHelpLabel",defaultMessage:"Get help with the syntax and preview the results of your script."}))))):null}},{key:"renderActions",value:function renderActions(){var _this$state9=this.state,isCreating=_this$state9.isCreating,field=_this$state9.field,isSaving=_this$state9.isSaving;var redirectAway=this.props.helpers.redirectAway;return _react.default.createElement(_eui.EuiFormRow,null,_react.default.createElement(_eui.EuiFlexGroup,null,_react.default.createElement(_eui.EuiFlexItem,{grow:false},_react.default.createElement(_eui.EuiButton,{fill:true,onClick:this.saveField,isDisabled:this.isSavingDisabled(),isLoading:isSaving,"data-test-subj":"fieldSaveButton"},isCreating?_react.default.createElement(_react2.FormattedMessage,{id:"common.ui.fieldEditor.actions.createButton",defaultMessage:"Create field"}):_react.default.createElement(_react2.FormattedMessage,{id:"common.ui.fieldEditor.actions.saveButton",defaultMessage:"Save field"}))),_react.default.createElement(_eui.EuiFlexItem,{grow:false},_react.default.createElement(_eui.EuiButtonEmpty,{onClick:redirectAway,"data-test-subj":"fieldCancelButton"},_react.default.createElement(_react2.FormattedMessage,{id:"common.ui.fieldEditor.actions.cancelButton",defaultMessage:"Cancel"}))),!isCreating&&field.scripted?_react.default.createElement(_eui.EuiFlexItem,null,_react.default.createElement(_eui.EuiFlexGroup,{justifyContent:"flexEnd"},_react.default.createElement(_eui.EuiFlexItem,{grow:false},_react.default.createElement(_eui.EuiButtonEmpty,{color:"danger",onClick:this.showDeleteModal},_react.default.createElement(_react2.FormattedMessage,{id:"common.ui.fieldEditor.actions.deleteButton",defaultMessage:"Delete"}))))):null))}},{key:"isSavingDisabled",value:function isSavingDisabled(){var _this$state10=this.state,field=_this$state10.field,hasFormatError=_this$state10.hasFormatError,hasScriptError=_this$state10.hasScriptError;if(hasFormatError||hasScriptError||!field.name||!field.name.trim()||field.scripted&&(!field.script||!field.script.trim())){return true}return false}},{key:"render",value:function render(){var _this$state11=this.state,isReady=_this$state11.isReady,isCreating=_this$state11.isCreating,field=_this$state11.field;return isReady?_react.default.createElement("div",null,_react.default.createElement(_eui.EuiText,null,_react.default.createElement("h3",null,isCreating?_react.default.createElement(_react2.FormattedMessage,{id:"common.ui.fieldEditor.createHeader",defaultMessage:"Create scripted field"}):_react.default.createElement(_react2.FormattedMessage,{id:"common.ui.fieldEditor.editHeader",defaultMessage:"Edit {fieldName}",values:{fieldName:field.name}}))),_react.default.createElement(_eui.EuiSpacer,{size:"m"}),_react.default.createElement(_eui.EuiForm,null,this.renderScriptingPanels(),this.renderName(),this.renderLanguage(),this.renderType(),this.renderTypeConflict(),this.renderFormat(),this.renderPopularity(),this.renderScript(),this.renderActions(),this.renderDeleteModal()),_react.default.createElement(_eui.EuiSpacer,{size:"l"})):null}}]);return FieldEditor}(_react.PureComponent);exports.FieldEditor=FieldEditor;_defineProperty(FieldEditor,"propTypes",{indexPattern:_propTypes.default.object.isRequired,field:_propTypes.default.object.isRequired,helpers:_propTypes.default.shape({Field:_propTypes.default.func.isRequired,getConfig:_propTypes.default.func.isRequired,$http:_propTypes.default.func.isRequired,fieldFormatEditors:_propTypes.default.object.isRequired,redirectAway:_propTypes.default.func.isRequired})})},2002:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});Object.defineProperty(exports,"ScriptingDisabledCallOut",{enumerable:true,get:function get(){return _disabled_call_out.ScriptingDisabledCallOut}});Object.defineProperty(exports,"ScriptingWarningCallOut",{enumerable:true,get:function get(){return _warning_call_out.ScriptingWarningCallOut}});var _disabled_call_out=__webpack_require__(2003);var _warning_call_out=__webpack_require__(2004)},2003:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.ScriptingDisabledCallOut=void 0;var _react=_interopRequireWildcard(__webpack_require__(0));var _eui=__webpack_require__(3);var _react2=__webpack_require__(4);function _interopRequireWildcard(obj){if(obj&&obj.__esModule){return obj}else{var newObj={};if(obj!=null){for(var key in obj){if(Object.prototype.hasOwnProperty.call(obj,key)){var desc=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):{};if(desc.get||desc.set){Object.defineProperty(newObj,key,desc)}else{newObj[key]=obj[key]}}}}newObj.default=obj;return newObj}}var ScriptingDisabledCallOut=function ScriptingDisabledCallOut(_ref){var _ref$isVisible=_ref.isVisible,isVisible=_ref$isVisible===void 0?false:_ref$isVisible;return isVisible?_react.default.createElement(_react.Fragment,null,_react.default.createElement(_eui.EuiCallOut,{title:_react.default.createElement(_react2.FormattedMessage,{id:"common.ui.fieldEditor.disabledCallOutHeader",defaultMessage:"Scripting disabled",description:"Showing the status that scripting is disabled in Elasticsearch. Not an update message, that it JUST got disabled."}),color:"danger",iconType:"alert"},_react.default.createElement("p",null,_react.default.createElement(_react2.FormattedMessage,{id:"common.ui.fieldEditor.disabledCallOutLabel",defaultMessage:"All inline scripting has been disabled in Elasticsearch. You must enable inline scripting for at least one language in order to use scripted fields in Kibana."}))),_react.default.createElement(_eui.EuiSpacer,{size:"m"})):null};exports.ScriptingDisabledCallOut=ScriptingDisabledCallOut;ScriptingDisabledCallOut.displayName="ScriptingDisabledCallOut"},2004:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.ScriptingWarningCallOut=void 0;var _react=_interopRequireWildcard(__webpack_require__(0));var _documentation_links=__webpack_require__(127);var _eui=__webpack_require__(3);var _react2=__webpack_require__(4);function _interopRequireWildcard(obj){if(obj&&obj.__esModule){return obj}else{var newObj={};if(obj!=null){for(var key in obj){if(Object.prototype.hasOwnProperty.call(obj,key)){var desc=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):{};if(desc.get||desc.set){Object.defineProperty(newObj,key,desc)}else{newObj[key]=obj[key]}}}}newObj.default=obj;return newObj}}var ScriptingWarningCallOut=function ScriptingWarningCallOut(_ref){var _ref$isVisible=_ref.isVisible,isVisible=_ref$isVisible===void 0?false:_ref$isVisible;return isVisible?_react.default.createElement(_react.Fragment,null,_react.default.createElement(_eui.EuiCallOut,{title:_react.default.createElement(_react2.FormattedMessage,{id:"common.ui.fieldEditor.warningCallOutHeader",defaultMessage:"Proceed with caution"}),color:"warning",iconType:"alert"},_react.default.createElement("p",null,_react.default.createElement(_react2.FormattedMessage,{id:"common.ui.fieldEditor.warningCallOutLabel.callOutDetail",defaultMessage:"Please familiarize yourself with {scripFields} and with {scriptsInAggregation} before using scripted fields.",values:{scripFields:_react.default.createElement(_eui.EuiLink,{target:"_blank",href:(0,_documentation_links.getDocLink)("scriptedFields.scriptFields")},_react.default.createElement(_react2.FormattedMessage,{id:"common.ui.fieldEditor.warningCallOutLabel.scripFieldsLink",defaultMessage:"script fields"}),"",_react.default.createElement(_eui.EuiIcon,{type:"link"})),scriptsInAggregation:_react.default.createElement(_eui.EuiLink,{target:"_blank",href:(0,_documentation_links.getDocLink)("scriptedFields.scriptAggs")},_react.default.createElement(_react2.FormattedMessage,{id:"common.ui.fieldEditor.warningCallOutLabel.scriptsInAggregationLink",defaultMessage:"scripts in aggregations"}),"",_react.default.createElement(_eui.EuiIcon,{type:"link"}))}})),_react.default.createElement("p",null,_react.default.createElement(_react2.FormattedMessage,{id:"common.ui.fieldEditor.warningCallOut.descriptionLabel",defaultMessage:"Scripted fields can be used to display and aggregate calculated values. As such, they can be very slow, and if done incorrectly, can cause Kibana to be unusable. There's no safety net here. If you make a typo, unexpected exceptions will be thrown all over the place!"}))),_react.default.createElement(_eui.EuiSpacer,{size:"m"})):null};exports.ScriptingWarningCallOut=ScriptingWarningCallOut;ScriptingWarningCallOut.displayName="ScriptingWarningCallOut"},2005:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});Object.defineProperty(exports,"ScriptingHelpFlyout",{enumerable:true,get:function get(){return _help_flyout.ScriptingHelpFlyout}});var _help_flyout=__webpack_require__(2006)},2006:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.ScriptingHelpFlyout=void 0;var _react=_interopRequireDefault(__webpack_require__(0));var _propTypes=_interopRequireDefault(__webpack_require__(5));var _eui=__webpack_require__(3);var _scripting_syntax=__webpack_require__(2007);var _test_script=__webpack_require__(2008);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}var ScriptingHelpFlyout=function ScriptingHelpFlyout(_ref){var _ref2,_ref3;var _ref$isVisible=_ref.isVisible,isVisible=_ref$isVisible===void 0?false:_ref$isVisible,_ref$onClose=_ref.onClose,onClose=_ref$onClose===void 0?function(){}:_ref$onClose,indexPattern=_ref.indexPattern,lang=_ref.lang,name=_ref.name,script=_ref.script,executeScript=_ref.executeScript;var tabs=[(_ref2={id:"syntax",name:"Syntax"},_defineProperty(_ref2,"data-test-subj","syntaxTab"),_defineProperty(_ref2,"content",_react.default.createElement(_scripting_syntax.ScriptingSyntax,null)),_ref2),(_ref3={id:"test",name:"Preview results"},_defineProperty(_ref3,"data-test-subj","testTab"),_defineProperty(_ref3,"content",_react.default.createElement(_test_script.TestScript,{indexPattern:indexPattern,lang:lang,name:name,script:script,executeScript:executeScript})),_ref3)];return isVisible?_react.default.createElement(_eui.EuiFlyout,{onClose:onClose,"data-test-subj":"scriptedFieldsHelpFlyout"},_react.default.createElement(_eui.EuiFlyoutBody,null,_react.default.createElement(_eui.EuiTabbedContent,{tabs:tabs,initialSelectedTab:tabs[0]}))):null};exports.ScriptingHelpFlyout=ScriptingHelpFlyout;ScriptingHelpFlyout.displayName="ScriptingHelpFlyout";ScriptingHelpFlyout.propTypes={indexPattern:_propTypes.default.object.isRequired,lang:_propTypes.default.string.isRequired,name:_propTypes.default.string,script:_propTypes.default.string,executeScript:_propTypes.default.func.isRequired}},2007:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.ScriptingSyntax=void 0;var _react=_interopRequireWildcard(__webpack_require__(0));var _documentation_links=__webpack_require__(127);var _eui=__webpack_require__(3);var _react2=__webpack_require__(4);function _interopRequireWildcard(obj){if(obj&&obj.__esModule){return obj}else{var newObj={};if(obj!=null){for(var key in obj){if(Object.prototype.hasOwnProperty.call(obj,key)){var desc=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):{};if(desc.get||desc.set){Object.defineProperty(newObj,key,desc)}else{newObj[key]=obj[key]}}}}newObj.default=obj;return newObj}}var ScriptingSyntax=function ScriptingSyntax(){return _react.default.createElement(_react.Fragment,null,_react.default.createElement(_eui.EuiSpacer,null),_react.default.createElement(_eui.EuiText,null,_react.default.createElement("h3",null,_react.default.createElement(_react2.FormattedMessage,{id:"common.ui.fieldEditor.syntaxHeader",defaultMessage:"Syntax"})),_react.default.createElement("p",null,_react.default.createElement(_react2.FormattedMessage,{id:"common.ui.fieldEditor.syntax.defaultLabel.defaultDetail",defaultMessage:"By default, Kibana scripted fields use {painless}, a simple and secure scripting language designed specifically for use with Elasticsearch, to access values in the document use the following format:",values:{painless:_react.default.createElement(_eui.EuiLink,{target:"_blank",href:(0,_documentation_links.getDocLink)("scriptedFields.painless")},_react.default.createElement(_react2.FormattedMessage,{id:"common.ui.fieldEditor.syntax.defaultLabel.painlessLink",defaultMessage:"Painless"})," ",_react.default.createElement(_eui.EuiIcon,{type:"link"}))}})),_react.default.createElement("p",null,_react.default.createElement(_eui.EuiCode,null,_react.default.createElement(_react2.FormattedMessage,{id:"common.ui.fieldEditor.syntax.default.formatLabel",defaultMessage:"doc['some_field'].value"}))),_react.default.createElement("p",null,_react.default.createElement(_react2.FormattedMessage,{id:"common.ui.fieldEditor.syntax.painlessLabel.painlessDetail",defaultMessage:"Painless is powerful but easy to use. It provides access to many {javaAPIs}. Read up on its {syntax} and you'll be up to speed in no time!",values:{javaAPIs:_react.default.createElement(_eui.EuiLink,{target:"_blank",href:(0,_documentation_links.getDocLink)("scriptedFields.painlessApi")},_react.default.createElement(_react2.FormattedMessage,{id:"common.ui.fieldEditor.syntax.painlessLabel.javaAPIsLink",defaultMessage:"native Java APIs"}),"",_react.default.createElement(_eui.EuiIcon,{type:"link"})),syntax:_react.default.createElement(_eui.EuiLink,{target:"_blank",href:(0,_documentation_links.getDocLink)("scriptedFields.painlessSyntax")},_react.default.createElement(_react2.FormattedMessage,{id:"common.ui.fieldEditor.syntax.painlessLabel.syntaxLink",defaultMessage:"syntax"}),"",_react.default.createElement(_eui.EuiIcon,{type:"link"}))}})),_react.default.createElement("p",null,_react.default.createElement(_react2.FormattedMessage,{id:"common.ui.fieldEditor.syntax.kibanaLabel",defaultMessage:"Kibana currently imposes one special limitation on the painless scripts you write. They cannot contain named functions."})),_react.default.createElement("p",null,_react.default.createElement(_react2.FormattedMessage,{id:"common.ui.fieldEditor.syntax.lucene.commonLabel.commonDetail",defaultMessage:"Coming from an older version of Kibana? The {lucene} you know and love are still available. Lucene expressions are a lot like JavaScript, but limited to basic arithmetic, bitwise and comparison operations.",values:{lucene:_react.default.createElement(_eui.EuiLink,{target:"_blank",href:(0,_documentation_links.getDocLink)("scriptedFields.luceneExpressions")},_react.default.createElement(_react2.FormattedMessage,{id:"common.ui.fieldEditor.syntax.lucene.commonLabel.luceneLink",defaultMessage:"Lucene Expressions"}),"",_react.default.createElement(_eui.EuiIcon,{type:"link"}))}})),_react.default.createElement("p",null,_react.default.createElement(_react2.FormattedMessage,{id:"common.ui.fieldEditor.syntax.lucene.limitsLabel",defaultMessage:"There are a few limitations when using Lucene Expressions:"})),_react.default.createElement("ul",null,_react.default.createElement("li",null,_react.default.createElement(_react2.FormattedMessage,{id:"common.ui.fieldEditor.syntax.lucene.limits.typesLabel",defaultMessage:"Only numeric, boolean, date, and geo_point fields may be accessed"})),_react.default.createElement("li",null,_react.default.createElement(_react2.FormattedMessage,{id:"common.ui.fieldEditor.syntax.lucene.limits.fieldsLabel",defaultMessage:"Stored fields are not available"})),_react.default.createElement("li",null,_react.default.createElement(_react2.FormattedMessage,{id:"common.ui.fieldEditor.syntax.lucene.limits.sparseLabel",defaultMessage:"If a field is sparse (only some documents contain a value), documents missing the field will have a value of 0"}))),_react.default.createElement("p",null,_react.default.createElement(_react2.FormattedMessage,{id:"common.ui.fieldEditor.syntax.lucene.operationsLabel",defaultMessage:"Here are all the operations available to lucene expressions:"})),_react.default.createElement("ul",null,_react.default.createElement("li",null,_react.default.createElement(_react2.FormattedMessage,{id:"common.ui.fieldEditor.syntax.lucene.operations.arithmeticLabel",defaultMessage:"Arithmetic operators: {operators}",values:{operators:_react.default.createElement("code",null,"+ - * / %")}})),_react.default.createElement("li",null,_react.default.createElement(_react2.FormattedMessage,{id:"common.ui.fieldEditor.syntax.lucene.operations.bitwiseLabel",defaultMessage:"Bitwise operators: {operators}",values:{operators:_react.default.createElement("code",null,"| & ^ ~ << >> >>>")}})),_react.default.createElement("li",null,_react.default.createElement(_react2.FormattedMessage,{id:"common.ui.fieldEditor.syntax.lucene.operations.booleanLabel",defaultMessage:"Boolean operators (including the ternary operator): {operators}",values:{operators:_react.default.createElement("code",null,"&& || ! ?:")}})),_react.default.createElement("li",null,_react.default.createElement(_react2.FormattedMessage,{id:"common.ui.fieldEditor.syntax.lucene.operations.comparisonLabel",defaultMessage:"Comparison operators: {operators}",values:{operators:_react.default.createElement("code",null,"< <= == >= >")}})),_react.default.createElement("li",null,_react.default.createElement(_react2.FormattedMessage,{id:"common.ui.fieldEditor.syntax.lucene.operations.mathLabel",defaultMessage:"Common mathematic functions: {operators}",values:{operators:_react.default.createElement("code",null,"abs ceil exp floor ln log10 logn max min sqrt pow")}})),_react.default.createElement("li",null,_react.default.createElement(_react2.FormattedMessage,{id:"common.ui.fieldEditor.syntax.lucene.operations.trigLabel",defaultMessage:"Trigonometric library functions: {operators}",values:{operators:_react.default.createElement("code",null,"acosh acos asinh asin atanh atan atan2 cosh cos sinh sin tanh tan")}})),_react.default.createElement("li",null,_react.default.createElement(_react2.FormattedMessage,{id:"common.ui.fieldEditor.syntax.lucene.operations.distanceLabel",defaultMessage:"Distance functions: {operators}",values:{operators:_react.default.createElement("code",null,"haversin")}})),_react.default.createElement("li",null,_react.default.createElement(_react2.FormattedMessage,{id:"common.ui.fieldEditor.syntax.lucene.operations.miscellaneousLabel",defaultMessage:"Miscellaneous functions: {operators}",values:{operators:_react.default.createElement("code",null,"min, max")}})))))};exports.ScriptingSyntax=ScriptingSyntax},2008:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.TestScript=void 0;var _react=_interopRequireWildcard(__webpack_require__(0));var _propTypes=_interopRequireDefault(__webpack_require__(5));var _eui=__webpack_require__(3);var _react2=__webpack_require__(4);var _i18n=__webpack_require__(1);var _new_platform=__webpack_require__(6);var _public=__webpack_require__(7);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _interopRequireWildcard(obj){if(obj&&obj.__esModule){return obj}else{var newObj={};if(obj!=null){for(var key in obj){if(Object.prototype.hasOwnProperty.call(obj,key)){var desc=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):{};if(desc.get||desc.set){Object.defineProperty(newObj,key,desc)}else{newObj[key]=obj[key]}}}}newObj.default=obj;return newObj}}function _typeof(obj){if(typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"){_typeof=function _typeof(obj){return typeof obj}}else{_typeof=function _typeof(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj}}return _typeof(obj)}function ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);if(enumerableOnly)symbols=symbols.filter((function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable}));keys.push.apply(keys,symbols)}return keys}function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=arguments[i]!=null?arguments[i]:{};if(i%2){ownKeys(source,true).forEach((function(key){_defineProperty(target,key,source[key])}))}else if(Object.getOwnPropertyDescriptors){Object.defineProperties(target,Object.getOwnPropertyDescriptors(source))}else{ownKeys(source).forEach((function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))}))}}return target}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);return Constructor}function _possibleConstructorReturn(self,call){if(call&&(_typeof(call)==="object"||typeof call==="function")){return call}return _assertThisInitialized(self)}function _getPrototypeOf(o){_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o)};return _getPrototypeOf(o)}function _assertThisInitialized(self){if(self===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return self}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function")}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:true,configurable:true}});if(superClass)_setPrototypeOf(subClass,superClass)}function _setPrototypeOf(o,p){_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(o,p){o.__proto__=p;return o};return _setPrototypeOf(o,p)}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}var SearchBar=_new_platform.npStart.plugins.data.ui.SearchBar;var uiSettings=_new_platform.npStart.core.uiSettings;var TestScript=function(_Component){_inherits(TestScript,_Component);function TestScript(){var _getPrototypeOf2;var _this;_classCallCheck(this,TestScript);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key]}_this=_possibleConstructorReturn(this,(_getPrototypeOf2=_getPrototypeOf(TestScript)).call.apply(_getPrototypeOf2,[this].concat(args)));_defineProperty(_assertThisInitialized(_this),"state",{isLoading:false,additionalFields:[]});_defineProperty(_assertThisInitialized(_this),"previewScript",(function _callee(searchContext){var _this$props,indexPattern,lang,name,script,executeScript,query,esQueryConfigs,scriptResponse;return regeneratorRuntime.async((function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_this$props=_this.props,indexPattern=_this$props.indexPattern,lang=_this$props.lang,name=_this$props.name,script=_this$props.script,executeScript=_this$props.executeScript;if(!(!script||script.length===0)){_context.next=3;break}return _context.abrupt("return");case 3:_this.setState({isLoading:true});if(searchContext){esQueryConfigs=_public.esQuery.getEsQueryConfig(uiSettings);query=_public.esQuery.buildEsQuery(_this.props.indexPattern,searchContext.query,null,esQueryConfigs)}_context.next=7;return regeneratorRuntime.awrap(executeScript({name:name,lang:lang,script:script,indexPatternTitle:indexPattern.title,query:query,additionalFields:_this.state.additionalFields.map((function(option){return option.value}))}));case 7:scriptResponse=_context.sent;if(!(scriptResponse.status!==200)){_context.next=11;break}_this.setState({isLoading:false,previewData:scriptResponse});return _context.abrupt("return");case 11:_this.setState({isLoading:false,previewData:scriptResponse.hits.hits.map((function(hit){return _objectSpread({_id:hit._id},hit._source,{},hit.fields)}))});case 12:case"end":return _context.stop()}}}))}));_defineProperty(_assertThisInitialized(_this),"onAdditionalFieldsChange",(function(selectedOptions){_this.setState({additionalFields:selectedOptions})}));return _this}_createClass(TestScript,[{key:"componentDidMount",value:function componentDidMount(){if(this.props.script){this.previewScript()}}},{key:"renderPreview",value:function renderPreview(){var previewData=this.state.previewData;if(!previewData){return null}if(previewData.error){return _react.default.createElement(_eui.EuiCallOut,{title:_i18n.i18n.translate("common.ui.fieldEditor.testScript.errorMessage",{defaultMessage:"There's an error in your script"}),color:"danger",iconType:"cross"},_react.default.createElement(_eui.EuiCodeBlock,{language:"json",className:"scriptPreviewCodeBlock","data-test-subj":"scriptedFieldPreview"},JSON.stringify(previewData.error,null," ")))}return _react.default.createElement(_react.Fragment,null,_react.default.createElement(_eui.EuiTitle,{size:"xs"},_react.default.createElement("p",null,_react.default.createElement(_react2.FormattedMessage,{id:"common.ui.fieldEditor.testScript.resultsLabel",defaultMessage:"First 10 results"}))),_react.default.createElement(_eui.EuiSpacer,{size:"s"}),_react.default.createElement(_eui.EuiCodeBlock,{language:"json",className:"scriptPreviewCodeBlock","data-test-subj":"scriptedFieldPreview"},JSON.stringify(previewData,null," ")))}},{key:"renderToolbar",value:function renderToolbar(){var fieldsByTypeMap=new Map;var fields=[];this.props.indexPattern.fields.filter((function(field){var isMultiField=field.subType&&field.subType.multi;return!field.name.startsWith("_")&&!isMultiField&&!field.scripted})).forEach((function(field){if(fieldsByTypeMap.has(field.type)){var fieldsList=fieldsByTypeMap.get(field.type);fieldsList.push(field.name);fieldsByTypeMap.set(field.type,fieldsList)}else{fieldsByTypeMap.set(field.type,[field.name])}}));fieldsByTypeMap.forEach((function(fieldsList,fieldType){fields.push({label:fieldType,options:fieldsList.sort().map((function(fieldName){return{value:fieldName,label:fieldName}}))})}));fields.sort((function(a,b){if(a.label<b.label)return-1;if(a.label>b.label)return 1;return 0}));return _react.default.createElement(_react.Fragment,null,_react.default.createElement(_eui.EuiFormRow,{label:_i18n.i18n.translate("common.ui.fieldEditor.testScript.fieldsLabel",{defaultMessage:"Additional fields"}),fullWidth:true},_react.default.createElement(_eui.EuiComboBox,{placeholder:_i18n.i18n.translate("common.ui.fieldEditor.testScript.fieldsPlaceholder",{defaultMessage:"Select..."}),options:fields,selectedOptions:this.state.additionalFields,onChange:this.onAdditionalFieldsChange,"data-test-subj":"additionalFieldsSelect",fullWidth:true})),_react.default.createElement("div",{className:"testScript__searchBar"},_react.default.createElement(SearchBar,{showFilterBar:false,showDatePicker:false,showQueryInput:true,query:{language:uiSettings.get("search:queryLanguage"),query:""},onQuerySubmit:this.previewScript,indexPatterns:[this.props.indexPattern],customSubmitButton:_react.default.createElement(_eui.EuiButton,{disabled:this.props.script?false:true,isLoading:this.state.isLoading,"data-test-subj":"runScriptButton"},_react.default.createElement(_react2.FormattedMessage,{id:"common.ui.fieldEditor.testScript.submitButtonLabel",defaultMessage:"Run script"}))})))}},{key:"render",value:function render(){return _react.default.createElement(_react.Fragment,null,_react.default.createElement(_eui.EuiSpacer,null),_react.default.createElement(_eui.EuiText,null,_react.default.createElement("h3",null,_react.default.createElement(_react2.FormattedMessage,{id:"common.ui.fieldEditor.testScript.resultsTitle",defaultMessage:"Preview results"})),_react.default.createElement("p",null,_react.default.createElement(_react2.FormattedMessage,{id:"common.ui.fieldEditor.testScript.instructions",defaultMessage:"Run your script to preview the first 10 results. You can also select some additional fields to include in your results to gain more context or add a query to filter on specific documents."}))),_react.default.createElement(_eui.EuiSpacer,null),this.renderToolbar(),_react.default.createElement(_eui.EuiSpacer,null),this.renderPreview())}}]);return TestScript}(_react.Component);exports.TestScript=TestScript;TestScript.propTypes={indexPattern:_propTypes.default.object.isRequired,lang:_propTypes.default.string.isRequired,name:_propTypes.default.string,script:_propTypes.default.string,executeScript:_propTypes.default.func.isRequired};TestScript.defaultProps={name:"myScriptedField"}},2009:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});Object.defineProperty(exports,"FieldFormatEditor",{enumerable:true,get:function get(){return _field_format_editor.FieldFormatEditor}});var _field_format_editor=__webpack_require__(2010)},2010:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.FieldFormatEditor=void 0;var _react=_interopRequireWildcard(__webpack_require__(0));var _propTypes=_interopRequireDefault(__webpack_require__(5));function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _interopRequireWildcard(obj){if(obj&&obj.__esModule){return obj}else{var newObj={};if(obj!=null){for(var key in obj){if(Object.prototype.hasOwnProperty.call(obj,key)){var desc=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):{};if(desc.get||desc.set){Object.defineProperty(newObj,key,desc)}else{newObj[key]=obj[key]}}}}newObj.default=obj;return newObj}}function _typeof(obj){if(typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"){_typeof=function _typeof(obj){return typeof obj}}else{_typeof=function _typeof(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj}}return _typeof(obj)}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);return Constructor}function _possibleConstructorReturn(self,call){if(call&&(_typeof(call)==="object"||typeof call==="function")){return call}return _assertThisInitialized(self)}function _assertThisInitialized(self){if(self===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return self}function _getPrototypeOf(o){_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o)};return _getPrototypeOf(o)}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function")}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:true,configurable:true}});if(superClass)_setPrototypeOf(subClass,superClass)}function _setPrototypeOf(o,p){_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(o,p){o.__proto__=p;return o};return _setPrototypeOf(o,p)}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}var FieldFormatEditor=function(_PureComponent){_inherits(FieldFormatEditor,_PureComponent);function FieldFormatEditor(props){var _this;_classCallCheck(this,FieldFormatEditor);_this=_possibleConstructorReturn(this,_getPrototypeOf(FieldFormatEditor).call(this,props));_this.state={EditorComponent:null};return _this}_createClass(FieldFormatEditor,[{key:"render",value:function render(){var EditorComponent=this.state.EditorComponent;var _this$props=this.props,fieldType=_this$props.fieldType,fieldFormat=_this$props.fieldFormat,fieldFormatParams=_this$props.fieldFormatParams,onChange=_this$props.onChange,onError=_this$props.onError;return _react.default.createElement(_react.Fragment,null,EditorComponent?_react.default.createElement(EditorComponent,{fieldType:fieldType,format:fieldFormat,formatParams:fieldFormatParams,onChange:onChange,onError:onError}):null)}}],[{key:"getDerivedStateFromProps",value:function getDerivedStateFromProps(nextProps){return{EditorComponent:nextProps.fieldFormatEditors.getEditor(nextProps.fieldFormatId)||null}}}]);return FieldFormatEditor}(_react.PureComponent);exports.FieldFormatEditor=FieldFormatEditor;_defineProperty(FieldFormatEditor,"propTypes",{fieldType:_propTypes.default.string.isRequired,fieldFormat:_propTypes.default.object.isRequired,fieldFormatId:_propTypes.default.string.isRequired,fieldFormatParams:_propTypes.default.object.isRequired,fieldFormatEditors:_propTypes.default.object.isRequired,onChange:_propTypes.default.func.isRequired,onError:_propTypes.default.func.isRequired})},2011:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.DEFAULT_FIELD_TYPES=exports.FIELD_TYPES_BY_LANG=void 0;var _public=__webpack_require__(7);var FIELD_TYPES_BY_LANG={painless:["number","string","date","boolean"],expression:["number"]};exports.FIELD_TYPES_BY_LANG=FIELD_TYPES_BY_LANG;var DEFAULT_FIELD_TYPES=(0,_public.getKbnTypeNames)();exports.DEFAULT_FIELD_TYPES=DEFAULT_FIELD_TYPES},2012:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});Object.defineProperty(exports,"copyField",{enumerable:true,get:function get(){return _copy_field.copyField}});Object.defineProperty(exports,"getDefaultFormat",{enumerable:true,get:function get(){return _get_default_format.getDefaultFormat}});Object.defineProperty(exports,"executeScript",{enumerable:true,get:function get(){return _validate_script.executeScript}});Object.defineProperty(exports,"isScriptValid",{enumerable:true,get:function get(){return _validate_script.isScriptValid}});var _copy_field=__webpack_require__(2013);var _get_default_format=__webpack_require__(2014);var _validate_script=__webpack_require__(2015)},2013:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.copyField=void 0;var _lodash=__webpack_require__(2);function ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);if(enumerableOnly)symbols=symbols.filter((function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable}));keys.push.apply(keys,symbols)}return keys}function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=arguments[i]!=null?arguments[i]:{};if(i%2){ownKeys(source,true).forEach((function(key){_defineProperty(target,key,source[key])}))}else if(Object.getOwnPropertyDescriptors){Object.defineProperties(target,Object.getOwnPropertyDescriptors(source))}else{ownKeys(source).forEach((function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))}))}}return target}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}var copyField=function copyField(field,indexPattern,Field){var changes={};var newFieldProps={toActualField:{value:function value(){return new Field(indexPattern,_objectSpread({},field.$$spec,{},changes))}}};Object.getOwnPropertyNames(field).forEach((function(prop){var desc=Object.getOwnPropertyDescriptor(field,prop);newFieldProps[prop]={enumerable:desc.enumerable,get:function get(){return(0,_lodash.has)(changes,prop)?changes[prop]:field[prop]},set:function set(v){changes[prop]=v}}}));return Object.create(null,newFieldProps)};exports.copyField=copyField},2014:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.getDefaultFormat=void 0;var _i18n=__webpack_require__(1);function _typeof(obj){if(typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"){_typeof=function _typeof(obj){return typeof obj}}else{_typeof=function _typeof(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj}}return _typeof(obj)}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _possibleConstructorReturn(self,call){if(call&&(_typeof(call)==="object"||typeof call==="function")){return call}return _assertThisInitialized(self)}function _assertThisInitialized(self){if(self===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return self}function _getPrototypeOf(o){_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o)};return _getPrototypeOf(o)}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function")}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:true,configurable:true}});if(superClass)_setPrototypeOf(subClass,superClass)}function _setPrototypeOf(o,p){_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(o,p){o.__proto__=p;return o};return _setPrototypeOf(o,p)}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}var getDefaultFormat=function getDefaultFormat(Format){var DefaultFormat=function(_Format){_inherits(DefaultFormat,_Format);function DefaultFormat(){_classCallCheck(this,DefaultFormat);return _possibleConstructorReturn(this,_getPrototypeOf(DefaultFormat).apply(this,arguments))}return DefaultFormat}(Format);_defineProperty(DefaultFormat,"id","");_defineProperty(DefaultFormat,"resolvedTitle",Format.title);_defineProperty(DefaultFormat,"title",_i18n.i18n.translate("common.ui.fieldEditor.defaultFormatDropDown",{defaultMessage:"- Default -"}));return DefaultFormat};exports.getDefaultFormat=getDefaultFormat},2015:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.isScriptValid=exports.executeScript=void 0;var _kfetch=__webpack_require__(67);function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}var executeScript=function executeScript(_ref){var name,lang,script,indexPatternTitle,query,_ref$additionalFields,additionalFields,header,search,body,esResp;return regeneratorRuntime.async((function executeScript$(_context){while(1){switch(_context.prev=_context.next){case 0:name=_ref.name,lang=_ref.lang,script=_ref.script,indexPatternTitle=_ref.indexPatternTitle,query=_ref.query,_ref$additionalFields=_ref.additionalFields,additionalFields=_ref$additionalFields===void 0?[]:_ref$additionalFields;header={index:indexPatternTitle,ignore_unavailable:true};search={query:{match_all:{}},script_fields:_defineProperty({},name,{script:{lang:lang,source:script}}),size:10,timeout:"30s"};if(additionalFields.length>0){search._source=additionalFields}if(query){search.query=query}body="".concat(JSON.stringify(header),"\n").concat(JSON.stringify(search),"\n");_context.next=8;return regeneratorRuntime.awrap((0,_kfetch.kfetch)({method:"POST",pathname:"/elasticsearch/_msearch",body:body}));case 8:esResp=_context.sent;return _context.abrupt("return",esResp.responses[0]);case 10:case"end":return _context.stop()}}}))};exports.executeScript=executeScript;var isScriptValid=function isScriptValid(_ref2){var name,lang,script,indexPatternTitle,scriptResponse;return regeneratorRuntime.async((function isScriptValid$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:name=_ref2.name,lang=_ref2.lang,script=_ref2.script,indexPatternTitle=_ref2.indexPatternTitle;_context2.next=3;return regeneratorRuntime.awrap(executeScript({name:name,lang:lang,script:script,indexPatternTitle:indexPatternTitle}));case 3:scriptResponse=_context2.sent;if(!(scriptResponse.status!==200)){_context2.next=6;break}return _context2.abrupt("return",false);case 6:return _context2.abrupt("return",true);case 7:case"end":return _context2.stop()}}}))};exports.isScriptValid=isScriptValid},2017:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.IndicesEditSectionsProvider=IndicesEditSectionsProvider;var _lodash=_interopRequireDefault(__webpack_require__(2));var _i18n=__webpack_require__(1);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function filterBy(items,key,filter){var lowercaseFilter=(filter||"").toLowerCase();return items.filter((function(item){return item[key].toLowerCase().includes(lowercaseFilter)}))}function getCounts(fields,sourceFilters){var fieldFilter=arguments.length>2&&arguments[2]!==undefined?arguments[2]:"";var fieldCount=_lodash.default.countBy(filterBy(fields,"name",fieldFilter),(function(field){return field.scripted?"scripted":"indexed"}));_lodash.default.defaults(fieldCount,{indexed:0,scripted:0,sourceFilters:sourceFilters?filterBy(sourceFilters,"value",fieldFilter).length:0});return fieldCount}function IndicesEditSectionsProvider(){return function(indexPattern,fieldFilter,indexPatternListProvider){var totalCount=getCounts(indexPattern.fields,indexPattern.sourceFilters);var filteredCount=getCounts(indexPattern.fields,indexPattern.sourceFilters,fieldFilter);var editSections=[];editSections.push({title:_i18n.i18n.translate("kbn.management.editIndexPattern.tabs.fieldsHeader",{defaultMessage:"Fields"}),index:"indexedFields",count:filteredCount.indexed,totalCount:totalCount.indexed});if(indexPatternListProvider.areScriptedFieldsEnabled(indexPattern)){editSections.push({title:_i18n.i18n.translate("kbn.management.editIndexPattern.tabs.scriptedHeader",{defaultMessage:"Scripted fields"}),index:"scriptedFields",count:filteredCount.scripted,totalCount:totalCount.scripted})}editSections.push({title:_i18n.i18n.translate("kbn.management.editIndexPattern.tabs.sourceHeader",{defaultMessage:"Source filters"}),index:"sourceFilters",count:filteredCount.sourceFilters,totalCount:totalCount.sourceFilters});return editSections}}},2018:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__);__webpack_exports__["default"]='<kbn-management-app section="kibana/index_patterns" omit-breadcrumb-pages="[\'index_patterns\']">\n  <div class="euiPanel euiPanel--paddingLarge">\n    <div\n      ng-controller="managementIndexPatternsEdit"\n      data-test-subj="editIndexPattern"\n      role="region"\n      aria-label="{{::\'kbn.management.editIndexPattern.detailsAria\' | i18n: { defaultMessage: \'Index pattern details\' } }}"\n    >\n      \x3c!-- Header --\x3e\n      <kbn-management-index-patterns-header\n        index-pattern="indexPattern"\n        set-default="setDefaultPattern()"\n        refresh-fields="refreshFields()"\n        delete="removePattern()"\n      ></kbn-management-index-patterns-header>\n\n      <div class="euiSpacer euiSpacer--s"></div>\n      <p ng-if="::(indexPattern.timeFieldName || (indexPattern.tags && indexPattern.tags.length))">\n        <span ng-if="::indexPattern.timeFieldName">\n          <span class="euiBadge euiBadge--warning">\n            <span class="euiBadge__content">\n              <span class="euiBadge__text">\n                <span\n                  i18n-id="kbn.management.editIndexPattern.timeFilterHeader"\n                  i18n-default-message="Time Filter field name: {timeFieldName}"\n                  i18n-values="{ timeFieldName: indexPattern.timeFieldName }">\n                </span>\n              </span>\n            </span>\n          </span>\n        </span>\n        <span ng-repeat="tag in indexPattern.tags">\n          <span class="euiBadge euiBadge--hollow">\n            <span class="euiBadge__content">\n              <span class="euiBadge__text">\n                  {{tag.name}}\n                </span>\n              </span>\n            </span>\n        </span>\n      </p>\n\n      <div class="euiSpacer euiSpacer--m"></div>\n\n      <div class="euiText">\n        <p>\n          <span i18n-id="kbn.management.editIndexPattern.timeFilterLabel.timeFilterDetail"\n            i18n-default-message="This page lists every field in the {indexPatternTitle} index and the field\'s associated core type as recorded by Elasticsearch. To change a field type, use the Elasticsearch"\n            i18n-values="{ html_indexPatternTitle: \'<strong>\' + indexPattern.title + \'</strong>\' }"></span>\n          <a target="_blank" class="euiLink euiLink--primary" href="http://www.elastic.co/guide/en/elasticsearch/reference/current/mapping.html">\n            <span i18n-id="kbn.management.editIndexPattern.timeFilterLabel.mappingAPILink"\n                  i18n-default-message="Mapping API"></span>\n            <i aria-hidden="true" class="fa-link fa"></i>\n          </a>\n        </p>\n      </div>\n\n      <div class="euiSpacer euiSpacer--m"></div>\n\n      \x3c!-- Alerts --\x3e\n      <div\n        ng-if="indexPattern.isUnsupportedTimePattern()"\n        class="kuiInfoPanel kuiInfoPanel--error kuiVerticalRhythm"\n      >\n        <div class="kuiInfoPanelHeader">\n          <span class="kuiInfoPanelHeader__icon kuiIcon kuiIcon--error fa-warning"></span>\n          <span class="kuiInfoPanelHeader__title"\n                i18n-id="kbn.management.editIndexPattern.unsupportedTimePatternHeader"\n                i18n-default-message="Support for repeating index patterns removed">\n          </span>\n        </div>\n\n        <div class="kuiInfoPanelBody">\n          <div class="kuiInfoPanelBody__message">\n            <span i18n-id="kbn.management.editIndexPattern.unsupportedTimePatternLabel"\n                  i18n-default-message="Support for time-interval based index patterns has been removed! In the next major version of Kibana these index patterns will stop working. Migrate this index pattern to a wildcard pattern by specifying the new pattern below."></span>\n          </div>\n          <form>\n            <input\n              class="form-control"\n              type="text"\n              ng-model="migration.newTitle"\n            />\n          </form>\n          <button ng-disabled="migration.isMigrating || !migration.newTitle.trim()" class="kuiButton kuiButton--primary kuiButton--iconText" ng-click="migrate()">\n            <span ng-if="migration.isMigrating" class="euiLoadingSpinner euiLoadingSpinner--medium" />\n            <span i18n-id="kbn.management.editIndexPattern.migrate"\n                  i18n-default-message="Migrate"></span>\n          </button>\n        </div>\n      </div>\n\n      <div\n        ng-if="conflictFields.length"\n        class="kuiInfoPanel kuiInfoPanel--warning kuiVerticalRhythm"\n      >\n        <div class="kuiInfoPanelHeader">\n          <span class="kuiInfoPanelHeader__icon kuiIcon kuiIcon--warning fa-bolt"></span>\n          <span class="kuiInfoPanelHeader__title"\n                i18n-id="kbn.management.editIndexPattern.mappingConflictHeader"\n                i18n-default-message="Mapping conflict"></span>\n        </div>\n\n        <div class="kuiInfoPanelBody">\n          <div class="kuiInfoPanelBody__message">\n            <span i18n-id="kbn.management.editIndexPattern.mappingConflictLabel"\n                  i18n-default-message="{conflictFieldsLength, plural, one {A field is} other {# fields are}} defined as several types (string, integer, etc) across the indices that match this pattern. You may still be able to use these conflict fields in parts of Kibana, but they will be unavailable for functions that require Kibana to know their type. Correcting this issue will require reindexing your data."\n                  i18n-values="{ conflictFieldsLength: conflictFields.length }"></span>\n          </div>\n        </div>\n      </div>\n\n      \x3c!-- Tabs --\x3e\n      <div class="kuiTabs kuiVerticalRhythm">\n        <button\n          class="kuiTab"\n          ng-repeat="editSection in editSections"\n          ng-class="{ \'kuiTab-isSelected\': state.tab === editSection.index }"\n          ng-click="changeTab(editSection)"\n          data-test-subj="tab-{{ editSection.index }}"\n        >\n          {{ editSection.title }}\n          <span\n            data-test-subj="tab-count-{{ editSection.index }}"\n            aria-label="{{:: editSection.count + \' \' + editSection.title}}"\n          >\n            <span ng-if="editSection.count != editSection.totalCount">\n              ({{ editSection.count }} / {{ editSection.totalCount }})\n            </span>\n            <span ng-if="editSection.count == editSection.totalCount">\n              ({{ editSection.count }})\n            </span>\n          </span>\n        </button>\n      </div>\n\n      \x3c!-- Field Filters --\x3e\n      <form role="form" class="kuiFieldGroup kuiVerticalRhythm">\n        <div class="kuiFieldGroupSection kuiFieldGroupSection--wide">\n          <div class="kuiSearchInput">\n            <div class="kuiSearchInput__icon kuiIcon fa-search"></div>\n            <input\n              class="kuiSearchInput__input"\n              type="text"\n              aria-label="{{::\'kbn.management.editIndexPattern.fields.filterAria\' | i18n: {defaultMessage: \'Filter\'} }}"\n              ng-model="fieldFilter"\n              placeholder="{{::\'kbn.management.editIndexPattern.fields.filterPlaceholder\' | i18n: {defaultMessage: \'Filter\'} }}"\n              data-test-subj="indexPatternFieldFilter"\n            >\n          </div>\n        </div>\n\n        <div\n          class="kuiFieldGroupSection"\n          ng-if="state.tab == \'indexedFields\' && indexedFieldTypes.length > 0"\n        >\n          <select\n            data-test-subj="indexedFieldTypeFilterDropdown"\n            class="kuiSelect"\n            ng-model="indexedFieldTypeFilter"\n            ng-change="changeFilter(\'indexedFieldTypeFilter\', indexedFieldTypeFilter)"\n            ng-options="o for o in indexedFieldTypes"\n          >\n            <option value=""\n                    i18n-id="kbn.management.editIndexPattern.fields.allTypesDropDown"\n                    i18n-default-message="All field types"></option>\n          </select>\n        </div>\n\n        <div\n          class="kuiFieldGroupSection"\n          ng-if="state.tab == \'scriptedFields\' && scriptedFieldLanguages.length > 0"\n        >\n          <select\n            data-test-subj="scriptedFieldLanguageFilterDropdown"\n            class="kuiSelect"\n            ng-model="scriptedFieldLanguageFilter"\n            ng-change="changeFilter(\'scriptedFieldLanguageFilter\', scriptedFieldLanguageFilter)"\n            ng-options="o for o in scriptedFieldLanguages"\n          >\n            <option value=""\n                    i18n-id="kbn.management.editIndexPattern.fields.allLangsDropDown"\n                    i18n-default-message="All languages"></option>\n          </select>\n        </div>\n      </form>\n\n      \x3c!-- Tab content --\x3e\n      <div class="kuiVerticalRhythm">\n        <div id="reactIndexedFieldsTable"></div>\n\n        <div id="reactScriptedFieldsTable"></div>\n\n        <div id="reactSourceFiltersTable"></div>\n      </div>\n    </div>\n  </div>\n</kbn-management-app>\n'},2019:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});Object.defineProperty(exports,"SourceFiltersTable",{enumerable:true,get:function get(){return _source_filters_table.SourceFiltersTable}});var _source_filters_table=__webpack_require__(2020)},2020:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.SourceFiltersTable=void 0;var _react=_interopRequireWildcard(__webpack_require__(0));var _propTypes=_interopRequireDefault(__webpack_require__(5));var _reselect=__webpack_require__(649);var _eui=__webpack_require__(3);var _table=__webpack_require__(2021);var _header=__webpack_require__(2023);var _add_filter=__webpack_require__(2025);var _react2=__webpack_require__(4);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _interopRequireWildcard(obj){if(obj&&obj.__esModule){return obj}else{var newObj={};if(obj!=null){for(var key in obj){if(Object.prototype.hasOwnProperty.call(obj,key)){var desc=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):{};if(desc.get||desc.set){Object.defineProperty(newObj,key,desc)}else{newObj[key]=obj[key]}}}}newObj.default=obj;return newObj}}function _typeof(obj){if(typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"){_typeof=function _typeof(obj){return typeof obj}}else{_typeof=function _typeof(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj}}return _typeof(obj)}function _toConsumableArray(arr){return _arrayWithoutHoles(arr)||_iterableToArray(arr)||_nonIterableSpread()}function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance")}function _iterableToArray(iter){if(Symbol.iterator in Object(iter)||Object.prototype.toString.call(iter)==="[object Arguments]")return Array.from(iter)}function _arrayWithoutHoles(arr){if(Array.isArray(arr)){for(var i=0,arr2=new Array(arr.length);i<arr.length;i++){arr2[i]=arr[i]}return arr2}}function ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);if(enumerableOnly)symbols=symbols.filter((function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable}));keys.push.apply(keys,symbols)}return keys}function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=arguments[i]!=null?arguments[i]:{};if(i%2){ownKeys(source,true).forEach((function(key){_defineProperty(target,key,source[key])}))}else if(Object.getOwnPropertyDescriptors){Object.defineProperties(target,Object.getOwnPropertyDescriptors(source))}else{ownKeys(source).forEach((function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))}))}}return target}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);return Constructor}function _possibleConstructorReturn(self,call){if(call&&(_typeof(call)==="object"||typeof call==="function")){return call}return _assertThisInitialized(self)}function _getPrototypeOf(o){_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o)};return _getPrototypeOf(o)}function _assertThisInitialized(self){if(self===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return self}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function")}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:true,configurable:true}});if(superClass)_setPrototypeOf(subClass,superClass)}function _setPrototypeOf(o,p){_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(o,p){o.__proto__=p;return o};return _setPrototypeOf(o,p)}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}var SourceFiltersTable=function(_Component){_inherits(SourceFiltersTable,_Component);function SourceFiltersTable(_props){var _this;_classCallCheck(this,SourceFiltersTable);_this=_possibleConstructorReturn(this,_getPrototypeOf(SourceFiltersTable).call(this,_props));_defineProperty(_assertThisInitialized(_this),"updateFilters",(function(){var sourceFilters=_this.props.indexPattern.sourceFilters||[];var filters=sourceFilters.map((function(filter){return _objectSpread({},filter,{clientId:++_this.clientSideId})}));_this.setState({filters:filters})}));_defineProperty(_assertThisInitialized(_this),"getFilteredFilters",(0,_reselect.createSelector)((function(state){return state.filters}),(function(state,props){return props.filterFilter}),(function(filters,filterFilter){if(filterFilter){var filterFilterToLowercase=filterFilter.toLowerCase();return filters.filter((function(filter){return filter.value.toLowerCase().includes(filterFilterToLowercase)}))}return filters})));_defineProperty(_assertThisInitialized(_this),"startDeleteFilter",(function(filter){_this.setState({filterToDelete:filter,isDeleteConfirmationModalVisible:true})}));_defineProperty(_assertThisInitialized(_this),"hideDeleteConfirmationModal",(function(){_this.setState({filterToDelete:undefined,isDeleteConfirmationModalVisible:false})}));_defineProperty(_assertThisInitialized(_this),"deleteFilter",(function _callee(){var _this$props,indexPattern,onAddOrRemoveFilter,_this$state,filterToDelete,filters;return regeneratorRuntime.async((function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_this$props=_this.props,indexPattern=_this$props.indexPattern,onAddOrRemoveFilter=_this$props.onAddOrRemoveFilter;_this$state=_this.state,filterToDelete=_this$state.filterToDelete,filters=_this$state.filters;indexPattern.sourceFilters=filters.filter((function(filter){return filter.clientId!==filterToDelete.clientId}));_this.setState({isSaving:true});_context.next=6;return regeneratorRuntime.awrap(indexPattern.save());case 6:onAddOrRemoveFilter&&onAddOrRemoveFilter();_this.updateFilters();_this.setState({isSaving:false});_this.hideDeleteConfirmationModal();case 10:case"end":return _context.stop()}}}))}));_defineProperty(_assertThisInitialized(_this),"onAddFilter",(function _callee2(value){var _this$props2,indexPattern,onAddOrRemoveFilter;return regeneratorRuntime.async((function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:_this$props2=_this.props,indexPattern=_this$props2.indexPattern,onAddOrRemoveFilter=_this$props2.onAddOrRemoveFilter;indexPattern.sourceFilters=[].concat(_toConsumableArray(indexPattern.sourceFilters||[]),[{value:value}]);_this.setState({isSaving:true});_context2.next=5;return regeneratorRuntime.awrap(indexPattern.save());case 5:onAddOrRemoveFilter&&onAddOrRemoveFilter();_this.updateFilters();_this.setState({isSaving:false});case 8:case"end":return _context2.stop()}}}))}));_defineProperty(_assertThisInitialized(_this),"saveFilter",(function _callee3(_ref){var filterId,newFilterValue,indexPattern,filters;return regeneratorRuntime.async((function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:filterId=_ref.filterId,newFilterValue=_ref.newFilterValue;indexPattern=_this.props.indexPattern;filters=_this.state.filters;indexPattern.sourceFilters=filters.map((function(filter){if(filter.clientId===filterId){return{value:newFilterValue,clientId:filter.clientId}}return filter}));_this.setState({isSaving:true});_context3.next=7;return regeneratorRuntime.awrap(indexPattern.save());case 7:_this.updateFilters();_this.setState({isSaving:false});case 9:case"end":return _context3.stop()}}}))}));_this.clientSideId=0;_this.state={filterToDelete:undefined,isDeleteConfirmationModalVisible:false,isSaving:false,filters:[]};return _this}_createClass(SourceFiltersTable,[{key:"UNSAFE_componentWillMount",value:function UNSAFE_componentWillMount(){this.updateFilters()}},{key:"renderDeleteConfirmationModal",value:function renderDeleteConfirmationModal(){var filterToDelete=this.state.filterToDelete;if(!filterToDelete){return null}return _react.default.createElement(_eui.EuiOverlayMask,null,_react.default.createElement(_eui.EuiConfirmModal,{title:_react.default.createElement(_react2.FormattedMessage,{id:"kbn.management.editIndexPattern.source.deleteSourceFilterLabel",defaultMessage:"Delete source filter '{value}'?",values:{value:filterToDelete.value}}),onCancel:this.hideDeleteConfirmationModal,onConfirm:this.deleteFilter,cancelButtonText:_react.default.createElement(_react2.FormattedMessage,{id:"kbn.management.editIndexPattern.source.deleteFilter.cancelButtonLabel",defaultMessage:"Cancel"}),buttonColor:"danger",confirmButtonText:_react.default.createElement(_react2.FormattedMessage,{id:"kbn.management.editIndexPattern.source.deleteFilter.deleteButtonLabel",defaultMessage:"Delete"}),defaultFocusedButton:_eui.EUI_MODAL_CONFIRM_BUTTON}))}},{key:"render",value:function render(){var _this$props3=this.props,indexPattern=_this$props3.indexPattern,fieldWildcardMatcher=_this$props3.fieldWildcardMatcher;var isSaving=this.state.isSaving;var filteredFilters=this.getFilteredFilters(this.state,this.props);return _react.default.createElement("div",null,_react.default.createElement(_header.Header,null),_react.default.createElement(_add_filter.AddFilter,{onAddFilter:this.onAddFilter}),_react.default.createElement(_eui.EuiSpacer,{size:"l"}),_react.default.createElement(_table.Table,{isSaving:isSaving,indexPattern:indexPattern,items:filteredFilters,fieldWildcardMatcher:fieldWildcardMatcher,deleteFilter:this.startDeleteFilter,saveFilter:this.saveFilter}),this.renderDeleteConfirmationModal())}}]);return SourceFiltersTable}(_react.Component);exports.SourceFiltersTable=SourceFiltersTable;_defineProperty(SourceFiltersTable,"propTypes",{indexPattern:_propTypes.default.object.isRequired,filterFilter:_propTypes.default.string,fieldWildcardMatcher:_propTypes.default.func.isRequired,onAddOrRemoveFilter:_propTypes.default.func})},2021:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});Object.defineProperty(exports,"Table",{enumerable:true,get:function get(){return _table.Table}});var _table=__webpack_require__(2022)},2022:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.Table=void 0;var _react=_interopRequireWildcard(__webpack_require__(0));var _propTypes=_interopRequireDefault(__webpack_require__(5));var _eui=__webpack_require__(3);var _i18n=__webpack_require__(1);var _react2=__webpack_require__(4);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _interopRequireWildcard(obj){if(obj&&obj.__esModule){return obj}else{var newObj={};if(obj!=null){for(var key in obj){if(Object.prototype.hasOwnProperty.call(obj,key)){var desc=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):{};if(desc.get||desc.set){Object.defineProperty(newObj,key,desc)}else{newObj[key]=obj[key]}}}}newObj.default=obj;return newObj}}function _typeof(obj){if(typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"){_typeof=function _typeof(obj){return typeof obj}}else{_typeof=function _typeof(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj}}return _typeof(obj)}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);return Constructor}function _possibleConstructorReturn(self,call){if(call&&(_typeof(call)==="object"||typeof call==="function")){return call}return _assertThisInitialized(self)}function _getPrototypeOf(o){_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o)};return _getPrototypeOf(o)}function _assertThisInitialized(self){if(self===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return self}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function")}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:true,configurable:true}});if(superClass)_setPrototypeOf(subClass,superClass)}function _setPrototypeOf(o,p){_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(o,p){o.__proto__=p;return o};return _setPrototypeOf(o,p)}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}var Table=function(_Component){_inherits(Table,_Component);function Table(props){var _this;_classCallCheck(this,Table);_this=_possibleConstructorReturn(this,_getPrototypeOf(Table).call(this,props));_defineProperty(_assertThisInitialized(_this),"startEditingFilter",(function(id,value){return _this.setState({editingFilterId:id,editingFilterValue:value})}));_defineProperty(_assertThisInitialized(_this),"stopEditingFilter",(function(){return _this.setState({editingFilterId:null})}));_defineProperty(_assertThisInitialized(_this),"onEditingFilterChange",(function(e){return _this.setState({editingFilterValue:e.target.value})}));_defineProperty(_assertThisInitialized(_this),"onEditFieldKeyDown",(function(_ref){var keyCode=_ref.keyCode;if(_eui.keyCodes.ENTER===keyCode){_this.props.saveFilter({filterId:_this.state.editingFilterId,newFilterValue:_this.state.editingFilterValue});_this.stopEditingFilter()}if(_eui.keyCodes.ESCAPE===keyCode){_this.stopEditingFilter()}}));_this.state={editingFilterId:null,editingFilterValue:null};return _this}_createClass(Table,[{key:"getColumns",value:function getColumns(){var _this2=this;var _this$props=this.props,deleteFilter=_this$props.deleteFilter,fieldWildcardMatcher=_this$props.fieldWildcardMatcher,indexPattern=_this$props.indexPattern,saveFilter=_this$props.saveFilter;return[{field:"value",name:_i18n.i18n.translate("kbn.management.editIndexPattern.source.table.filterHeader",{defaultMessage:"Filter"}),description:_i18n.i18n.translate("kbn.management.editIndexPattern.source.table.filterDescription",{defaultMessage:"Filter name"}),dataType:"string",sortable:true,render:function render(value,filter){if(_this2.state.editingFilterId===filter.clientId){return _react.default.createElement(_eui.EuiFieldText,{autoFocus:true,value:_this2.state.editingFilterValue,onChange:_this2.onEditingFilterChange,onKeyDown:_this2.onEditFieldKeyDown})}return _react.default.createElement("span",null,value)}},{field:"value",name:_i18n.i18n.translate("kbn.management.editIndexPattern.source.table.matchesHeader",{defaultMessage:"Matches"}),description:_i18n.i18n.translate("kbn.management.editIndexPattern.source.table.matchesDescription",{defaultMessage:"Language used for the field"}),dataType:"string",sortable:true,render:function render(value,filter){var realtimeValue=_this2.state.editingFilterId===filter.clientId?_this2.state.editingFilterValue:value;var matcher=fieldWildcardMatcher([realtimeValue]);var matches=indexPattern.getNonScriptedFields().map((function(f){return f.name})).filter(matcher).sort();if(matches.length){return _react.default.createElement("span",null,matches.join(", "))}return _react.default.createElement("em",null,_react.default.createElement(_react2.FormattedMessage,{id:"kbn.management.editIndexPattern.source.table.notMatchedLabel",defaultMessage:"The source filter doesn't match any known fields."}))}},{name:"",align:_eui.RIGHT_ALIGNMENT,width:"100",render:function render(filter){if(_this2.state.editingFilterId===filter.clientId){return _react.default.createElement(_react.Fragment,null,_react.default.createElement(_eui.EuiButtonIcon,{size:"s",onClick:function onClick(){saveFilter({filterId:_this2.state.editingFilterId,newFilterValue:_this2.state.editingFilterValue});_this2.stopEditingFilter()},iconType:"checkInCircleFilled","aria-label":_i18n.i18n.translate("kbn.management.editIndexPattern.source.table.saveAria",{defaultMessage:"Save"})}),_react.default.createElement(_eui.EuiButtonIcon,{size:"s",onClick:function onClick(){_this2.stopEditingFilter()},iconType:"cross","aria-label":_i18n.i18n.translate("kbn.management.editIndexPattern.source.table.cancelAria",{defaultMessage:"Cancel"})}))}return _react.default.createElement(_react.Fragment,null,_react.default.createElement(_eui.EuiButtonIcon,{size:"s",color:"danger",onClick:function onClick(){return deleteFilter(filter)},iconType:"trash","aria-label":_i18n.i18n.translate("kbn.management.editIndexPattern.source.table.deleteAria",{defaultMessage:"Delete"})}),_react.default.createElement(_eui.EuiButtonIcon,{size:"s",onClick:function onClick(){return _this2.startEditingFilter(filter.clientId,filter.value)},iconType:"pencil","aria-label":_i18n.i18n.translate("kbn.management.editIndexPattern.source.table.editAria",{defaultMessage:"Edit"})}))}}]}},{key:"render",value:function render(){var _this$props2=this.props,items=_this$props2.items,isSaving=_this$props2.isSaving;var columns=this.getColumns();var pagination={initialPageSize:10,pageSizeOptions:[5,10,25,50]};return _react.default.createElement(_eui.EuiInMemoryTable,{loading:isSaving,items:items,columns:columns,pagination:pagination,sorting:true})}}]);return Table}(_react.Component);exports.Table=Table;_defineProperty(Table,"propTypes",{indexPattern:_propTypes.default.object.isRequired,items:_propTypes.default.array.isRequired,deleteFilter:_propTypes.default.func.isRequired,fieldWildcardMatcher:_propTypes.default.func.isRequired,saveFilter:_propTypes.default.func.isRequired,isSaving:_propTypes.default.bool.isRequired})},2023:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});Object.defineProperty(exports,"Header",{enumerable:true,get:function get(){return _header.Header}});var _header=__webpack_require__(2024)},2024:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.Header=void 0;var _react=_interopRequireDefault(__webpack_require__(0));var _eui=__webpack_require__(3);var _react2=__webpack_require__(4);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var Header=function Header(){return _react.default.createElement("div",null,_react.default.createElement(_eui.EuiTitle,{size:"s"},_react.default.createElement("h3",null,_react.default.createElement(_react2.FormattedMessage,{id:"kbn.management.editIndexPattern.sourceHeader",defaultMessage:"Source filters"}))),_react.default.createElement(_eui.EuiText,null,_react.default.createElement("p",null,_react.default.createElement(_react2.FormattedMessage,{id:"kbn.management.editIndexPattern.sourceLabel",defaultMessage:"Source filters can be used to exclude one or more fields when fetching the document source. This happens when viewing a document in the Discover app, or with a table displaying results from a saved search in the Dashboard app. Each row is built using the source of a single document, and if you have documents with large or unimportant fields you may benefit from filtering those out at this lower level."})),_react.default.createElement("p",null,_react.default.createElement(_react2.FormattedMessage,{id:"kbn.management.editIndexPattern.source.noteLabel",defaultMessage:"Note that multi-fields will incorrectly appear as matches in the table below. These filters only actually apply to fields in the original source document, so matching multi-fields are not actually being filtered."}))),_react.default.createElement(_eui.EuiSpacer,{size:"s"}))};exports.Header=Header},2025:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});Object.defineProperty(exports,"AddFilter",{enumerable:true,get:function get(){return _add_filter.AddFilter}});var _add_filter=__webpack_require__(2026)},2026:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.AddFilter=void 0;var _react=_interopRequireWildcard(__webpack_require__(0));var _propTypes=_interopRequireDefault(__webpack_require__(5));var _eui=__webpack_require__(3);var _i18n=__webpack_require__(1);var _react2=__webpack_require__(4);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _interopRequireWildcard(obj){if(obj&&obj.__esModule){return obj}else{var newObj={};if(obj!=null){for(var key in obj){if(Object.prototype.hasOwnProperty.call(obj,key)){var desc=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):{};if(desc.get||desc.set){Object.defineProperty(newObj,key,desc)}else{newObj[key]=obj[key]}}}}newObj.default=obj;return newObj}}function _typeof(obj){if(typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"){_typeof=function _typeof(obj){return typeof obj}}else{_typeof=function _typeof(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj}}return _typeof(obj)}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);return Constructor}function _possibleConstructorReturn(self,call){if(call&&(_typeof(call)==="object"||typeof call==="function")){return call}return _assertThisInitialized(self)}function _getPrototypeOf(o){_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o)};return _getPrototypeOf(o)}function _assertThisInitialized(self){if(self===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return self}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function")}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:true,configurable:true}});if(superClass)_setPrototypeOf(subClass,superClass)}function _setPrototypeOf(o,p){_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(o,p){o.__proto__=p;return o};return _setPrototypeOf(o,p)}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}var AddFilter=function(_Component){_inherits(AddFilter,_Component);function AddFilter(props){var _this;_classCallCheck(this,AddFilter);_this=_possibleConstructorReturn(this,_getPrototypeOf(AddFilter).call(this,props));_defineProperty(_assertThisInitialized(_this),"onAddFilter",(function(){_this.props.onAddFilter(_this.state.filter);_this.setState({filter:""})}));_this.state={filter:""};return _this}_createClass(AddFilter,[{key:"render",value:function render(){var _this2=this;var filter=this.state.filter;var placeholder=_i18n.i18n.translate("kbn.management.editIndexPattern.sourcePlaceholder",{defaultMessage:"source filter, accepts wildcards (e.g., `user*` to filter fields starting with 'user')"});return _react.default.createElement(_eui.EuiFlexGroup,null,_react.default.createElement(_eui.EuiFlexItem,{grow:10},_react.default.createElement(_eui.EuiFieldText,{fullWidth:true,value:filter,onChange:function onChange(e){return _this2.setState({filter:e.target.value.trim()})},placeholder:placeholder})),_react.default.createElement(_eui.EuiFlexItem,null,_react.default.createElement(_eui.EuiButton,{isDisabled:filter.length===0,onClick:this.onAddFilter},_react.default.createElement(_react2.FormattedMessage,{id:"kbn.management.editIndexPattern.source.addButtonLabel",defaultMessage:"Add"}))))}}]);return AddFilter}(_react.Component);exports.AddFilter=AddFilter;_defineProperty(AddFilter,"propTypes",{onAddFilter:_propTypes.default.func.isRequired})},2027:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});Object.defineProperty(exports,"IndexedFieldsTable",{enumerable:true,get:function get(){return _indexed_fields_table.IndexedFieldsTable}});var _indexed_fields_table=__webpack_require__(2028)},2028:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.IndexedFieldsTable=void 0;var _react=_interopRequireWildcard(__webpack_require__(0));var _propTypes=_interopRequireDefault(__webpack_require__(5));var _reselect=__webpack_require__(649);var _table=__webpack_require__(2029);var _lib=__webpack_require__(2031);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _interopRequireWildcard(obj){if(obj&&obj.__esModule){return obj}else{var newObj={};if(obj!=null){for(var key in obj){if(Object.prototype.hasOwnProperty.call(obj,key)){var desc=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):{};if(desc.get||desc.set){Object.defineProperty(newObj,key,desc)}else{newObj[key]=obj[key]}}}}newObj.default=obj;return newObj}}function _typeof(obj){if(typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"){_typeof=function _typeof(obj){return typeof obj}}else{_typeof=function _typeof(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj}}return _typeof(obj)}function ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);if(enumerableOnly)symbols=symbols.filter((function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable}));keys.push.apply(keys,symbols)}return keys}function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=arguments[i]!=null?arguments[i]:{};if(i%2){ownKeys(source,true).forEach((function(key){_defineProperty(target,key,source[key])}))}else if(Object.getOwnPropertyDescriptors){Object.defineProperties(target,Object.getOwnPropertyDescriptors(source))}else{ownKeys(source).forEach((function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))}))}}return target}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);return Constructor}function _possibleConstructorReturn(self,call){if(call&&(_typeof(call)==="object"||typeof call==="function")){return call}return _assertThisInitialized(self)}function _getPrototypeOf(o){_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o)};return _getPrototypeOf(o)}function _assertThisInitialized(self){if(self===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return self}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function")}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:true,configurable:true}});if(superClass)_setPrototypeOf(subClass,superClass)}function _setPrototypeOf(o,p){_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(o,p){o.__proto__=p;return o};return _setPrototypeOf(o,p)}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}var IndexedFieldsTable=function(_Component){_inherits(IndexedFieldsTable,_Component);function IndexedFieldsTable(_props){var _this;_classCallCheck(this,IndexedFieldsTable);_this=_possibleConstructorReturn(this,_getPrototypeOf(IndexedFieldsTable).call(this,_props));_defineProperty(_assertThisInitialized(_this),"getFilteredFields",(0,_reselect.createSelector)((function(state){return state.fields}),(function(state,props){return props.fieldFilter}),(function(state,props){return props.indexedFieldTypeFilter}),(function(fields,fieldFilter,indexedFieldTypeFilter){if(fieldFilter){var normalizedFieldFilter=fieldFilter.toLowerCase();fields=fields.filter((function(field){return field.name.toLowerCase().includes(normalizedFieldFilter)}))}if(indexedFieldTypeFilter){fields=fields.filter((function(field){return field.type===indexedFieldTypeFilter}))}return fields})));_this.state={fields:_this.mapFields(_this.props.fields)};return _this}_createClass(IndexedFieldsTable,[{key:"UNSAFE_componentWillReceiveProps",value:function UNSAFE_componentWillReceiveProps(nextProps){if(nextProps.fields!==this.props.fields){this.setState({fields:this.mapFields(nextProps.fields)})}}},{key:"mapFields",value:function mapFields(fields){var _this$props=this.props,indexPattern=_this$props.indexPattern,fieldWildcardMatcher=_this$props.fieldWildcardMatcher,helpers=_this$props.helpers;var sourceFilters=indexPattern.sourceFilters&&indexPattern.sourceFilters.map((function(f){return f.value}));var fieldWildcardMatch=fieldWildcardMatcher(sourceFilters||[]);return fields&&fields.map((function(field){return _objectSpread({},field,{displayName:field.displayName,routes:field.routes,indexPattern:field.indexPattern,format:(0,_lib.getFieldFormat)(indexPattern,field.name),excluded:fieldWildcardMatch?fieldWildcardMatch(field.name):false,info:helpers.getFieldInfo&&helpers.getFieldInfo(indexPattern,field.name)})}))||[]}},{key:"render",value:function render(){var _this2=this;var indexPattern=this.props.indexPattern;var fields=this.getFilteredFields(this.state,this.props);return _react.default.createElement("div",null,_react.default.createElement(_table.Table,{indexPattern:indexPattern,items:fields,editField:function editField(field){return _this2.props.helpers.redirectToRoute(field,"edit")}}))}}]);return IndexedFieldsTable}(_react.Component);exports.IndexedFieldsTable=IndexedFieldsTable;_defineProperty(IndexedFieldsTable,"propTypes",{fields:_propTypes.default.array.isRequired,indexPattern:_propTypes.default.object.isRequired,fieldFilter:_propTypes.default.string,indexedFieldTypeFilter:_propTypes.default.string,helpers:_propTypes.default.shape({redirectToRoute:_propTypes.default.func.isRequired,getFieldInfo:_propTypes.default.func}),fieldWildcardMatcher:_propTypes.default.func.isRequired})},2029:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _table=__webpack_require__(2030);Object.keys(_table).forEach((function(key){if(key==="default"||key==="__esModule")return;Object.defineProperty(exports,key,{enumerable:true,get:function get(){return _table[key]}})}))},2030:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.Table=void 0;var _react=_interopRequireWildcard(__webpack_require__(0));var _propTypes=_interopRequireDefault(__webpack_require__(5));var _eui=__webpack_require__(3);var _i18n=__webpack_require__(1);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _interopRequireWildcard(obj){if(obj&&obj.__esModule){return obj}else{var newObj={};if(obj!=null){for(var key in obj){if(Object.prototype.hasOwnProperty.call(obj,key)){var desc=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):{};if(desc.get||desc.set){Object.defineProperty(newObj,key,desc)}else{newObj[key]=obj[key]}}}}newObj.default=obj;return newObj}}function _typeof(obj){if(typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"){_typeof=function _typeof(obj){return typeof obj}}else{_typeof=function _typeof(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj}}return _typeof(obj)}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);return Constructor}function _possibleConstructorReturn(self,call){if(call&&(_typeof(call)==="object"||typeof call==="function")){return call}return _assertThisInitialized(self)}function _assertThisInitialized(self){if(self===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return self}function _getPrototypeOf(o){_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o)};return _getPrototypeOf(o)}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function")}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:true,configurable:true}});if(superClass)_setPrototypeOf(subClass,superClass)}function _setPrototypeOf(o,p){_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(o,p){o.__proto__=p;return o};return _setPrototypeOf(o,p)}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}var Table=function(_PureComponent){_inherits(Table,_PureComponent);function Table(){_classCallCheck(this,Table);return _possibleConstructorReturn(this,_getPrototypeOf(Table).apply(this,arguments))}_createClass(Table,[{key:"renderBooleanTemplate",value:function renderBooleanTemplate(value,label){return value?_react.default.createElement(_eui.EuiIcon,{type:"dot",color:"secondary","aria-label":label}):_react.default.createElement("span",null)}},{key:"renderFieldName",value:function renderFieldName(name,field){var indexPattern=this.props.indexPattern;var infoLabel=_i18n.i18n.translate("kbn.management.editIndexPattern.fields.table.additionalInfoAriaLabel",{defaultMessage:"Additional field information"});var timeLabel=_i18n.i18n.translate("kbn.management.editIndexPattern.fields.table.primaryTimeAriaLabel",{defaultMessage:"Primary time field"});var timeContent=_i18n.i18n.translate("kbn.management.editIndexPattern.fields.table.primaryTimeTooltip",{defaultMessage:"This field represents the time that events occurred."});return _react.default.createElement("span",null,name,field.info&&field.info.length?_react.default.createElement("span",null,"",_react.default.createElement(_eui.EuiIconTip,{type:"questionInCircle",color:"primary","aria-label":infoLabel,content:field.info.map((function(info,i){return _react.default.createElement("div",{key:i},info)}))})):null,indexPattern.timeFieldName===name?_react.default.createElement("span",null,"",_react.default.createElement(_eui.EuiIconTip,{type:"clock",color:"primary","aria-label":timeLabel,content:timeContent})):null)}},{key:"renderFieldType",value:function renderFieldType(type,isConflict){var label=_i18n.i18n.translate("kbn.management.editIndexPattern.fields.table.multiTypeAria",{defaultMessage:"Multiple type field"});var content=_i18n.i18n.translate("kbn.management.editIndexPattern.fields.table.multiTypeTooltip",{defaultMessage:"The type of this field changes across indices. It is unavailable for many analysis functions."});return _react.default.createElement("span",null,type,isConflict?_react.default.createElement("span",null,"",_react.default.createElement(_eui.EuiIconTip,{type:"alert",color:"warning","aria-label":label,content:content})):"")}},{key:"render",value:function render(){var _this=this;var _this$props=this.props,items=_this$props.items,editField=_this$props.editField;var pagination={initialPageSize:10,pageSizeOptions:[5,10,25,50]};var columns=[{field:"displayName",name:_i18n.i18n.translate("kbn.management.editIndexPattern.fields.table.nameHeader",{defaultMessage:"Name"}),dataType:"string",sortable:true,render:function render(value,field){return _this.renderFieldName(value,field)},width:"38%","data-test-subj":"indexedFieldName"},{field:"type",name:_i18n.i18n.translate("kbn.management.editIndexPattern.fields.table.typeHeader",{defaultMessage:"Type"}),dataType:"string",sortable:true,render:function render(value){return _this.renderFieldType(value,value==="conflict")},"data-test-subj":"indexedFieldType"},{field:"format",name:_i18n.i18n.translate("kbn.management.editIndexPattern.fields.table.formatHeader",{defaultMessage:"Format"}),dataType:"string",sortable:true},{field:"searchable",name:_i18n.i18n.translate("kbn.management.editIndexPattern.fields.table.searchableHeader",{defaultMessage:"Searchable"}),description:_i18n.i18n.translate("kbn.management.editIndexPattern.fields.table.searchableDescription",{defaultMessage:"These fields can be used in the filter bar"}),dataType:"boolean",sortable:true,render:function render(value){return _this.renderBooleanTemplate(value,_i18n.i18n.translate("kbn.management.editIndexPattern.fields.table.isSearchableAria",{defaultMessage:"Is searchable"}))}},{field:"aggregatable",name:_i18n.i18n.translate("kbn.management.editIndexPattern.fields.table.aggregatableLabel",{defaultMessage:"Aggregatable"}),description:_i18n.i18n.translate("kbn.management.editIndexPattern.fields.table.aggregatableDescription",{defaultMessage:"These fields can be used in visualization aggregations"}),dataType:"boolean",sortable:true,render:function render(value){return _this.renderBooleanTemplate(value,_i18n.i18n.translate("kbn.management.editIndexPattern.fields.table.isAggregatableAria",{defaultMessage:"Is aggregatable"}))}},{field:"excluded",name:_i18n.i18n.translate("kbn.management.editIndexPattern.fields.table.excludedLabel",{defaultMessage:"Excluded"}),description:_i18n.i18n.translate("kbn.management.editIndexPattern.fields.table.excludedDescription",{defaultMessage:"Fields that are excluded from _source when it is fetched"}),dataType:"boolean",sortable:true,render:function render(value){return _this.renderBooleanTemplate(value,_i18n.i18n.translate("kbn.management.editIndexPattern.fields.table.isExcludedAria",{defaultMessage:"Is excluded"}))}},{name:"",actions:[{name:_i18n.i18n.translate("kbn.management.editIndexPattern.fields.table.editLabel",{defaultMessage:"Edit"}),description:_i18n.i18n.translate("kbn.management.editIndexPattern.fields.table.editDescription",{defaultMessage:"Edit"}),icon:"pencil",onClick:editField,type:"icon"}],width:"40px"}];return _react.default.createElement(_eui.EuiInMemoryTable,{items:items,columns:columns,pagination:pagination,sorting:true})}}]);return Table}(_react.PureComponent);exports.Table=Table;_defineProperty(Table,"propTypes",{indexPattern:_propTypes.default.object.isRequired,items:_propTypes.default.array.isRequired,editField:_propTypes.default.func.isRequired})},2031:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});Object.defineProperty(exports,"getFieldFormat",{enumerable:true,get:function get(){return _get_field_format.getFieldFormat}});var _get_field_format=__webpack_require__(2032)},2032:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.getFieldFormat=getFieldFormat;var _lodash=__webpack_require__(2);function getFieldFormat(indexPattern,fieldName){return indexPattern&&fieldName?(0,_lodash.get)(indexPattern,["fieldFormatMap",fieldName,"type","title"]):""}},2033:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});Object.defineProperty(exports,"ScriptedFieldsTable",{enumerable:true,get:function get(){return _scripted_fields_table.ScriptedFieldsTable}});var _scripted_fields_table=__webpack_require__(2034)},2034:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.ScriptedFieldsTable=void 0;var _react=_interopRequireWildcard(__webpack_require__(0));var _propTypes=_interopRequireDefault(__webpack_require__(5));var _scripting_languages=__webpack_require__(612);var _documentation_links=__webpack_require__(127);var _eui=__webpack_require__(3);var _i18n=__webpack_require__(1);var _components=__webpack_require__(2035);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _interopRequireWildcard(obj){if(obj&&obj.__esModule){return obj}else{var newObj={};if(obj!=null){for(var key in obj){if(Object.prototype.hasOwnProperty.call(obj,key)){var desc=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):{};if(desc.get||desc.set){Object.defineProperty(newObj,key,desc)}else{newObj[key]=obj[key]}}}}newObj.default=obj;return newObj}}function _typeof(obj){if(typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"){_typeof=function _typeof(obj){return typeof obj}}else{_typeof=function _typeof(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj}}return _typeof(obj)}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);return Constructor}function _possibleConstructorReturn(self,call){if(call&&(_typeof(call)==="object"||typeof call==="function")){return call}return _assertThisInitialized(self)}function _getPrototypeOf(o){_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o)};return _getPrototypeOf(o)}function _assertThisInitialized(self){if(self===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return self}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function")}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:true,configurable:true}});if(superClass)_setPrototypeOf(subClass,superClass)}function _setPrototypeOf(o,p){_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(o,p){o.__proto__=p;return o};return _setPrototypeOf(o,p)}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}var ScriptedFieldsTable=function(_Component){_inherits(ScriptedFieldsTable,_Component);function ScriptedFieldsTable(props){var _this;_classCallCheck(this,ScriptedFieldsTable);_this=_possibleConstructorReturn(this,_getPrototypeOf(ScriptedFieldsTable).call(this,props));_defineProperty(_assertThisInitialized(_this),"fetchFields",(function _callee(){var fields,deprecatedLangsInUse,deprecatedLangs,supportedLangs,_iteratorNormalCompletion,_didIteratorError,_iteratorError,_iterator,_step,lang;return regeneratorRuntime.async((function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return regeneratorRuntime.awrap(_this.props.indexPattern.getScriptedFields());case 2:fields=_context.sent;deprecatedLangsInUse=[];deprecatedLangs=(0,_scripting_languages.getDeprecatedScriptingLanguages)();supportedLangs=(0,_scripting_languages.getSupportedScriptingLanguages)();_iteratorNormalCompletion=true;_didIteratorError=false;_iteratorError=undefined;_context.prev=9;for(_iterator=fields[Symbol.iterator]();!(_iteratorNormalCompletion=(_step=_iterator.next()).done);_iteratorNormalCompletion=true){lang=_step.value.lang;if(deprecatedLangs.includes(lang)||!supportedLangs.includes(lang)){deprecatedLangsInUse.push(lang)}}_context.next=17;break;case 13:_context.prev=13;_context.t0=_context["catch"](9);_didIteratorError=true;_iteratorError=_context.t0;case 17:_context.prev=17;_context.prev=18;if(!_iteratorNormalCompletion&&_iterator.return!=null){_iterator.return()}case 20:_context.prev=20;if(!_didIteratorError){_context.next=23;break}throw _iteratorError;case 23:return _context.finish(20);case 24:return _context.finish(17);case 25:_this.setState({fields:fields,deprecatedLangsInUse:deprecatedLangsInUse});case 26:case"end":return _context.stop()}}}),null,null,[[9,13,17,25],[18,,20,24]])}));_defineProperty(_assertThisInitialized(_this),"getFilteredItems",(function(){var fields=_this.state.fields;var _this$props=_this.props,fieldFilter=_this$props.fieldFilter,scriptedFieldLanguageFilter=_this$props.scriptedFieldLanguageFilter;var languageFilteredFields=fields;if(scriptedFieldLanguageFilter){languageFilteredFields=fields.filter((function(field){return field.lang===_this.props.scriptedFieldLanguageFilter}))}var filteredFields=languageFilteredFields;if(fieldFilter){var normalizedFieldFilter=_this.props.fieldFilter.toLowerCase();filteredFields=languageFilteredFields.filter((function(field){return field.name.toLowerCase().includes(normalizedFieldFilter)}))}return filteredFields}));_defineProperty(_assertThisInitialized(_this),"startDeleteField",(function(field){_this.setState({fieldToDelete:field,isDeleteConfirmationModalVisible:true})}));_defineProperty(_assertThisInitialized(_this),"hideDeleteConfirmationModal",(function(){_this.setState({fieldToDelete:undefined,isDeleteConfirmationModalVisible:false})}));_defineProperty(_assertThisInitialized(_this),"deleteField",(function(){var _this$props2=_this.props,indexPattern=_this$props2.indexPattern,onRemoveField=_this$props2.onRemoveField;var fieldToDelete=_this.state.fieldToDelete;indexPattern.removeScriptedField(fieldToDelete);onRemoveField&&onRemoveField();_this.fetchFields();_this.hideDeleteConfirmationModal()}));_this.state={deprecatedLangsInUse:[],fieldToDelete:undefined,isDeleteConfirmationModalVisible:false,fields:[]};return _this}_createClass(ScriptedFieldsTable,[{key:"UNSAFE_componentWillMount",value:function UNSAFE_componentWillMount(){this.fetchFields()}},{key:"renderCallOuts",value:function renderCallOuts(){var deprecatedLangsInUse=this.state.deprecatedLangsInUse;return _react.default.createElement(_components.CallOuts,{deprecatedLangsInUse:deprecatedLangsInUse,painlessDocLink:_documentation_links.documentationLinks.scriptedFields.painless})}},{key:"renderDeleteConfirmationModal",value:function renderDeleteConfirmationModal(){var fieldToDelete=this.state.fieldToDelete;if(!fieldToDelete){return null}var title=_i18n.i18n.translate("kbn.management.editIndexPattern.scripted.deleteFieldLabel",{defaultMessage:"Delete scripted field '{fieldName}'?",values:{fieldName:fieldToDelete.name}});var cancelButtonText=_i18n.i18n.translate("kbn.management.editIndexPattern.scripted.deleteField.cancelButton",{defaultMessage:"Cancel"});var confirmButtonText=_i18n.i18n.translate("kbn.management.editIndexPattern.scripted.deleteField.deleteButton",{defaultMessage:"Delete"});return _react.default.createElement(_eui.EuiOverlayMask,null,_react.default.createElement(_eui.EuiConfirmModal,{title:title,onCancel:this.hideDeleteConfirmationModal,onConfirm:this.deleteField,cancelButtonText:cancelButtonText,confirmButtonText:confirmButtonText,defaultFocusedButton:_eui.EUI_MODAL_CONFIRM_BUTTON}))}},{key:"render",value:function render(){var _this2=this;var _this$props3=this.props,helpers=_this$props3.helpers,indexPattern=_this$props3.indexPattern;var items=this.getFilteredItems();return _react.default.createElement("div",null,_react.default.createElement(_components.Header,{addScriptedFieldUrl:helpers.getRouteHref(indexPattern,"addField")}),this.renderCallOuts(),_react.default.createElement(_eui.EuiSpacer,{size:"l"}),_react.default.createElement(_components.Table,{indexPattern:indexPattern,items:items,editField:function editField(field){return _this2.props.helpers.redirectToRoute(field,"edit")},deleteField:this.startDeleteField}),this.renderDeleteConfirmationModal())}}]);return ScriptedFieldsTable}(_react.Component);exports.ScriptedFieldsTable=ScriptedFieldsTable;_defineProperty(ScriptedFieldsTable,"propTypes",{indexPattern:_propTypes.default.object.isRequired,fieldFilter:_propTypes.default.string,scriptedFieldLanguageFilter:_propTypes.default.string,helpers:_propTypes.default.shape({redirectToRoute:_propTypes.default.func.isRequired,getRouteHref:_propTypes.default.func.isRequired}),onRemoveField:_propTypes.default.func})},2035:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});Object.defineProperty(exports,"Table",{enumerable:true,get:function get(){return _table.Table}});Object.defineProperty(exports,"Header",{enumerable:true,get:function get(){return _header.Header}});Object.defineProperty(exports,"CallOuts",{enumerable:true,get:function get(){return _call_outs.CallOuts}});var _table=__webpack_require__(2036);var _header=__webpack_require__(2038);var _call_outs=__webpack_require__(2040)},2036:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});Object.defineProperty(exports,"Table",{enumerable:true,get:function get(){return _table.Table}});var _table=__webpack_require__(2037)},2037:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.Table=void 0;var _react=_interopRequireWildcard(__webpack_require__(0));var _propTypes=_interopRequireDefault(__webpack_require__(5));var _eui=__webpack_require__(3);var _i18n=__webpack_require__(1);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _interopRequireWildcard(obj){if(obj&&obj.__esModule){return obj}else{var newObj={};if(obj!=null){for(var key in obj){if(Object.prototype.hasOwnProperty.call(obj,key)){var desc=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):{};if(desc.get||desc.set){Object.defineProperty(newObj,key,desc)}else{newObj[key]=obj[key]}}}}newObj.default=obj;return newObj}}function _typeof(obj){if(typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"){_typeof=function _typeof(obj){return typeof obj}}else{_typeof=function _typeof(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj}}return _typeof(obj)}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);return Constructor}function _possibleConstructorReturn(self,call){if(call&&(_typeof(call)==="object"||typeof call==="function")){return call}return _assertThisInitialized(self)}function _getPrototypeOf(o){_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o)};return _getPrototypeOf(o)}function _assertThisInitialized(self){if(self===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return self}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function")}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:true,configurable:true}});if(superClass)_setPrototypeOf(subClass,superClass)}function _setPrototypeOf(o,p){_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(o,p){o.__proto__=p;return o};return _setPrototypeOf(o,p)}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}var Table=function(_PureComponent){_inherits(Table,_PureComponent);function Table(){var _getPrototypeOf2;var _this;_classCallCheck(this,Table);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key]}_this=_possibleConstructorReturn(this,(_getPrototypeOf2=_getPrototypeOf(Table)).call.apply(_getPrototypeOf2,[this].concat(args)));_defineProperty(_assertThisInitialized(_this),"renderFormatCell",(function(value){var indexPattern=_this.props.indexPattern;var title=indexPattern.fieldFormatMap[value]&&indexPattern.fieldFormatMap[value].type?indexPattern.fieldFormatMap[value].type.title:"";return _react.default.createElement("span",null,title)}));return _this}_createClass(Table,[{key:"render",value:function render(){var _this$props=this.props,items=_this$props.items,editField=_this$props.editField,deleteField=_this$props.deleteField;var columns=[{field:"displayName",name:_i18n.i18n.translate("kbn.management.editIndexPattern.scripted.table.nameHeader",{defaultMessage:"Name"}),description:_i18n.i18n.translate("kbn.management.editIndexPattern.scripted.table.nameDescription",{defaultMessage:"Name of the field"}),dataType:"string",sortable:true,width:"38%"},{field:"lang",name:_i18n.i18n.translate("kbn.management.editIndexPattern.scripted.table.langHeader",{defaultMessage:"Lang"}),description:_i18n.i18n.translate("kbn.management.editIndexPattern.scripted.table.langDescription",{defaultMessage:"Language used for the field"}),dataType:"string",sortable:true,"data-test-subj":"scriptedFieldLang"},{field:"script",name:_i18n.i18n.translate("kbn.management.editIndexPattern.scripted.table.scriptHeader",{defaultMessage:"Script"}),description:_i18n.i18n.translate("kbn.management.editIndexPattern.scripted.table.scriptDescription",{defaultMessage:"Script for the field"}),dataType:"string",sortable:true},{field:"name",name:_i18n.i18n.translate("kbn.management.editIndexPattern.scripted.table.formatHeader",{defaultMessage:"Format"}),description:_i18n.i18n.translate("kbn.management.editIndexPattern.scripted.table.formatDescription",{defaultMessage:"Format used for the field"}),render:this.renderFormatCell,sortable:false},{name:"",actions:[{name:_i18n.i18n.translate("kbn.management.editIndexPattern.scripted.table.editHeader",{defaultMessage:"Edit"}),description:_i18n.i18n.translate("kbn.management.editIndexPattern.scripted.table.editDescription",{defaultMessage:"Edit this field"}),icon:"pencil",onClick:editField},{name:_i18n.i18n.translate("kbn.management.editIndexPattern.scripted.table.deleteHeader",{defaultMessage:"Delete"}),description:_i18n.i18n.translate("kbn.management.editIndexPattern.scripted.table.deleteDescription",{defaultMessage:"Delete this field"}),icon:"trash",color:"danger",onClick:deleteField}],width:"40px"}];var pagination={initialPageSize:10,pageSizeOptions:[5,10,25,50]};return _react.default.createElement(_eui.EuiInMemoryTable,{items:items,columns:columns,pagination:pagination,sorting:true})}}]);return Table}(_react.PureComponent);exports.Table=Table;_defineProperty(Table,"propTypes",{indexPattern:_propTypes.default.object.isRequired,items:_propTypes.default.array.isRequired,editField:_propTypes.default.func.isRequired,deleteField:_propTypes.default.func.isRequired})},2038:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});Object.defineProperty(exports,"Header",{enumerable:true,get:function get(){return _header.Header}});var _header=__webpack_require__(2039)},2039:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.Header=void 0;var _react=_interopRequireDefault(__webpack_require__(0));var _propTypes=_interopRequireDefault(__webpack_require__(5));var _eui=__webpack_require__(3);var _react2=__webpack_require__(4);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var Header=function Header(_ref){var addScriptedFieldUrl=_ref.addScriptedFieldUrl;return _react.default.createElement(_eui.EuiFlexGroup,{alignItems:"center"},_react.default.createElement(_eui.EuiFlexItem,null,_react.default.createElement(_eui.EuiTitle,{size:"s"},_react.default.createElement("h3",null,_react.default.createElement(_react2.FormattedMessage,{id:"kbn.management.editIndexPattern.scriptedHeader",defaultMessage:"Scripted fields"}))),_react.default.createElement(_eui.EuiText,null,_react.default.createElement("p",null,_react.default.createElement(_react2.FormattedMessage,{id:"kbn.management.editIndexPattern.scriptedLabel",defaultMessage:"You can use scripted fields in visualizations and display them in your documents. However, you cannot search scripted fields."})))),_react.default.createElement(_eui.EuiFlexItem,{grow:false},_react.default.createElement(_eui.EuiButton,{"data-test-subj":"addScriptedFieldLink",href:addScriptedFieldUrl},_react.default.createElement(_react2.FormattedMessage,{id:"kbn.management.editIndexPattern.scripted.addFieldButton",defaultMessage:"Add scripted field"}))))};exports.Header=Header;Header.propTypes={addScriptedFieldUrl:_propTypes.default.string.isRequired}},2040:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});Object.defineProperty(exports,"CallOuts",{enumerable:true,get:function get(){return _call_outs.CallOuts}});var _call_outs=__webpack_require__(2041)},2041:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.CallOuts=void 0;var _react=_interopRequireDefault(__webpack_require__(0));var _eui=__webpack_require__(3);var _react2=__webpack_require__(4);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var CallOuts=function CallOuts(_ref){var deprecatedLangsInUse=_ref.deprecatedLangsInUse,painlessDocLink=_ref.painlessDocLink;if(!deprecatedLangsInUse.length){return null}return _react.default.createElement("div",null,_react.default.createElement(_eui.EuiCallOut,{title:_react.default.createElement(_react2.FormattedMessage,{id:"kbn.management.editIndexPattern.scripted.deprecationLangHeader",defaultMessage:"Deprecation languages in use"}),color:"danger",iconType:"cross"},_react.default.createElement("p",null,_react.default.createElement(_react2.FormattedMessage,{id:"kbn.management.editIndexPattern.scripted.deprecationLangLabel.deprecationLangDetail",defaultMessage:"The following deprecated languages are in use: {deprecatedLangsInUse}. Support for these languages will be removed in the next major version of Kibana and Elasticsearch. Convert you scripted fields to {link} to avoid any problems.",values:{deprecatedLangsInUse:deprecatedLangsInUse.join(", "),link:_react.default.createElement(_eui.EuiLink,{href:painlessDocLink},_react.default.createElement(_react2.FormattedMessage,{id:"kbn.management.editIndexPattern.scripted.deprecationLangLabel.painlessDescription",defaultMessage:"Painless"}))}}))),_react.default.createElement(_eui.EuiSpacer,{size:"m"}))};exports.CallOuts=CallOuts},2042:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__);__webpack_exports__["default"]='<div>\n  <div>\n    <div id="indexPatternListReact" role="region" aria-label="{{\'kbn.management.editIndexPatternLiveRegionAriaLabel\' | i18n: { defaultMessage: \'Index patterns\' } }}"></div>\n  </div>\n</div>\n'},2043:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__);__webpack_exports__["default"]='<kbn-management-app section="kibana/index_patterns">\n  <kbn-management-index-patterns\n    index-pattern="fieldSettings.indexPattern">\n  </kbn-management-index-patterns>\n</kbn-management-app>\n'},2044:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});Object.defineProperty(exports,"IndexPatternTable",{enumerable:true,get:function get(){return _index_pattern_table.IndexPatternTable}});var _index_pattern_table=__webpack_require__(2045)},2045:function(module,exports,__webpack_require__){"use strict";function _typeof2(obj){if(typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"){_typeof2=function _typeof2(obj){return typeof obj}}else{_typeof2=function _typeof2(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj}}return _typeof2(obj)}Object.defineProperty(exports,"__esModule",{value:true});exports.IndexPatternTable=void 0;var _eui=__webpack_require__(3);var _react=__webpack_require__(4);var _react2=_interopRequireDefault(__webpack_require__(0));var _create_button=__webpack_require__(2046);var _create_index_pattern_prompt=__webpack_require__(2050);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _typeof(obj){if(typeof Symbol==="function"&&_typeof2(Symbol.iterator)==="symbol"){_typeof=function _typeof(obj){return _typeof2(obj)}}else{_typeof=function _typeof(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":_typeof2(obj)}}return _typeof(obj)}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);return Constructor}function _possibleConstructorReturn(self,call){if(call&&(_typeof(call)==="object"||typeof call==="function")){return call}return _assertThisInitialized(self)}function _getPrototypeOf(o){_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o)};return _getPrototypeOf(o)}function _assertThisInitialized(self){if(self===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return self}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function")}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:true,configurable:true}});if(superClass)_setPrototypeOf(subClass,superClass)}function _setPrototypeOf(o,p){_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(o,p){o.__proto__=p;return o};return _setPrototypeOf(o,p)}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}var columns=[{field:"title",name:"Pattern",render:function render(name,index){return _react2.default.createElement(_eui.EuiButtonEmpty,{size:"xs",href:"#/management/kibana/index_patterns/".concat(index.id)},name,index.tags&&index.tags.map((function(_ref){var tagKey=_ref.key,tagName=_ref.name;return _react2.default.createElement(_eui.EuiBadge,{className:"indexPatternList__badge",key:tagKey},tagName)})))},dataType:"string",sortable:function sortable(_ref2){var sort=_ref2.sort;return sort}}];var pagination={initialPageSize:10,pageSizeOptions:[5,10,25,50]};var sorting={sort:{field:"title",direction:"asc"}};var search={box:{incremental:true,schema:{fields:{title:{type:"string"}}}}};var IndexPatternTable=function(_React$Component){_inherits(IndexPatternTable,_React$Component);function IndexPatternTable(){var _getPrototypeOf2;var _this;_classCallCheck(this,IndexPatternTable);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key]}_this=_possibleConstructorReturn(this,(_getPrototypeOf2=_getPrototypeOf(IndexPatternTable)).call.apply(_getPrototypeOf2,[this].concat(args)));_defineProperty(_assertThisInitialized(_this),"state",{showFlyout:_this.props.indexPatterns.length===0});return _this}_createClass(IndexPatternTable,[{key:"render",value:function render(){var _this2=this;return _react2.default.createElement(_eui.EuiPanel,{paddingSize:"l","data-test-subj":"indexPatternTable"},this.state.showFlyout&&_react2.default.createElement(_create_index_pattern_prompt.CreateIndexPatternPrompt,{onClose:function onClose(){return _this2.setState({showFlyout:false})}}),_react2.default.createElement(_eui.EuiFlexGroup,{justifyContent:"spaceBetween"},_react2.default.createElement(_eui.EuiFlexItem,{grow:false,className:"euiIEFlexWrapFix"},_react2.default.createElement(_eui.EuiFlexGroup,{alignItems:"center",gutterSize:"s"},_react2.default.createElement(_eui.EuiFlexItem,{grow:false},_react2.default.createElement(_eui.EuiText,null,_react2.default.createElement("h2",null,_react2.default.createElement(_react.FormattedMessage,{id:"kbn.management.indexPatternTable.title",defaultMessage:"Index patterns"})))),_react2.default.createElement(_eui.EuiFlexItem,{grow:false},_react2.default.createElement(_eui.EuiButtonIcon,{iconSize:"l",iconType:"questionInCircle",onClick:function onClick(){return _this2.setState({showFlyout:true})},"aria-label":"Help"})))),_react2.default.createElement(_eui.EuiFlexItem,{grow:false},_react2.default.createElement(_create_button.CreateButton,{options:this.props.indexPatternCreationOptions},_react2.default.createElement(_react.FormattedMessage,{id:"kbn.management.indexPatternTable.createBtn",defaultMessage:"Create index pattern"})))),_react2.default.createElement(_eui.EuiSpacer,null),_react2.default.createElement(_eui.EuiInMemoryTable,{allowNeutralSort:false,itemId:"id",isSelectable:false,items:this.props.indexPatterns,columns:columns,pagination:pagination,sorting:sorting,search:search}))}}]);return IndexPatternTable}(_react2.default.Component);exports.IndexPatternTable=IndexPatternTable},2046:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});Object.defineProperty(exports,"CreateButton",{enumerable:true,get:function get(){return _create_button.CreateButton}});var _create_button=__webpack_require__(2047)},2047:function(module,exports,__webpack_require__){"use strict";function _typeof2(obj){if(typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"){_typeof2=function _typeof2(obj){return typeof obj}}else{_typeof2=function _typeof2(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj}}return _typeof2(obj)}Object.defineProperty(exports,"__esModule",{value:true});exports.CreateButton=void 0;var _eui_theme_light=__webpack_require__(42);var _react=_interopRequireWildcard(__webpack_require__(0));var _eui=__webpack_require__(3);var _react2=__webpack_require__(4);var _react3=__webpack_require__(614);function _interopRequireWildcard(obj){if(obj&&obj.__esModule){return obj}else{var newObj={};if(obj!=null){for(var key in obj){if(Object.prototype.hasOwnProperty.call(obj,key)){var desc=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):{};if(desc.get||desc.set){Object.defineProperty(newObj,key,desc)}else{newObj[key]=obj[key]}}}}newObj.default=obj;return newObj}}function _typeof(obj){if(typeof Symbol==="function"&&_typeof2(Symbol.iterator)==="symbol"){_typeof=function _typeof(obj){return _typeof2(obj)}}else{_typeof=function _typeof(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":_typeof2(obj)}}return _typeof(obj)}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);return Constructor}function _possibleConstructorReturn(self,call){if(call&&(_typeof(call)==="object"||typeof call==="function")){return call}return _assertThisInitialized(self)}function _getPrototypeOf(o){_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o)};return _getPrototypeOf(o)}function _assertThisInitialized(self){if(self===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return self}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function")}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:true,configurable:true}});if(superClass)_setPrototypeOf(subClass,superClass)}function _setPrototypeOf(o,p){_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(o,p){o.__proto__=p;return o};return _setPrototypeOf(o,p)}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}var CreateButtonComponent=function(_Component){_inherits(CreateButtonComponent,_Component);function CreateButtonComponent(){var _getPrototypeOf2;var _this;_classCallCheck(this,CreateButtonComponent);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key]}_this=_possibleConstructorReturn(this,(_getPrototypeOf2=_getPrototypeOf(CreateButtonComponent)).call.apply(_getPrototypeOf2,[this].concat(args)));_defineProperty(_assertThisInitialized(_this),"state",{isPopoverOpen:false});_defineProperty(_assertThisInitialized(_this),"togglePopover",(function(){_this.setState({isPopoverOpen:!_this.state.isPopoverOpen})}));_defineProperty(_assertThisInitialized(_this),"closePopover",(function(){_this.setState({isPopoverOpen:false})}));_defineProperty(_assertThisInitialized(_this),"renderBetaBadge",(function(){return _react.default.createElement(_eui.EuiBadge,{color:_eui_theme_light.euiColorAccent},_react.default.createElement(_react2.FormattedMessage,{id:"kbn.management.indexPatternList.createButton.betaLabel",defaultMessage:"Beta"}))}));return _this}_createClass(CreateButtonComponent,[{key:"render",value:function render(){var _this2=this;var _this$props=this.props,options=_this$props.options,children=_this$props.children,uiCapabilities=_this$props.uiCapabilities;var isPopoverOpen=this.state.isPopoverOpen;if(!options||!options.length){return null}if(!uiCapabilities.indexPatterns.save){return null}if(options.length===1){return _react.default.createElement(_eui.EuiButton,{"data-test-subj":"createIndexPatternButton",fill:true,onClick:options[0].onClick,iconType:"plusInCircle"},children)}var button=_react.default.createElement(_eui.EuiButton,{"data-test-subj":"createIndexPatternButton",fill:true,size:"s",iconType:"arrowDown",iconSide:"right",onClick:this.togglePopover},children);if(options.length>1){return _react.default.createElement(_eui.EuiPopover,{id:"singlePanel",button:button,isOpen:isPopoverOpen,closePopover:this.closePopover,panelPaddingSize:"none",anchorPosition:"downLeft"},_react.default.createElement(_eui.EuiContextMenuPanel,{items:options.map((function(option){return _react.default.createElement(_eui.EuiContextMenuItem,{key:option.text,onClick:option.onClick,"data-test-subj":option.testSubj},_react.default.createElement(_eui.EuiDescriptionList,{style:{whiteSpace:"nowrap"}},_react.default.createElement(_eui.EuiDescriptionListTitle,null,option.text,option.isBeta?_react.default.createElement(_react.Fragment,null," ",_this2.renderBetaBadge()):null),_react.default.createElement(_eui.EuiDescriptionListDescription,null,option.description)))}))}))}}}]);return CreateButtonComponent}(_react.Component);var CreateButton=(0,_react3.injectUICapabilities)(CreateButtonComponent);exports.CreateButton=CreateButton},2048:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.UICapabilitiesProvider=void 0;var _react=_interopRequireDefault(__webpack_require__(0));var _ui_capabilities_context=__webpack_require__(615);var _=__webpack_require__(135);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var UICapabilitiesProvider=function UICapabilitiesProvider(props){return _react.default.createElement(_ui_capabilities_context.UICapabilitiesContext.Provider,{value:_.capabilities.get()},props.children)};exports.UICapabilitiesProvider=UICapabilitiesProvider;UICapabilitiesProvider.displayName="UICapabilitiesProvider"},2049:function(module,exports,__webpack_require__){"use strict";function _typeof2(obj){if(typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"){_typeof2=function _typeof2(obj){return typeof obj}}else{_typeof2=function _typeof2(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj}}return _typeof2(obj)}Object.defineProperty(exports,"__esModule",{value:true});exports.injectUICapabilities=injectUICapabilities;var _react=_interopRequireWildcard(__webpack_require__(0));var _ui_capabilities_context=__webpack_require__(615);function _interopRequireWildcard(obj){if(obj&&obj.__esModule){return obj}else{var newObj={};if(obj!=null){for(var key in obj){if(Object.prototype.hasOwnProperty.call(obj,key)){var desc=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):{};if(desc.get||desc.set){Object.defineProperty(newObj,key,desc)}else{newObj[key]=obj[key]}}}}newObj.default=obj;return newObj}}function _typeof(obj){if(typeof Symbol==="function"&&_typeof2(Symbol.iterator)==="symbol"){_typeof=function _typeof(obj){return _typeof2(obj)}}else{_typeof=function _typeof(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":_typeof2(obj)}}return _typeof(obj)}function _extends(){_extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source){if(Object.prototype.hasOwnProperty.call(source,key)){target[key]=source[key]}}}return target};return _extends.apply(this,arguments)}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);return Constructor}function _possibleConstructorReturn(self,call){if(call&&(_typeof(call)==="object"||typeof call==="function")){return call}return _assertThisInitialized(self)}function _assertThisInitialized(self){if(self===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return self}function _getPrototypeOf(o){_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o)};return _getPrototypeOf(o)}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function")}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:true,configurable:true}});if(superClass)_setPrototypeOf(subClass,superClass)}function _setPrototypeOf(o,p){_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(o,p){o.__proto__=p;return o};return _setPrototypeOf(o,p)}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}function getDisplayName(component){return component.displayName||component.name||"Component"}function injectUICapabilities(WrappedComponent){var InjectUICapabilities=function(_Component){_inherits(InjectUICapabilities,_Component);function InjectUICapabilities(props,context){_classCallCheck(this,InjectUICapabilities);return _possibleConstructorReturn(this,_getPrototypeOf(InjectUICapabilities).call(this,props,context))}_createClass(InjectUICapabilities,[{key:"render",value:function render(){return _react.default.createElement(WrappedComponent,_extends({},this.props,{uiCapabilities:this.context}))}}]);return InjectUICapabilities}(_react.Component);_defineProperty(InjectUICapabilities,"displayName","InjectUICapabilities(".concat(getDisplayName(WrappedComponent),")"));_defineProperty(InjectUICapabilities,"WrappedComponent",WrappedComponent);_defineProperty(InjectUICapabilities,"contextType",_ui_capabilities_context.UICapabilitiesContext);return InjectUICapabilities}},2050:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.CreateIndexPatternPrompt=void 0;var _eui=__webpack_require__(3);var _react=__webpack_require__(4);var _react2=_interopRequireDefault(__webpack_require__(0));function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var CreateIndexPatternPrompt=function CreateIndexPatternPrompt(_ref){var onClose=_ref.onClose;return _react2.default.createElement(_eui.EuiFlyout,{size:"s",onClose:onClose,"data-test-subj":"CreateIndexPatternPrompt"},_react2.default.createElement(_eui.EuiFlyoutHeader,{hasBorder:true},_react2.default.createElement(_eui.EuiText,{grow:false},_react2.default.createElement("h2",null,_react2.default.createElement(_react.FormattedMessage,{id:"kbn.management.indexPatternPrompt.title",defaultMessage:"About index patterns"})))),_react2.default.createElement(_eui.EuiFlyoutBody,null,_react2.default.createElement(_eui.EuiText,{textAlign:"left"},_react2.default.createElement("p",null,_react2.default.createElement(_react.FormattedMessage,{id:"kbn.management.indexPatternPrompt.subtitle",defaultMessage:"Index patterns allow you to bucket disparate data sources together so their shared fields may be queried in Kibana."}))),_react2.default.createElement(_eui.EuiHorizontalRule,{margin:"l"}),_react2.default.createElement(_eui.EuiText,{textAlign:"left"},_react2.default.createElement("h3",null,_react2.default.createElement(_react.FormattedMessage,{id:"kbn.management.indexPatternPrompt.examplesTitle",defaultMessage:"Examples of index patterns"}))),_react2.default.createElement(_eui.EuiSpacer,null),_react2.default.createElement(_eui.EuiDescriptionList,{className:"indexPatternListPrompt__descList"},_react2.default.createElement(_eui.EuiDescriptionListTitle,null,_react2.default.createElement(_react.FormattedMessage,{id:"kbn.management.indexPatternPrompt.exampleOneTitle",defaultMessage:"Single data source"})),_react2.default.createElement(_eui.EuiDescriptionListDescription,null,_react2.default.createElement(_react.FormattedMessage,{id:"kbn.management.indexPatternPrompt.exampleOne",defaultMessage:"Index a single data source named log-west-001 so you can build charts or query its contents fast."})),_react2.default.createElement(_eui.EuiDescriptionListTitle,null,_react2.default.createElement(_react.FormattedMessage,{id:"kbn.management.indexPatternPrompt.exampleTwoTitle",defaultMessage:"Multiple data sources"})),_react2.default.createElement(_eui.EuiDescriptionListDescription,null,_react2.default.createElement(_react.FormattedMessage,{id:"kbn.management.indexPatternPrompt.exampleTwo",defaultMessage:"Group all incoming data sources starting with log-west* so you can query against all your west coast server logs."})),_react2.default.createElement(_eui.EuiDescriptionListTitle,null,_react2.default.createElement(_react.FormattedMessage,{id:"kbn.management.indexPatternPrompt.exampleThreeTitle",defaultMessage:"Custom groupings"})),_react2.default.createElement(_eui.EuiDescriptionListDescription,null,_react2.default.createElement(_react.FormattedMessage,{id:"kbn.management.indexPatternPrompt.exampleThree",defaultMessage:"Specifically group your archived, monthly, roll-up metrics of those logs into a separate index pattern so you can aggregate historical trends to compare."})))))};exports.CreateIndexPatternPrompt=CreateIndexPatternPrompt},2051:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__);__webpack_exports__["default"]='<div class="euiPage mgtPage">\n  <div id="management-sidenav" class="euiPageSideBar" style="position: static;" data-test-subj="managementNav"></div>\n  <main class="euiPageBody euiPageBody--restrictWidth-default mgtPage__body" ng-transclude></main>\n</div>\n'},2052:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__);__webpack_exports__["default"]='<kbn-management-app>\n  <div id="management-landing" data-test-subj="management-landing"></div>\n</kbn-management-app>\n'},2062:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.default=void 0;var _vislib=__webpack_require__(2063);var _default=_vislib.VislibProvider;exports.default=_default;module.exports=exports.default},2063:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.VislibProvider=VislibProvider;__webpack_require__(578);__webpack_require__(577);__webpack_require__(576);__webpack_require__(580);__webpack_require__(261);__webpack_require__(585);var _mapped_colors=__webpack_require__(574);var _vis=__webpack_require__(575);function VislibProvider(Private,$rootScope){$rootScope.$on("$routeChangeStart",(function(){return _mapped_colors.mappedColors.purge()}));return{version:"0.0.0",Vis:Private(_vis.VislibVisProvider)}}},2064:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.aggResponseIndex=void 0;var _build_hierarchical_data=__webpack_require__(532);var _point_series=__webpack_require__(533);var _tabify=__webpack_require__(241);var aggResponseIndex={hierarchical:_build_hierarchical_data.buildHierarchicalData,pointSeries:_point_series.buildPointSeriesData,tabify:_tabify.tabifyAggResponse};exports.aggResponseIndex=aggResponseIndex},2065:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _local_application_service=__webpack_require__(2066);Object.keys(_local_application_service).forEach((function(key){if(key==="default"||key==="__esModule")return;Object.defineProperty(exports,key,{enumerable:true,get:function get(){return _local_application_service[key]}})}))},2066:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.localApplicationService=exports.LocalApplicationService=void 0;var _new_platform=__webpack_require__(6);var _eui=__webpack_require__(3);function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);return Constructor}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}var matchAllWithPrefix=function matchAllWithPrefix(prefixOrApp){return"/".concat(typeof prefixOrApp==="string"?prefixOrApp:prefixOrApp.id,"/:tail*?")};var LocalApplicationService=function(){function LocalApplicationService(){_classCallCheck(this,LocalApplicationService);_defineProperty(this,"idGenerator",(0,_eui.htmlIdGenerator)("kibanaAppLocalApp"))}_createClass(LocalApplicationService,[{key:"attachToAngular",value:function attachToAngular(angularRouteManager){var _this=this;_new_platform.npStart.plugins.kibana_legacy.getApps().forEach((function(app){var wrapperElementId=_this.idGenerator();angularRouteManager.when(matchAllWithPrefix(app),{outerAngularWrapperRoute:true,reloadOnSearch:false,reloadOnUrl:false,template:'<div class="kbnLocalApplicationWrapper" id="'.concat(wrapperElementId,'"></div>'),controller:function controller($scope){var element=document.getElementById(wrapperElementId);var unmountHandler=null;var isUnmounted=false;$scope.$on("$destroy",(function(){if(unmountHandler){unmountHandler()}isUnmounted=true}));(function _callee(){var params;return regeneratorRuntime.async((function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:params={element:element,appBasePath:"",onAppLeave:function onAppLeave(){return undefined}};if(!isAppMountDeprecated(app.mount)){_context.next=7;break}_context.next=4;return regeneratorRuntime.awrap(app.mount({core:_new_platform.npStart.core},params));case 4:_context.t0=_context.sent;_context.next=10;break;case 7:_context.next=9;return regeneratorRuntime.awrap(app.mount(params));case 9:_context.t0=_context.sent;case 10:unmountHandler=_context.t0;if(isUnmounted){unmountHandler()}case 12:case"end":return _context.stop()}}}))})()}})}));_new_platform.npStart.plugins.kibana_legacy.getForwards().forEach((function(_ref){var legacyAppId=_ref.legacyAppId,newAppId=_ref.newAppId,keepPrefix=_ref.keepPrefix;angularRouteManager.when(matchAllWithPrefix(legacyAppId),{resolveRedirectTo:function resolveRedirectTo($location){var url=$location.url();return"/".concat(newAppId).concat(keepPrefix?url:url.replace(legacyAppId,""))}})}))}}]);return LocalApplicationService}();exports.LocalApplicationService=LocalApplicationService;var localApplicationService=new LocalApplicationService;exports.localApplicationService=localApplicationService;function isAppMountDeprecated(mount){return mount.length===2}},2153:function(module,exports,__webpack_require__){module.exports=__webpack_require__(16)(1133)},2238:function(module,exports,__webpack_require__){module.exports=__webpack_require__(15)(1407)},2263:function(module,exports,__webpack_require__){module.exports=__webpack_require__(30)(994)},2291:function(module,exports,__webpack_require__){module.exports=__webpack_require__(30)(1130)},266:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.tryRegisterSettingsComponent=tryRegisterSettingsComponent;exports.registerSettingsComponent=registerSettingsComponent;exports.getSettingsComponent=getSettingsComponent;var registry={};function tryRegisterSettingsComponent(id,component){if(id in registry){return false}registerSettingsComponent(id,component);return true}function registerSettingsComponent(id,component){var allowOverride=arguments.length>2&&arguments[2]!==undefined?arguments[2]:false;if(!allowOverride&&id in registry){throw new Error("Component with id ".concat(id," is already registered."))}if(!component.displayName){component.displayName=id}registry[id]=component}function getSettingsComponent(id){if(!(id in registry)){throw new Error("Component not found with id ".concat(id))}return registry[id]}},267:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.processImportResponse=processImportResponse;function _objectWithoutProperties(source,excluded){if(source==null)return{};var target=_objectWithoutPropertiesLoose(source,excluded);var key,i;if(Object.getOwnPropertySymbols){var sourceSymbolKeys=Object.getOwnPropertySymbols(source);for(i=0;i<sourceSymbolKeys.length;i++){key=sourceSymbolKeys[i];if(excluded.indexOf(key)>=0)continue;if(!Object.prototype.propertyIsEnumerable.call(source,key))continue;target[key]=source[key]}}return target}function _objectWithoutPropertiesLoose(source,excluded){if(source==null)return{};var target={};var sourceKeys=Object.keys(source);var key,i;for(i=0;i<sourceKeys.length;i++){key=sourceKeys[i];if(excluded.indexOf(key)>=0)continue;target[key]=source[key]}return target}function processImportResponse(response){var failedImports=[];var unmatchedReferences=new Map;var _iteratorNormalCompletion=true;var _didIteratorError=false;var _iteratorError=undefined;try{for(var _iterator=(response.errors||[])[Symbol.iterator](),_step;!(_iteratorNormalCompletion=(_step=_iterator.next()).done);_iteratorNormalCompletion=true){var _step$value=_step.value,error=_step$value.error,obj=_objectWithoutProperties(_step$value,["error"]);failedImports.push({obj:obj,error:error});if(error.type!=="missing_references"){continue}var indexPatternRefs=error.references.filter((function(ref){return ref.type==="index-pattern"}));var _iteratorNormalCompletion2=true;var _didIteratorError2=false;var _iteratorError2=undefined;try{for(var _iterator2=indexPatternRefs[Symbol.iterator](),_step2;!(_iteratorNormalCompletion2=(_step2=_iterator2.next()).done);_iteratorNormalCompletion2=true){var missingReference=_step2.value;var conflict=unmatchedReferences.get("".concat(missingReference.type,":").concat(missingReference.id))||{existingIndexPatternId:missingReference.id,list:[],newIndexPatternId:undefined};conflict.list.push(obj);unmatchedReferences.set("".concat(missingReference.type,":").concat(missingReference.id),conflict)}}catch(err){_didIteratorError2=true;_iteratorError2=err}finally{try{if(!_iteratorNormalCompletion2&&_iterator2.return!=null){_iterator2.return()}}finally{if(_didIteratorError2){throw _iteratorError2}}}}}catch(err){_didIteratorError=true;_iteratorError=err}finally{try{if(!_iteratorNormalCompletion&&_iterator.return!=null){_iterator.return()}}finally{if(_didIteratorError){throw _iteratorError}}}return{failedImports:failedImports,unmatchedReferences:Array.from(unmatchedReferences.values()),status:unmatchedReferences.size===0&&!failedImports.some((function(issue){return issue.error.type==="conflict"}))?"success":"idle",importCount:response.successCount,conflictedSavedObjectsLinkedToSavedSearches:undefined,conflictedSearchDocs:undefined}}},268:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _saved_objects_management_action_registry=__webpack_require__(611);Object.keys(_saved_objects_management_action_registry).forEach((function(key){if(key==="default"||key==="__esModule")return;Object.defineProperty(exports,key,{enumerable:true,get:function get(){return _saved_objects_management_action_registry[key]}})}));var _saved_objects_management_action=__webpack_require__(1950);Object.keys(_saved_objects_management_action).forEach((function(key){if(key==="default"||key==="__esModule")return;Object.defineProperty(exports,key,{enumerable:true,get:function get(){return _saved_objects_management_action[key]}})}));var _saved_objects_management_service=__webpack_require__(1951);Object.keys(_saved_objects_management_service).forEach((function(key){if(key==="default"||key==="__esModule")return;Object.defineProperty(exports,key,{enumerable:true,get:function get(){return _saved_objects_management_service[key]}})}))},269:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});Object.defineProperty(exports,"canAppendWildcard",{enumerable:true,get:function get(){return _can_append_wildcard.canAppendWildcard}});Object.defineProperty(exports,"ensureMinimumTime",{enumerable:true,get:function get(){return _ensure_minimum_time.ensureMinimumTime}});Object.defineProperty(exports,"getIndices",{enumerable:true,get:function get(){return _get_indices.getIndices}});Object.defineProperty(exports,"getMatchedIndices",{enumerable:true,get:function get(){return _get_matched_indices.getMatchedIndices}});Object.defineProperty(exports,"containsIllegalCharacters",{enumerable:true,get:function get(){return _contains_illegal_characters.containsIllegalCharacters}});Object.defineProperty(exports,"extractTimeFields",{enumerable:true,get:function get(){return _extract_time_fields.extractTimeFields}});var _can_append_wildcard=__webpack_require__(1960);var _ensure_minimum_time=__webpack_require__(1961);var _get_indices=__webpack_require__(1962);var _get_matched_indices=__webpack_require__(1963);var _contains_illegal_characters=__webpack_require__(1964);var _extract_time_fields=__webpack_require__(1965)},29:function(module,exports){module.exports=vendors_2},3:function(module,exports){module.exports=__kbnSharedDeps__.ElasticEui},30:function(module,exports){module.exports=vendors_0},4:function(module,exports){module.exports=__kbnSharedDeps__.KbnI18nReact},42:function(module,exports){module.exports=__kbnSharedDeps__.ElasticEuiLightTheme},47:function(module,exports){module.exports=__kbnSharedDeps__.ElasticEuiLibServices},50:function(module,exports){module.exports=__kbnSharedDeps__.MomentTimezone},59:function(module,exports){module.exports=__kbnSharedDeps__.ElasticEuiDarkTheme},594:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.registerDefaultComponents=registerDefaultComponents;exports.PAGE_FOOTER_COMPONENT=exports.PAGE_SUBTITLE_COMPONENT=exports.PAGE_TITLE_COMPONENT=void 0;var _component_registry=__webpack_require__(266);var _page_title=__webpack_require__(1850);var _page_subtitle=__webpack_require__(1852);var _page_footer=__webpack_require__(1854);var PAGE_TITLE_COMPONENT="advanced_settings_page_title";exports.PAGE_TITLE_COMPONENT=PAGE_TITLE_COMPONENT;var PAGE_SUBTITLE_COMPONENT="advanced_settings_page_subtitle";exports.PAGE_SUBTITLE_COMPONENT=PAGE_SUBTITLE_COMPONENT;var PAGE_FOOTER_COMPONENT="advanced_settings_page_footer";exports.PAGE_FOOTER_COMPONENT=PAGE_FOOTER_COMPONENT;function registerDefaultComponents(){(0,_component_registry.tryRegisterSettingsComponent)(PAGE_TITLE_COMPONENT,_page_title.PageTitle);(0,_component_registry.tryRegisterSettingsComponent)(PAGE_SUBTITLE_COMPONENT,_page_subtitle.PageSubtitle);(0,_component_registry.tryRegisterSettingsComponent)(PAGE_FOOTER_COMPONENT,_page_footer.PageFooter)}},595:function(module,exports,__webpack_require__){"use strict";function _typeof2(obj){if(typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"){_typeof2=function _typeof2(obj){return typeof obj}}else{_typeof2=function _typeof2(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj}}return _typeof2(obj)}Object.defineProperty(exports,"__esModule",{value:true});exports.OptInExampleFlyout=void 0;var React=_interopRequireWildcard(__webpack_require__(0));var _eui=__webpack_require__(3);var _react2=__webpack_require__(4);function _interopRequireWildcard(obj){if(obj&&obj.__esModule){return obj}else{var newObj={};if(obj!=null){for(var key in obj){if(Object.prototype.hasOwnProperty.call(obj,key)){var desc=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):{};if(desc.get||desc.set){Object.defineProperty(newObj,key,desc)}else{newObj[key]=obj[key]}}}}newObj.default=obj;return newObj}}function _typeof(obj){if(typeof Symbol==="function"&&_typeof2(Symbol.iterator)==="symbol"){_typeof=function _typeof(obj){return _typeof2(obj)}}else{_typeof=function _typeof(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":_typeof2(obj)}}return _typeof(obj)}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);return Constructor}function _possibleConstructorReturn(self,call){if(call&&(_typeof(call)==="object"||typeof call==="function")){return call}return _assertThisInitialized(self)}function _getPrototypeOf(o){_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o)};return _getPrototypeOf(o)}function _assertThisInitialized(self){if(self===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return self}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function")}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:true,configurable:true}});if(superClass)_setPrototypeOf(subClass,superClass)}function _setPrototypeOf(o,p){_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(o,p){o.__proto__=p;return o};return _setPrototypeOf(o,p)}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}var OptInExampleFlyout=function(_React$PureComponent){_inherits(OptInExampleFlyout,_React$PureComponent);function OptInExampleFlyout(){var _getPrototypeOf2;var _this;_classCallCheck(this,OptInExampleFlyout);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key]}_this=_possibleConstructorReturn(this,(_getPrototypeOf2=_getPrototypeOf(OptInExampleFlyout)).call.apply(_getPrototypeOf2,[this].concat(args)));_defineProperty(_assertThisInitialized(_this),"state",{data:null,isLoading:true,hasPrivilegeToRead:false});return _this}_createClass(OptInExampleFlyout,[{key:"componentDidMount",value:function componentDidMount(){var _this2=this;this.props.fetchTelemetry().then((function(response){return _this2.setState({data:Array.isArray(response.data)?response.data:null,isLoading:false,hasPrivilegeToRead:true})})).catch((function(err){_this2.setState({isLoading:false,hasPrivilegeToRead:err.status!==403})}))}},{key:"renderBody",value:function renderBody(_ref){var data=_ref.data,isLoading=_ref.isLoading,hasPrivilegeToRead=_ref.hasPrivilegeToRead;if(isLoading){return React.createElement(_eui.EuiFlexGroup,{justifyContent:"spaceAround"},React.createElement(_eui.EuiFlexItem,{grow:false},React.createElement(_eui.EuiLoadingSpinner,{size:"xl"})))}if(!hasPrivilegeToRead){return React.createElement(_eui.EuiCallOut,{title:React.createElement(_react2.FormattedMessage,{id:"telemetry.callout.errorUnprivilegedUserTitle",defaultMessage:"Error displaying cluster statistics"}),color:"danger",iconType:"cross"},React.createElement(_react2.FormattedMessage,{id:"telemetry.callout.errorUnprivilegedUserDescription",defaultMessage:"You do not have access to see unencrypted cluster statistics."}))}if(data===null){return React.createElement(_eui.EuiCallOut,{title:React.createElement(_react2.FormattedMessage,{id:"telemetry.callout.errorLoadingClusterStatisticsTitle",defaultMessage:"Error loading cluster statistics"}),color:"danger",iconType:"cross"},React.createElement(_react2.FormattedMessage,{id:"telemetry.callout.errorLoadingClusterStatisticsDescription",defaultMessage:"An unexpected error occured while attempting to fetch the cluster statistics. This can occur because Elasticsearch failed, Kibana failed, or there is a network error. Check Kibana, then reload the page and try again."}))}return React.createElement(_eui.EuiCodeBlock,{language:"js"},JSON.stringify(data,null,2))}},{key:"render",value:function render(){return React.createElement(_eui.EuiPortal,null,React.createElement(_eui.EuiFlyout,{ownFocus:true,onClose:this.props.onClose,maxWidth:true},React.createElement(_eui.EuiFlyoutHeader,null,React.createElement(_eui.EuiTitle,null,React.createElement("h2",null,React.createElement(_react2.FormattedMessage,{id:"telemetry.callout.clusterStatisticsTitle",defaultMessage:"Cluster statistics"}))),React.createElement(_eui.EuiTextColor,{color:"subdued"},React.createElement(_eui.EuiText,null,React.createElement(_react2.FormattedMessage,{id:"telemetry.callout.clusterStatisticsDescription",defaultMessage:"This is an example of the basic cluster statistics that we'll collect. It includes the number of indices, shards, and nodes. It also includes high-level usage statistics, such as whether monitoring is turned on."})))),React.createElement(_eui.EuiFlyoutBody,null,this.renderBody(this.state))))}}]);return OptInExampleFlyout}(React.PureComponent);exports.OptInExampleFlyout=OptInExampleFlyout},596:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.Field=void 0;var _react=_interopRequireWildcard(__webpack_require__(0));var _propTypes=_interopRequireDefault(__webpack_require__(5));var _new_platform=__webpack_require__(6);__webpack_require__(2153);__webpack_require__(613);var _notify=__webpack_require__(18);var _eui=__webpack_require__(3);var _i18n=__webpack_require__(1);var _react2=__webpack_require__(4);var _lib=__webpack_require__(174);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _interopRequireWildcard(obj){if(obj&&obj.__esModule){return obj}else{var newObj={};if(obj!=null){for(var key in obj){if(Object.prototype.hasOwnProperty.call(obj,key)){var desc=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):{};if(desc.get||desc.set){Object.defineProperty(newObj,key,desc)}else{newObj[key]=obj[key]}}}}newObj.default=obj;return newObj}}function _typeof(obj){if(typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"){_typeof=function _typeof(obj){return typeof obj}}else{_typeof=function _typeof(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj}}return _typeof(obj)}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);return Constructor}function _possibleConstructorReturn(self,call){if(call&&(_typeof(call)==="object"||typeof call==="function")){return call}return _assertThisInitialized(self)}function _getPrototypeOf(o){_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o)};return _getPrototypeOf(o)}function _assertThisInitialized(self){if(self===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return self}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function")}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:true,configurable:true}});if(superClass)_setPrototypeOf(subClass,superClass)}function _setPrototypeOf(o,p){_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(o,p){o.__proto__=p;return o};return _setPrototypeOf(o,p)}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}var Field=function(_PureComponent){_inherits(Field,_PureComponent);function Field(props){var _this;_classCallCheck(this,Field);_this=_possibleConstructorReturn(this,_getPrototypeOf(Field).call(this,props));_defineProperty(_assertThisInitialized(_this),"onCodeEditorChange",(function(value){var type=_this.props.setting.type;var isJsonArray=_this.state.isJsonArray;var newUnsavedValue=undefined;var isInvalid=false;var error=null;switch(type){case"json":newUnsavedValue=value.trim()||(isJsonArray?"[]":"{}");try{JSON.parse(newUnsavedValue)}catch(e){isInvalid=true;error=_react.default.createElement(_react2.FormattedMessage,{id:"kbn.management.settings.field.codeEditorSyntaxErrorMessage",defaultMessage:"Invalid JSON syntax"})}break;default:newUnsavedValue=value}_this.setState({error:error,isInvalid:isInvalid,unsavedValue:newUnsavedValue})}));_defineProperty(_assertThisInitialized(_this),"onFieldChange",(function(e){var value=e.target.value;var _this$props$setting=_this.props.setting,type=_this$props$setting.type,validation=_this$props$setting.validation;var unsavedValue=_this.state.unsavedValue;var newUnsavedValue=undefined;switch(type){case"boolean":newUnsavedValue=!unsavedValue;break;case"number":newUnsavedValue=Number(value);break;default:newUnsavedValue=value}var isInvalid=false;var error=undefined;if(validation&&validation.regex){if(!validation.regex.test(newUnsavedValue)){error=validation.message;isInvalid=true}}_this.setState({unsavedValue:newUnsavedValue,isInvalid:isInvalid,error:error})}));_defineProperty(_assertThisInitialized(_this),"onFieldKeyDown",(function(_ref){var keyCode=_ref.keyCode;if(keyCode===_eui.keyCodes.ENTER){_this.saveEdit()}if(keyCode===_eui.keyCodes.ESCAPE){_this.cancelEdit()}}));_defineProperty(_assertThisInitialized(_this),"onFieldEscape",(function(_ref2){var keyCode=_ref2.keyCode;if(keyCode===_eui.keyCodes.ESCAPE){_this.cancelEdit()}}));_defineProperty(_assertThisInitialized(_this),"onImageChange",(function _callee(files){var file,maxSize,base64Image,isInvalid;return regeneratorRuntime.async((function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:if(files.length){_context.next=4;break}_this.clearError();_this.setState({unsavedValue:null});return _context.abrupt("return");case 4:file=files[0];maxSize=_this.props.setting.validation.maxSize;_context.prev=6;_context.next=9;return regeneratorRuntime.awrap(_this.getImageAsBase64(file));case 9:base64Image=_context.sent;isInvalid=!!(maxSize&&maxSize.length&&base64Image.length>maxSize.length);_this.setState({isInvalid:isInvalid,error:isInvalid?_i18n.i18n.translate("kbn.management.settings.field.imageTooLargeErrorMessage",{defaultMessage:"Image is too large, maximum size is {maxSizeDescription}",values:{maxSizeDescription:maxSize.description}}):null,changeImage:true,unsavedValue:base64Image});_context.next=18;break;case 14:_context.prev=14;_context.t0=_context["catch"](6);_notify.toastNotifications.addDanger(_i18n.i18n.translate("kbn.management.settings.field.imageChangeErrorMessage",{defaultMessage:"Image could not be saved"}));_this.cancelChangeImage();case 18:case"end":return _context.stop()}}}),null,null,[[6,14]])}));_defineProperty(_assertThisInitialized(_this),"changeImage",(function(){_this.setState({changeImage:true})}));_defineProperty(_assertThisInitialized(_this),"cancelChangeImage",(function(){var savedValue=_this.state.savedValue;if(_this.changeImageForm){_this.changeImageForm.fileInput.value=null;_this.changeImageForm.handleChange()}_this.setState({changeImage:false,unsavedValue:savedValue})}));_defineProperty(_assertThisInitialized(_this),"cancelEdit",(function(){var savedValue=_this.state.savedValue;_this.clearError();_this.setState({unsavedValue:savedValue})}));_defineProperty(_assertThisInitialized(_this),"showPageReloadToast",(function(){if(_this.props.setting.requiresPageReload){_notify.toastNotifications.add({title:_i18n.i18n.translate("kbn.management.settings.field.requiresPageReloadToastDescription",{defaultMessage:'Please reload the page for the "{settingName}" setting to take effect.',values:{settingName:_this.props.setting.displayName||_this.props.setting.name}}),text:_react.default.createElement(_react.default.Fragment,null,_react.default.createElement(_eui.EuiFlexGroup,{justifyContent:"flexEnd",gutterSize:"s"},_react.default.createElement(_eui.EuiFlexItem,{grow:false},_react.default.createElement(_eui.EuiButton,{size:"s",onClick:function onClick(){return window.location.reload()}},_i18n.i18n.translate("kbn.management.settings.field.requiresPageReloadToastButtonLabel",{defaultMessage:"Reload page"}))))),color:"success"})}}));_defineProperty(_assertThisInitialized(_this),"saveEdit",(function _callee2(){var _this$props$setting2,name,defVal,type,_this$state,changeImage,savedValue,unsavedValue,isJsonArray,valueToSave,isSameValue;return regeneratorRuntime.async((function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:_this$props$setting2=_this.props.setting,name=_this$props$setting2.name,defVal=_this$props$setting2.defVal,type=_this$props$setting2.type;_this$state=_this.state,changeImage=_this$state.changeImage,savedValue=_this$state.savedValue,unsavedValue=_this$state.unsavedValue,isJsonArray=_this$state.isJsonArray;if(!(savedValue===unsavedValue)){_context2.next=4;break}return _context2.abrupt("return");case 4:valueToSave=unsavedValue;isSameValue=false;_context2.t0=type;_context2.next=_context2.t0==="array"?9:_context2.t0==="json"?12:14;break;case 9:valueToSave=valueToSave.split(",").map((function(val){return val.trim()}));isSameValue=valueToSave.join(",")===defVal.join(",");return _context2.abrupt("break",15);case 12:valueToSave=valueToSave.trim();valueToSave=valueToSave||(isJsonArray?"[]":"{}");case 14:isSameValue=valueToSave===defVal;case 15:_this.setLoading(true);_context2.prev=16;if(!isSameValue){_context2.next=22;break}_context2.next=20;return regeneratorRuntime.awrap(_this.props.clear(name));case 20:_context2.next=24;break;case 22:_context2.next=24;return regeneratorRuntime.awrap(_this.props.save(name,valueToSave));case 24:_this.showPageReloadToast();if(changeImage){_this.cancelChangeImage()}_context2.next=31;break;case 28:_context2.prev=28;_context2.t1=_context2["catch"](16);_notify.toastNotifications.addDanger(_i18n.i18n.translate("kbn.management.settings.field.saveFieldErrorMessage",{defaultMessage:"Unable to save {name}",values:{name:name}}));case 31:_this.setLoading(false);case 32:case"end":return _context2.stop()}}}),null,null,[[16,28]])}));_defineProperty(_assertThisInitialized(_this),"resetField",(function _callee3(){var name;return regeneratorRuntime.async((function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:name=_this.props.setting.name;_this.setLoading(true);_context3.prev=2;_context3.next=5;return regeneratorRuntime.awrap(_this.props.clear(name));case 5:_this.showPageReloadToast();_this.cancelChangeImage();_this.clearError();_context3.next=13;break;case 10:_context3.prev=10;_context3.t0=_context3["catch"](2);_notify.toastNotifications.addDanger(_i18n.i18n.translate("kbn.management.settings.field.resetFieldErrorMessage",{defaultMessage:"Unable to reset {name}",values:{name:name}}));case 13:_this.setLoading(false);case 14:case"end":return _context3.stop()}}}),null,null,[[2,10]])}));var _this$props$setting3=_this.props.setting,_type=_this$props$setting3.type,_value=_this$props$setting3.value,_defVal=_this$props$setting3.defVal;var editableValue=_this.getEditableValue(_type,_value,_defVal);_this.state={isInvalid:false,error:null,loading:false,changeImage:false,savedValue:editableValue,unsavedValue:editableValue,isJsonArray:_type==="json"?Array.isArray(JSON.parse(_defVal||"{}")):false};_this.changeImageForm=null;return _this}_createClass(Field,[{key:"UNSAFE_componentWillReceiveProps",value:function UNSAFE_componentWillReceiveProps(nextProps){var unsavedValue=this.state.unsavedValue;var _nextProps$setting=nextProps.setting,type=_nextProps$setting.type,value=_nextProps$setting.value,defVal=_nextProps$setting.defVal;var editableValue=this.getEditableValue(type,value,defVal);this.setState({savedValue:editableValue,unsavedValue:value===null||value===undefined?editableValue:unsavedValue})}},{key:"getEditableValue",value:function getEditableValue(type,value,defVal){var val=value===null||value===undefined?defVal:value;switch(type){case"array":return val.join(", ");case"boolean":return!!val;case"number":return Number(val);case"image":return val;default:return val||""}}},{key:"getDisplayedDefaultValue",value:function getDisplayedDefaultValue(type,defVal){var optionLabels=arguments.length>2&&arguments[2]!==undefined?arguments[2]:{};if(defVal===undefined||defVal===null||defVal===""){return"null"}switch(type){case"array":return defVal.join(", ");case"select":return optionLabels.hasOwnProperty(defVal)?optionLabels[defVal]:String(defVal);default:return String(defVal)}}},{key:"setLoading",value:function setLoading(loading){this.setState({loading:loading})}},{key:"clearError",value:function clearError(){this.setState({isInvalid:false,error:null})}},{key:"getImageAsBase64",value:function getImageAsBase64(file){if(!file instanceof File){return null}var reader=new FileReader;reader.readAsDataURL(file);return new Promise((function(resolve,reject){reader.onload=function(){resolve(reader.result)};reader.onerror=function(err){reject(err)}}))}},{key:"renderField",value:function renderField(setting){var _this2=this;var enableSaving=this.props.enableSaving;var _this$state2=this.state,loading=_this$state2.loading,changeImage=_this$state2.changeImage,unsavedValue=_this$state2.unsavedValue;var name=setting.name,value=setting.value,type=setting.type,options=setting.options,_setting$optionLabels=setting.optionLabels,optionLabels=_setting$optionLabels===void 0?{}:_setting$optionLabels,isOverridden=setting.isOverridden,ariaName=setting.ariaName;switch(type){case"boolean":return _react.default.createElement(_eui.EuiSwitch,{label:!!unsavedValue?_react.default.createElement(_react2.FormattedMessage,{id:"kbn.management.settings.field.onLabel",defaultMessage:"On"}):_react.default.createElement(_react2.FormattedMessage,{id:"kbn.management.settings.field.offLabel",defaultMessage:"Off"}),checked:!!unsavedValue,onChange:this.onFieldChange,disabled:loading||isOverridden||!enableSaving,onKeyDown:this.onFieldKeyDown,"data-test-subj":"advancedSetting-editField-".concat(name),"aria-label":ariaName});case"markdown":case"json":return _react.default.createElement("div",{"data-test-subj":"advancedSetting-editField-".concat(name)},_react.default.createElement(_eui.EuiCodeEditor,{"aria-label":ariaName,mode:type,theme:"textmate",value:unsavedValue,onChange:this.onCodeEditorChange,width:"100%",height:"auto",minLines:6,maxLines:30,isReadOnly:isOverridden||!enableSaving,setOptions:{showLineNumbers:false,tabSize:2},editorProps:{$blockScrolling:Infinity},showGutter:false}));case"image":if(!(0,_lib.isDefaultValue)(setting)&&!changeImage){return _react.default.createElement(_eui.EuiImage,{"aria-label":ariaName,allowFullScreen:true,url:value,alt:name})}else{return _react.default.createElement(_eui.EuiFilePicker,{disabled:loading||isOverridden||!enableSaving,onChange:this.onImageChange,accept:".jpg,.jpeg,.png",ref:function ref(input){_this2.changeImageForm=input},onKeyDown:this.onFieldEscape,"data-test-subj":"advancedSetting-editField-".concat(name)})}case"select":return _react.default.createElement(_eui.EuiSelect,{"aria-label":ariaName,value:unsavedValue,options:options.map((function(option){return{text:optionLabels.hasOwnProperty(option)?optionLabels[option]:option,value:option}})),onChange:this.onFieldChange,isLoading:loading,disabled:loading||isOverridden||!enableSaving,onKeyDown:this.onFieldKeyDown,"data-test-subj":"advancedSetting-editField-".concat(name)});case"number":return _react.default.createElement(_eui.EuiFieldNumber,{"aria-label":ariaName,value:unsavedValue,onChange:this.onFieldChange,isLoading:loading,disabled:loading||isOverridden||!enableSaving,onKeyDown:this.onFieldKeyDown,"data-test-subj":"advancedSetting-editField-".concat(name)});default:return _react.default.createElement(_eui.EuiFieldText,{"aria-label":ariaName,value:unsavedValue,onChange:this.onFieldChange,isLoading:loading,disabled:loading||isOverridden||!enableSaving,onKeyDown:this.onFieldKeyDown,"data-test-subj":"advancedSetting-editField-".concat(name)})}}},{key:"renderLabel",value:function renderLabel(setting){return setting.name}},{key:"renderHelpText",value:function renderHelpText(setting){if(setting.isOverridden){return _react.default.createElement(_eui.EuiText,{size:"xs"},_react.default.createElement(_react2.FormattedMessage,{id:"kbn.management.settings.field.helpText",defaultMessage:"This setting is overridden by the Kibana server and can not be changed."}))}var canUpdateSetting=this.props.enableSaving;var defaultLink=this.renderResetToDefaultLink(setting);var imageLink=this.renderChangeImageLink(setting);if(canUpdateSetting&&(defaultLink||imageLink)){return _react.default.createElement("span",null,defaultLink,imageLink)}return null}},{key:"renderTitle",value:function renderTitle(setting){return _react.default.createElement("h3",null,setting.displayName||setting.name,setting.isCustom?_react.default.createElement(_eui.EuiIconTip,{type:"asterisk",color:"primary","aria-label":_i18n.i18n.translate("kbn.management.settings.field.customSettingAriaLabel",{defaultMessage:"Custom setting"}),content:_react.default.createElement(_react2.FormattedMessage,{id:"kbn.management.settings.field.customSettingTooltip",defaultMessage:"Custom setting"})}):"")}},{key:"renderDescription",value:function renderDescription(setting){var description;var deprecation;if(setting.deprecation){var links=_new_platform.npStart.core.docLinks.links;deprecation=_react.default.createElement(_react.default.Fragment,null,_react.default.createElement(_eui.EuiToolTip,{content:setting.deprecation.message},_react.default.createElement(_eui.EuiBadge,{color:"warning",onClick:function onClick(){window.open(links.management[setting.deprecation.docLinksKey],"_blank")},onClickAriaLabel:_i18n.i18n.translate("kbn.management.settings.field.deprecationClickAreaLabel",{defaultMessage:"Click to view deprecation documentation for {settingName}.",values:{settingName:setting.name}})},"Deprecated")),_react.default.createElement(_eui.EuiSpacer,{size:"s"}))}if(_react.default.isValidElement(setting.description)){description=setting.description}else{description=_react.default.createElement("div",{dangerouslySetInnerHTML:{__html:setting.description}})}return _react.default.createElement(_react.Fragment,null,deprecation,description,this.renderDefaultValue(setting))}},{key:"renderDefaultValue",value:function renderDefaultValue(setting){var type=setting.type,defVal=setting.defVal,optionLabels=setting.optionLabels;if((0,_lib.isDefaultValue)(setting)){return}return _react.default.createElement(_react.Fragment,null,_react.default.createElement(_eui.EuiSpacer,{size:"s"}),_react.default.createElement(_eui.EuiText,{size:"xs"},type==="json"?_react.default.createElement(_react.Fragment,null,_react.default.createElement(_react2.FormattedMessage,{id:"kbn.management.settings.field.defaultValueTypeJsonText",defaultMessage:"Default: {value}",values:{value:_react.default.createElement(_eui.EuiCodeBlock,{language:"json",paddingSize:"s",overflowHeight:defVal.length>=500?300:null},this.getDisplayedDefaultValue(type,defVal))}})):_react.default.createElement(_react.Fragment,null,_react.default.createElement(_react2.FormattedMessage,{id:"kbn.management.settings.field.defaultValueText",defaultMessage:"Default: {value}",values:{value:_react.default.createElement(_eui.EuiCode,null,this.getDisplayedDefaultValue(type,defVal,optionLabels))}}))))}},{key:"renderResetToDefaultLink",value:function renderResetToDefaultLink(setting){var ariaName=setting.ariaName,name=setting.name;if((0,_lib.isDefaultValue)(setting)){return}return _react.default.createElement("span",null,_react.default.createElement(_eui.EuiLink,{"aria-label":_i18n.i18n.translate("kbn.management.settings.field.resetToDefaultLinkAriaLabel",{defaultMessage:"Reset {ariaName} to default",values:{ariaName:ariaName}}),onClick:this.resetField,"data-test-subj":"advancedSetting-resetField-".concat(name)},_react.default.createElement(_react2.FormattedMessage,{id:"kbn.management.settings.field.resetToDefaultLinkText",defaultMessage:"Reset to default"})),"")}},{key:"renderChangeImageLink",value:function renderChangeImageLink(setting){var changeImage=this.state.changeImage;var type=setting.type,value=setting.value,ariaName=setting.ariaName,name=setting.name;if(type!=="image"||!value||changeImage){return}return _react.default.createElement("span",null,_react.default.createElement(_eui.EuiLink,{"aria-label":_i18n.i18n.translate("kbn.management.settings.field.changeImageLinkAriaLabel",{defaultMessage:"Change {ariaName}",values:{ariaName:ariaName}}),onClick:this.changeImage,"data-test-subj":"advancedSetting-changeImage-".concat(name)},_react.default.createElement(_react2.FormattedMessage,{id:"kbn.management.settings.field.changeImageLinkText",defaultMessage:"Change image"})))}},{key:"renderActions",value:function renderActions(setting){var _this3=this;var ariaName=setting.ariaName,name=setting.name;var _this$state3=this.state,loading=_this$state3.loading,isInvalid=_this$state3.isInvalid,changeImage=_this$state3.changeImage,savedValue=_this$state3.savedValue,unsavedValue=_this$state3.unsavedValue;var isDisabled=loading||setting.isOverridden;if(savedValue===unsavedValue&&!changeImage){return}return _react.default.createElement(_eui.EuiFormRow,{className:"mgtAdvancedSettings__fieldActions",hasEmptyLabelSpace:true},_react.default.createElement(_eui.EuiFlexGroup,null,_react.default.createElement(_eui.EuiFlexItem,{grow:false},_react.default.createElement(_eui.EuiButton,{fill:true,"aria-label":_i18n.i18n.translate("kbn.management.settings.field.saveButtonAriaLabel",{defaultMessage:"Save {ariaName}",values:{ariaName:ariaName}}),onClick:this.saveEdit,disabled:isDisabled||isInvalid,"data-test-subj":"advancedSetting-saveEditField-".concat(name)},_react.default.createElement(_react2.FormattedMessage,{id:"kbn.management.settings.field.saveButtonLabel",defaultMessage:"Save"}))),_react.default.createElement(_eui.EuiFlexItem,{grow:false},_react.default.createElement(_eui.EuiButtonEmpty,{"aria-label":_i18n.i18n.translate("kbn.management.settings.field.cancelEditingButtonAriaLabel",{defaultMessage:"Cancel editing {ariaName}",values:{ariaName:ariaName}}),onClick:function onClick(){return changeImage?_this3.cancelChangeImage():_this3.cancelEdit()},disabled:isDisabled,"data-test-subj":"advancedSetting-cancelEditField-".concat(name)},_react.default.createElement(_react2.FormattedMessage,{id:"kbn.management.settings.field.cancelEditingButtonLabel",defaultMessage:"Cancel"})))))}},{key:"render",value:function render(){var setting=this.props.setting;var _this$state4=this.state,error=_this$state4.error,isInvalid=_this$state4.isInvalid;return _react.default.createElement(_eui.EuiFlexGroup,{className:"mgtAdvancedSettings__field"},_react.default.createElement(_eui.EuiFlexItem,{grow:false},_react.default.createElement(_eui.EuiDescribedFormGroup,{className:"mgtAdvancedSettings__fieldWrapper",title:this.renderTitle(setting),description:this.renderDescription(setting),idAria:"".concat(setting.name,"-aria")},_react.default.createElement(_eui.EuiFormRow,{isInvalid:isInvalid,error:error,label:this.renderLabel(setting),helpText:this.renderHelpText(setting),describedByIds:["".concat(setting.name,"-aria")],className:"mgtAdvancedSettings__fieldRow",hasChildLabel:setting.type!=="boolean"},this.renderField(setting)))),_react.default.createElement(_eui.EuiFlexItem,{grow:false},this.renderActions(setting)))}}]);return Field}(_react.PureComponent);exports.Field=Field;_defineProperty(Field,"propTypes",{setting:_propTypes.default.object.isRequired,save:_propTypes.default.func.isRequired,clear:_propTypes.default.func.isRequired,enableSaving:_propTypes.default.bool.isRequired})},597:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.getAriaName=getAriaName;var _lodash=__webpack_require__(2);function getAriaName(name){return(0,_lodash.words)(name).map((function(word){return word.toLowerCase()})).join(" ")}},598:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.DEFAULT_CATEGORY=void 0;var DEFAULT_CATEGORY="general";exports.DEFAULT_CATEGORY=DEFAULT_CATEGORY},599:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.registries=exports.typesRegistry=exports.renderersRegistry=exports.functionsRegistry=void 0;var _new_platform=__webpack_require__(6);var functionsRegistry=_new_platform.npSetup.plugins.expressions.__LEGACY.functions;exports.functionsRegistry=functionsRegistry;var renderersRegistry=_new_platform.npSetup.plugins.expressions.__LEGACY.renderers;exports.renderersRegistry=renderersRegistry;var typesRegistry=_new_platform.npSetup.plugins.expressions.__LEGACY.types;exports.typesRegistry=typesRegistry;var registries={browserFunctions:functionsRegistry,renderers:renderersRegistry,types:typesRegistry};exports.registries=registries},60:function(module,exports){module.exports=__kbnSharedDeps__.ElasticCharts},603:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.canViewInApp=canViewInApp;function canViewInApp(uiCapabilities,type){switch(type){case"search":case"searches":return uiCapabilities.discover.show;case"visualization":case"visualizations":return uiCapabilities.visualize.show;case"index-pattern":case"index-patterns":case"indexPatterns":return uiCapabilities.management.kibana.index_patterns;case"dashboard":case"dashboards":return uiCapabilities.dashboard.show;default:return uiCapabilities[type].show}}},604:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.getIndexBreadcrumbs=getIndexBreadcrumbs;exports.getViewBreadcrumbs=getViewBreadcrumbs;var _management=__webpack_require__(80);var _i18n=__webpack_require__(1);var _saved_object_registry=__webpack_require__(94);function _toConsumableArray(arr){return _arrayWithoutHoles(arr)||_iterableToArray(arr)||_nonIterableSpread()}function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance")}function _iterableToArray(iter){if(Symbol.iterator in Object(iter)||Object.prototype.toString.call(iter)==="[object Arguments]")return Array.from(iter)}function _arrayWithoutHoles(arr){if(Array.isArray(arr)){for(var i=0,arr2=new Array(arr.length);i<arr.length;i++){arr2[i]=arr[i]}return arr2}}function getIndexBreadcrumbs(){return[_management.MANAGEMENT_BREADCRUMB,{text:_i18n.i18n.translate("kbn.management.savedObjects.indexBreadcrumb",{defaultMessage:"Saved objects"}),href:"#/management/kibana/objects"}]}function getViewBreadcrumbs($routeParams,$injector){var serviceObj=_saved_object_registry.savedObjectManagementRegistry.get($routeParams.service);var service=$injector.get(serviceObj.service);return[].concat(_toConsumableArray(getIndexBreadcrumbs()),[{text:_i18n.i18n.translate("kbn.management.savedObjects.editBreadcrumb",{defaultMessage:"Edit {savedObjectType}",values:{savedObjectType:service.type}})}])}},605:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.ObjectsTable=exports.POSSIBLE_TYPES=void 0;var _chrome=_interopRequireDefault(__webpack_require__(10));var _filesaver=__webpack_require__(325);var _react=_interopRequireWildcard(__webpack_require__(0));var _propTypes=_interopRequireDefault(__webpack_require__(5));var _lodash=__webpack_require__(2);var _header=__webpack_require__(1920);var _flyout=__webpack_require__(1922);var _relationships=__webpack_require__(1937);var _table=__webpack_require__(1939);var _notify=__webpack_require__(18);var _eui=__webpack_require__(3);var _i18n=__webpack_require__(1);var _react2=__webpack_require__(4);var _lib=__webpack_require__(175);var _extract_export_details=__webpack_require__(607);function _interopRequireWildcard(obj){if(obj&&obj.__esModule){return obj}else{var newObj={};if(obj!=null){for(var key in obj){if(Object.prototype.hasOwnProperty.call(obj,key)){var desc=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):{};if(desc.get||desc.set){Object.defineProperty(newObj,key,desc)}else{newObj[key]=obj[key]}}}}newObj.default=obj;return newObj}}function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _typeof(obj){if(typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"){_typeof=function _typeof(obj){return typeof obj}}else{_typeof=function _typeof(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj}}return _typeof(obj)}function _slicedToArray(arr,i){return _arrayWithHoles(arr)||_iterableToArrayLimit(arr,i)||_nonIterableRest()}function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}function _iterableToArrayLimit(arr,i){var _arr=[];var _n=true;var _d=false;var _e=undefined;try{for(var _i=arr[Symbol.iterator](),_s;!(_n=(_s=_i.next()).done);_n=true){_arr.push(_s.value);if(i&&_arr.length===i)break}}catch(err){_d=true;_e=err}finally{try{if(!_n&&_i["return"]!=null)_i["return"]()}finally{if(_d)throw _e}}return _arr}function _arrayWithHoles(arr){if(Array.isArray(arr))return arr}function ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);if(enumerableOnly)symbols=symbols.filter((function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable}));keys.push.apply(keys,symbols)}return keys}function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=arguments[i]!=null?arguments[i]:{};if(i%2){ownKeys(source,true).forEach((function(key){_defineProperty(target,key,source[key])}))}else if(Object.getOwnPropertyDescriptors){Object.defineProperties(target,Object.getOwnPropertyDescriptors(source))}else{ownKeys(source).forEach((function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))}))}}return target}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);return Constructor}function _possibleConstructorReturn(self,call){if(call&&(_typeof(call)==="object"||typeof call==="function")){return call}return _assertThisInitialized(self)}function _getPrototypeOf(o){_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o)};return _getPrototypeOf(o)}function _assertThisInitialized(self){if(self===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return self}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function")}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:true,configurable:true}});if(superClass)_setPrototypeOf(subClass,superClass)}function _setPrototypeOf(o,p){_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(o,p){o.__proto__=p;return o};return _setPrototypeOf(o,p)}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}var POSSIBLE_TYPES=_chrome.default.getInjected("importAndExportableTypes");exports.POSSIBLE_TYPES=POSSIBLE_TYPES;var ObjectsTable=function(_Component){_inherits(ObjectsTable,_Component);function ObjectsTable(props){var _this;_classCallCheck(this,ObjectsTable);_this=_possibleConstructorReturn(this,_getPrototypeOf(ObjectsTable).call(this,props));_defineProperty(_assertThisInitialized(_this),"fetchCounts",(function _callee(){var _parseQuery,queryText,visibleTypes,filteredTypes,filteredSavedObjectCounts,exportAllOptions,exportAllSelectedOptions,savedObjectCounts;return regeneratorRuntime.async((function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_parseQuery=(0,_lib.parseQuery)(_this.state.activeQuery),queryText=_parseQuery.queryText,visibleTypes=_parseQuery.visibleTypes;filteredTypes=_this.savedObjectTypes.filter((function(type){return!visibleTypes||visibleTypes.includes(type)}));_context.next=4;return regeneratorRuntime.awrap((0,_lib.getSavedObjectCounts)(_this.props.$http,filteredTypes,queryText));case 4:filteredSavedObjectCounts=_context.sent;exportAllOptions=[];exportAllSelectedOptions={};Object.keys(filteredSavedObjectCounts).forEach((function(id){exportAllOptions.push({id:id,label:"".concat(id," (").concat(filteredSavedObjectCounts[id]||0,")")});exportAllSelectedOptions[id]=true}));_context.next=10;return regeneratorRuntime.awrap((0,_lib.getSavedObjectCounts)(_this.props.$http,_this.savedObjectTypes,queryText));case 10:savedObjectCounts=_context.sent;_this.setState((function(state){return _objectSpread({},state,{savedObjectCounts:savedObjectCounts,exportAllOptions:exportAllOptions,exportAllSelectedOptions:exportAllSelectedOptions})}));case 12:case"end":return _context.stop()}}}))}));_defineProperty(_assertThisInitialized(_this),"fetchSavedObjects",(function(){_this.setState({isSearching:true},_this.debouncedFetch)}));_defineProperty(_assertThisInitialized(_this),"debouncedFetch",(0,_lodash.debounce)((function _callee2(){var _this$state,query,page,perPage,_parseQuery2,queryText,visibleTypes,findOptions,resp;return regeneratorRuntime.async((function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:_this$state=_this.state,query=_this$state.activeQuery,page=_this$state.page,perPage=_this$state.perPage;_parseQuery2=(0,_lib.parseQuery)(query),queryText=_parseQuery2.queryText,visibleTypes=_parseQuery2.visibleTypes;findOptions={search:queryText?"".concat(queryText,"*"):undefined,perPage:perPage,page:page+1,fields:["id"],type:_this.savedObjectTypes.filter((function(type){return!visibleTypes||visibleTypes.includes(type)}))};if(findOptions.type.length>1){findOptions.sortField="type"}_context2.prev=4;_context2.next=7;return regeneratorRuntime.awrap((0,_lib.findObjects)(findOptions));case 7:resp=_context2.sent;_context2.next=15;break;case 10:_context2.prev=10;_context2.t0=_context2["catch"](4);if(_this._isMounted){_this.setState({isSearching:false})}_notify.toastNotifications.addDanger({title:_i18n.i18n.translate("kbn.management.objects.objectsTable.unableFindSavedObjectsNotificationMessage",{defaultMessage:"Unable find saved objects"}),text:"".concat(_context2.t0)});return _context2.abrupt("return");case 15:if(_this._isMounted){_context2.next=17;break}return _context2.abrupt("return");case 17:_this.setState((function(_ref){var activeQuery=_ref.activeQuery;if(activeQuery.text!==query.text){return{}}return{savedObjects:resp.savedObjects,filteredItemCount:resp.total,isSearching:false}}));case 18:case"end":return _context2.stop()}}}),null,null,[[4,10]])}),300));_defineProperty(_assertThisInitialized(_this),"refreshData",(function _callee3(){return regeneratorRuntime.async((function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:_context3.next=2;return regeneratorRuntime.awrap(Promise.all([_this.fetchSavedObjects(),_this.fetchCounts()]));case 2:case"end":return _context3.stop()}}}))}));_defineProperty(_assertThisInitialized(_this),"onSelectionChanged",(function(selection){_this.setState({selectedSavedObjects:selection})}));_defineProperty(_assertThisInitialized(_this),"onQueryChange",(function(_ref2){var query=_ref2.query;_this.setState({activeQuery:query,page:0,selectedSavedObjects:[]},(function(){_this.fetchSavedObjects();_this.fetchCounts()}))}));_defineProperty(_assertThisInitialized(_this),"onTableChange",(function _callee4(table){var _ref3,page,perPage;return regeneratorRuntime.async((function _callee4$(_context4){while(1){switch(_context4.prev=_context4.next){case 0:_ref3=table.page||{},page=_ref3.index,perPage=_ref3.size;_this.setState({page:page,perPage:perPage,selectedSavedObjects:[]},_this.fetchSavedObjects);case 2:case"end":return _context4.stop()}}}))}));_defineProperty(_assertThisInitialized(_this),"onShowRelationships",(function(object){_this.setState({isShowingRelationships:true,relationshipObject:object})}));_defineProperty(_assertThisInitialized(_this),"onHideRelationships",(function(){_this.setState({isShowingRelationships:false,relationshipObject:undefined})}));_defineProperty(_assertThisInitialized(_this),"onExport",(function _callee5(includeReferencesDeep){var selectedSavedObjects,objectsToExport,blob,exportDetails;return regeneratorRuntime.async((function _callee5$(_context5){while(1){switch(_context5.prev=_context5.next){case 0:selectedSavedObjects=_this.state.selectedSavedObjects;objectsToExport=selectedSavedObjects.map((function(obj){return{id:obj.id,type:obj.type}}));_context5.prev=2;_context5.next=5;return regeneratorRuntime.awrap((0,_lib.fetchExportObjects)(objectsToExport,includeReferencesDeep));case 5:blob=_context5.sent;_context5.next=12;break;case 8:_context5.prev=8;_context5.t0=_context5["catch"](2);_notify.toastNotifications.addDanger({title:_i18n.i18n.translate("kbn.management.objects.objectsTable.export.dangerNotification",{defaultMessage:"Unable to generate export"})});throw _context5.t0;case 12:(0,_filesaver.saveAs)(blob,"export.ndjson");_context5.next=15;return regeneratorRuntime.awrap((0,_extract_export_details.extractExportDetails)(blob));case 15:exportDetails=_context5.sent;_this.showExportSuccessMessage(exportDetails);case 17:case"end":return _context5.stop()}}}),null,null,[[2,8]])}));_defineProperty(_assertThisInitialized(_this),"onExportAll",(function _callee6(){var _this$state2,exportAllSelectedOptions,isIncludeReferencesDeepChecked,activeQuery,_parseQuery3,queryText,exportTypes,blob,exportDetails;return regeneratorRuntime.async((function _callee6$(_context6){while(1){switch(_context6.prev=_context6.next){case 0:_this$state2=_this.state,exportAllSelectedOptions=_this$state2.exportAllSelectedOptions,isIncludeReferencesDeepChecked=_this$state2.isIncludeReferencesDeepChecked,activeQuery=_this$state2.activeQuery;_parseQuery3=(0,_lib.parseQuery)(activeQuery),queryText=_parseQuery3.queryText;exportTypes=Object.entries(exportAllSelectedOptions).reduce((function(accum,_ref4){var _ref5=_slicedToArray(_ref4,2),id=_ref5[0],selected=_ref5[1];if(selected){accum.push(id)}return accum}),[]);_context6.prev=3;_context6.next=6;return regeneratorRuntime.awrap((0,_lib.fetchExportByTypeAndSearch)(exportTypes,queryText?"".concat(queryText,"*"):undefined,isIncludeReferencesDeepChecked));case 6:blob=_context6.sent;_context6.next=13;break;case 9:_context6.prev=9;_context6.t0=_context6["catch"](3);_notify.toastNotifications.addDanger({title:_i18n.i18n.translate("kbn.management.objects.objectsTable.export.dangerNotification",{defaultMessage:"Unable to generate export"})});throw _context6.t0;case 13:(0,_filesaver.saveAs)(blob,"export.ndjson");_context6.next=16;return regeneratorRuntime.awrap((0,_extract_export_details.extractExportDetails)(blob));case 16:exportDetails=_context6.sent;_this.showExportSuccessMessage(exportDetails);_this.setState({isShowingExportAllOptionsModal:false});case 19:case"end":return _context6.stop()}}}),null,null,[[3,9]])}));_defineProperty(_assertThisInitialized(_this),"showExportSuccessMessage",(function(exportDetails){if(exportDetails&&exportDetails.missingReferences.length>0){_notify.toastNotifications.addWarning({title:_i18n.i18n.translate("kbn.management.objects.objectsTable.export.successWithMissingRefsNotification",{defaultMessage:"Your file is downloading in the background. "+"Some related objects could not be found. "+"Please see the last line in the exported file for a list of missing objects."})})}else{_notify.toastNotifications.addSuccess({title:_i18n.i18n.translate("kbn.management.objects.objectsTable.export.successNotification",{defaultMessage:"Your file is downloading in the background"})})}}));_defineProperty(_assertThisInitialized(_this),"finishImport",(function(){_this.hideImportFlyout();_this.fetchSavedObjects();_this.fetchCounts()}));_defineProperty(_assertThisInitialized(_this),"showImportFlyout",(function(){_this.setState({isShowingImportFlyout:true})}));_defineProperty(_assertThisInitialized(_this),"hideImportFlyout",(function(){_this.setState({isShowingImportFlyout:false})}));_defineProperty(_assertThisInitialized(_this),"onDelete",(function(){_this.setState({isShowingDeleteConfirmModal:true})}));_defineProperty(_assertThisInitialized(_this),"delete",(function _callee7(){var savedObjectsClient,_this$state3,selectedSavedObjects,isDeleting,indexPatterns,objects,deletes;return regeneratorRuntime.async((function _callee7$(_context7){while(1){switch(_context7.prev=_context7.next){case 0:savedObjectsClient=_this.props.savedObjectsClient;_this$state3=_this.state,selectedSavedObjects=_this$state3.selectedSavedObjects,isDeleting=_this$state3.isDeleting;if(!isDeleting){_context7.next=4;break}return _context7.abrupt("return");case 4:_this.setState({isDeleting:true});indexPatterns=selectedSavedObjects.filter((function(object){return object.type==="index-pattern"}));if(!indexPatterns.length){_context7.next=9;break}_context7.next=9;return regeneratorRuntime.awrap(_this.props.indexPatterns.clearCache());case 9:_context7.next=11;return regeneratorRuntime.awrap(savedObjectsClient.bulkGet(selectedSavedObjects));case 11:objects=_context7.sent;deletes=objects.savedObjects.map((function(object){return savedObjectsClient.delete(object.type,object.id)}));_context7.next=15;return regeneratorRuntime.awrap(Promise.all(deletes));case 15:_this.setState({selectedSavedObjects:[]});_context7.next=18;return regeneratorRuntime.awrap(_this.fetchSavedObjects());case 18:_context7.next=20;return regeneratorRuntime.awrap(_this.fetchCounts());case 20:_this.setState({isShowingDeleteConfirmModal:false,isDeleting:false});case 21:case"end":return _context7.stop()}}}))}));_defineProperty(_assertThisInitialized(_this),"getRelationships",(function _callee8(type,id){return regeneratorRuntime.async((function _callee8$(_context8){while(1){switch(_context8.prev=_context8.next){case 0:_context8.next=2;return regeneratorRuntime.awrap((0,_lib.getRelationships)(type,id,_this.savedObjectTypes,_this.props.$http,_this.props.basePath));case 2:return _context8.abrupt("return",_context8.sent);case 3:case"end":return _context8.stop()}}}))}));_defineProperty(_assertThisInitialized(_this),"changeIncludeReferencesDeep",(function(){_this.setState((function(state){return{isIncludeReferencesDeepChecked:!state.isIncludeReferencesDeepChecked}}))}));_defineProperty(_assertThisInitialized(_this),"closeExportAllModal",(function(){_this.setState({isShowingExportAllOptionsModal:false})}));_this.savedObjectTypes=POSSIBLE_TYPES;_this.state={totalCount:0,page:0,perPage:props.perPageConfig||50,savedObjects:[],savedObjectCounts:_this.savedObjectTypes.reduce((function(typeToCountMap,type){typeToCountMap[type]=0;return typeToCountMap}),{}),activeQuery:_eui.Query.parse(""),selectedSavedObjects:[],isShowingImportFlyout:false,isSearching:false,filteredItemCount:0,isShowingRelationships:false,relationshipObject:undefined,isShowingDeleteConfirmModal:false,isShowingExportAllOptionsModal:false,isDeleting:false,exportAllOptions:[],exportAllSelectedOptions:{},isIncludeReferencesDeepChecked:true};return _this}_createClass(ObjectsTable,[{key:"componentDidMount",value:function componentDidMount(){this._isMounted=true;this.fetchSavedObjects();this.fetchCounts()}},{key:"componentWillUnmount",value:function componentWillUnmount(){this._isMounted=false;this.debouncedFetch.cancel()}},{key:"renderFlyout",value:function renderFlyout(){if(!this.state.isShowingImportFlyout){return null}return _react.default.createElement(_flyout.Flyout,{close:this.hideImportFlyout,done:this.finishImport,services:this.props.services,indexPatterns:this.props.indexPatterns,newIndexPatternUrl:this.props.newIndexPatternUrl,savedObjectTypes:this.props.savedObjectTypes,confirmModalPromise:this.props.confirmModalPromise})}},{key:"renderRelationships",value:function renderRelationships(){if(!this.state.isShowingRelationships){return null}return _react.default.createElement(_relationships.Relationships,{savedObject:this.state.relationshipObject,getRelationships:this.getRelationships,close:this.onHideRelationships,getDashboardUrl:this.props.getDashboardUrl,goInspectObject:this.props.goInspectObject,canGoInApp:this.props.canGoInApp})}},{key:"renderDeleteConfirmModal",value:function renderDeleteConfirmModal(){var _this2=this;var _this$state4=this.state,isShowingDeleteConfirmModal=_this$state4.isShowingDeleteConfirmModal,isDeleting=_this$state4.isDeleting,selectedSavedObjects=_this$state4.selectedSavedObjects;if(!isShowingDeleteConfirmModal){return null}var modal;if(isDeleting){modal=_react.default.createElement(_eui.EuiLoadingKibana,{size:"xl"})}else{var onCancel=function onCancel(){_this2.setState({isShowingDeleteConfirmModal:false})};var onConfirm=function onConfirm(){_this2.delete()};modal=_react.default.createElement(_eui.EuiConfirmModal,{title:_react.default.createElement(_react2.FormattedMessage,{id:"kbn.management.objects.objectsTable.deleteSavedObjectsConfirmModalTitle",defaultMessage:"Delete saved objects"}),onCancel:onCancel,onConfirm:onConfirm,buttonColor:"danger",cancelButtonText:_react.default.createElement(_react2.FormattedMessage,{id:"kbn.management.objects.objectsTable.deleteSavedObjectsConfirmModal.cancelButtonLabel",defaultMessage:"Cancel"}),confirmButtonText:isDeleting?_react.default.createElement(_react2.FormattedMessage,{id:"kbn.management.objects.objectsTable.deleteSavedObjectsConfirmModal.deleteProcessButtonLabel",defaultMessage:"Deleting"}):_react.default.createElement(_react2.FormattedMessage,{id:"kbn.management.objects.objectsTable.deleteSavedObjectsConfirmModal.deleteButtonLabel",defaultMessage:"Delete"}),defaultFocusedButton:_eui.EUI_MODAL_CONFIRM_BUTTON},_react.default.createElement("p",null,_react.default.createElement(_react2.FormattedMessage,{id:"kbn.management.objects.deleteSavedObjectsConfirmModalDescription",defaultMessage:"This action will delete the following saved objects:"})),_react.default.createElement(_eui.EuiInMemoryTable,{items:selectedSavedObjects,columns:[{field:"type",name:_i18n.i18n.translate("kbn.management.objects.objectsTable.deleteSavedObjectsConfirmModal.typeColumnName",{defaultMessage:"Type"}),width:"50px",render:function render(type,object){return _react.default.createElement(_eui.EuiToolTip,{position:"top",content:(0,_lib.getSavedObjectLabel)(type)},_react.default.createElement(_eui.EuiIcon,{type:object.meta.icon||"apps"}))}},{field:"id",name:_i18n.i18n.translate("kbn.management.objects.objectsTable.deleteSavedObjectsConfirmModal.idColumnName",{defaultMessage:"Id"})},{field:"meta.title",name:_i18n.i18n.translate("kbn.management.objects.objectsTable.deleteSavedObjectsConfirmModal.titleColumnName",{defaultMessage:"Title"})}],pagination:true,sorting:false}))}return _react.default.createElement(_eui.EuiOverlayMask,null,modal)}},{key:"renderExportAllOptionsModal",value:function renderExportAllOptionsModal(){var _this3=this;var _this$state5=this.state,isShowingExportAllOptionsModal=_this$state5.isShowingExportAllOptionsModal,filteredItemCount=_this$state5.filteredItemCount,exportAllOptions=_this$state5.exportAllOptions,exportAllSelectedOptions=_this$state5.exportAllSelectedOptions,isIncludeReferencesDeepChecked=_this$state5.isIncludeReferencesDeepChecked;if(!isShowingExportAllOptionsModal){return null}return _react.default.createElement(_eui.EuiOverlayMask,null,_react.default.createElement(_eui.EuiModal,{onClose:this.closeExportAllModal},_react.default.createElement(_eui.EuiModalHeader,null,_react.default.createElement(_eui.EuiModalHeaderTitle,null,_react.default.createElement(_react2.FormattedMessage,{id:"kbn.management.objects.objectsTable.exportObjectsConfirmModalTitle",defaultMessage:"Export {filteredItemCount, plural, one{# object} other {# objects}}",values:{filteredItemCount:filteredItemCount}}))),_react.default.createElement(_eui.EuiModalBody,null,_react.default.createElement(_eui.EuiFormRow,{label:_react.default.createElement(_react2.FormattedMessage,{id:"kbn.management.objects.objectsTable.exportObjectsConfirmModalDescription",defaultMessage:"Select which types to export"}),labelType:"legend"},_react.default.createElement(_eui.EuiCheckboxGroup,{options:exportAllOptions,idToSelectedMap:exportAllSelectedOptions,onChange:function onChange(optionId){var newExportAllSelectedOptions=_objectSpread({},exportAllSelectedOptions,{},_defineProperty({},optionId,!exportAllSelectedOptions[optionId]));_this3.setState({exportAllSelectedOptions:newExportAllSelectedOptions})}})),_react.default.createElement(_eui.EuiSpacer,{size:"m"}),_react.default.createElement(_eui.EuiSwitch,{name:"includeReferencesDeep",label:_react.default.createElement(_react2.FormattedMessage,{id:"kbn.management.objects.objectsTable.exportObjectsConfirmModal.includeReferencesDeepLabel",defaultMessage:"Include related objects"}),checked:isIncludeReferencesDeepChecked,onChange:this.changeIncludeReferencesDeep})),_react.default.createElement(_eui.EuiModalFooter,null,_react.default.createElement(_eui.EuiFlexGroup,{justifyContent:"flexEnd"},_react.default.createElement(_eui.EuiFlexItem,{grow:false},_react.default.createElement(_eui.EuiFlexGroup,null,_react.default.createElement(_eui.EuiFlexItem,{grow:false},_react.default.createElement(_eui.EuiButtonEmpty,{onClick:this.closeExportAllModal},_react.default.createElement(_react2.FormattedMessage,{id:"kbn.management.objects.objectsTable.exportObjectsConfirmModal.cancelButtonLabel",defaultMessage:"Cancel"}))),_react.default.createElement(_eui.EuiFlexItem,{grow:false},_react.default.createElement(_eui.EuiButton,{fill:true,onClick:this.onExportAll},_react.default.createElement(_react2.FormattedMessage,{id:"kbn.management.objects.objectsTable.exportObjectsConfirmModal.exportAllButtonLabel",defaultMessage:"Export all"})))))))))}},{key:"render",value:function render(){var _this4=this;var _this$state6=this.state,selectedSavedObjects=_this$state6.selectedSavedObjects,page=_this$state6.page,perPage=_this$state6.perPage,savedObjects=_this$state6.savedObjects,filteredItemCount=_this$state6.filteredItemCount,isSearching=_this$state6.isSearching,savedObjectCounts=_this$state6.savedObjectCounts;var selectionConfig={onSelectionChange:this.onSelectionChanged};var filterOptions=this.savedObjectTypes.map((function(type){return{value:type,name:type,view:"".concat(type," (").concat(savedObjectCounts[type]||0,")")}}));return _react.default.createElement(_eui.EuiPageContent,{horizontalPosition:"center"},this.renderFlyout(),this.renderRelationships(),this.renderDeleteConfirmModal(),this.renderExportAllOptionsModal(),_react.default.createElement(_header.Header,{onExportAll:function onExportAll(){return _this4.setState({isShowingExportAllOptionsModal:true})},onImport:this.showImportFlyout,onRefresh:this.refreshData,filteredCount:filteredItemCount}),_react.default.createElement(_eui.EuiSpacer,{size:"xs"}),_react.default.createElement(_table.Table,{itemId:"id",selectionConfig:selectionConfig,selectedSavedObjects:selectedSavedObjects,onQueryChange:this.onQueryChange,onTableChange:this.onTableChange,filterOptions:filterOptions,onExport:this.onExport,canDelete:this.props.uiCapabilities.savedObjectsManagement.delete,onDelete:this.onDelete,goInspectObject:this.props.goInspectObject,pageIndex:page,pageSize:perPage,items:savedObjects,totalItemCount:filteredItemCount,isSearching:isSearching,onShowRelationships:this.onShowRelationships,canGoInApp:this.props.canGoInApp}))}}]);return ObjectsTable}(_react.Component);exports.ObjectsTable=ObjectsTable;_defineProperty(ObjectsTable,"propTypes",{savedObjectsClient:_propTypes.default.object.isRequired,indexPatterns:_propTypes.default.object.isRequired,$http:_propTypes.default.func.isRequired,basePath:_propTypes.default.string.isRequired,perPageConfig:_propTypes.default.number,newIndexPatternUrl:_propTypes.default.string.isRequired,confirmModalPromise:_propTypes.default.func.isRequired,services:_propTypes.default.array.isRequired,uiCapabilities:_propTypes.default.object.isRequired,goInspectObject:_propTypes.default.func.isRequired,canGoInApp:_propTypes.default.func.isRequired})},606:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.resolveIndexPatternConflicts=resolveIndexPatternConflicts;exports.saveObjects=saveObjects;exports.saveObject=saveObject;exports.resolveSavedSearches=resolveSavedSearches;exports.resolveSavedObjects=resolveSavedObjects;var _i18n=__webpack_require__(1);function ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);if(enumerableOnly)symbols=symbols.filter((function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable}));keys.push.apply(keys,symbols)}return keys}function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=arguments[i]!=null?arguments[i]:{};if(i%2){ownKeys(source,true).forEach((function(key){_defineProperty(target,key,source[key])}))}else if(Object.getOwnPropertyDescriptors){Object.defineProperties(target,Object.getOwnPropertyDescriptors(source))}else{ownKeys(source).forEach((function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))}))}}return target}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}function getSavedObject(doc,services){var service,obj;return regeneratorRuntime.async((function getSavedObject$(_context){while(1){switch(_context.prev=_context.next){case 0:service=services.find((function(service){return service.type===doc._type}));if(service){_context.next=3;break}return _context.abrupt("return");case 3:_context.next=5;return regeneratorRuntime.awrap(service.get());case 5:obj=_context.sent;obj.id=doc._id;obj.migrationVersion=doc._migrationVersion;return _context.abrupt("return",obj);case 9:case"end":return _context.stop()}}}))}function addJsonFieldToIndexPattern(target,sourceString,fieldName,indexName){if(sourceString){try{target[fieldName]=JSON.parse(sourceString)}catch(error){throw new Error(_i18n.i18n.translate("kbn.management.objects.parsingFieldErrorMessage",{defaultMessage:"Error encountered parsing {fieldName} for index pattern {indexName}: {errorMessage}",values:{fieldName:fieldName,indexName:indexName,errorMessage:error.message}}))}}}function importIndexPattern(doc,indexPatterns,overwriteAll,confirmModalPromise){var emptyPattern,_doc$_source,title,timeFieldName,fields,fieldFormatMap,sourceFilters,type,typeMeta,importedIndexPattern,newId;return regeneratorRuntime.async((function importIndexPattern$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:_context2.next=2;return regeneratorRuntime.awrap(indexPatterns.make());case 2:emptyPattern=_context2.sent;_doc$_source=doc._source,title=_doc$_source.title,timeFieldName=_doc$_source.timeFieldName,fields=_doc$_source.fields,fieldFormatMap=_doc$_source.fieldFormatMap,sourceFilters=_doc$_source.sourceFilters,type=_doc$_source.type,typeMeta=_doc$_source.typeMeta;importedIndexPattern={id:doc._id,title:title,timeFieldName:timeFieldName};if(type){importedIndexPattern.type=type}addJsonFieldToIndexPattern(importedIndexPattern,fields,"fields",title);addJsonFieldToIndexPattern(importedIndexPattern,fieldFormatMap,"fieldFormatMap",title);addJsonFieldToIndexPattern(importedIndexPattern,sourceFilters,"sourceFilters",title);addJsonFieldToIndexPattern(importedIndexPattern,typeMeta,"typeMeta",title);Object.assign(emptyPattern,importedIndexPattern);_context2.next=13;return regeneratorRuntime.awrap(emptyPattern.create(overwriteAll));case 13:newId=_context2.sent;if(newId){_context2.next=26;break}_context2.prev=15;_context2.next=18;return regeneratorRuntime.awrap(confirmModalPromise(_i18n.i18n.translate("kbn.management.indexPattern.confirmOverwriteLabel",{values:{title:this.title},defaultMessage:"Are you sure you want to overwrite '{title}'?"}),{title:_i18n.i18n.translate("kbn.management.indexPattern.confirmOverwriteTitle",{defaultMessage:"Overwrite {type}?",values:{type:type}}),confirmButtonText:_i18n.i18n.translate("kbn.management.indexPattern.confirmOverwriteButton",{defaultMessage:"Overwrite"})}));case 18:_context2.next=20;return regeneratorRuntime.awrap(emptyPattern.create(true));case 20:newId=_context2.sent;_context2.next=26;break;case 23:_context2.prev=23;_context2.t0=_context2["catch"](15);return _context2.abrupt("return");case 26:indexPatterns.clearCache(newId);return _context2.abrupt("return",newId);case 28:case"end":return _context2.stop()}}}),null,this,[[15,23]])}function importDocument(obj,doc,overwriteAll){return regeneratorRuntime.async((function importDocument$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:_context3.next=2;return regeneratorRuntime.awrap(obj.applyESResp(_objectSpread({references:doc._references||[]},doc)));case 2:_context3.next=4;return regeneratorRuntime.awrap(obj.save({confirmOverwrite:!overwriteAll}));case 4:return _context3.abrupt("return",_context3.sent);case 5:case"end":return _context3.stop()}}}))}function groupByType(docs){var defaultDocTypes={searches:[],indexPatterns:[],other:[]};return docs.reduce((function(types,doc){switch(doc._type){case"search":types.searches.push(doc);break;case"index-pattern":types.indexPatterns.push(doc);break;default:types.other.push(doc)}return types}),defaultDocTypes)}function awaitEachItemInParallel(list,op){return regeneratorRuntime.async((function awaitEachItemInParallel$(_context4){while(1){switch(_context4.prev=_context4.next){case 0:_context4.next=2;return regeneratorRuntime.awrap(Promise.all(list.map((function(item){return op(item)}))));case 2:return _context4.abrupt("return",_context4.sent);case 3:case"end":return _context4.stop()}}}))}function resolveIndexPatternConflicts(resolutions,conflictedIndexPatterns,overwriteAll){var importCount;return regeneratorRuntime.async((function resolveIndexPatternConflicts$(_context6){while(1){switch(_context6.prev=_context6.next){case 0:importCount=0;_context6.next=3;return regeneratorRuntime.awrap(awaitEachItemInParallel(conflictedIndexPatterns,(function _callee(_ref){var obj,oldIndexId,resolution,newIndexId,filter;return regeneratorRuntime.async((function _callee$(_context5){while(1){switch(_context5.prev=_context5.next){case 0:obj=_ref.obj;oldIndexId=obj.searchSource.getOwnField("index");if(typeof oldIndexId!=="string"){oldIndexId=oldIndexId.id}resolution=resolutions.find((function(_ref2){var oldId=_ref2.oldId;return oldId===oldIndexId}));if(!resolution){_context5.next=8;break}newIndexId=resolution.newId;_context5.next=8;return regeneratorRuntime.awrap(obj.hydrateIndexPattern(newIndexId));case 8:filter=(obj.searchSource.getOwnField("filter")||[]).map((function(filter){if(!(filter.meta&&filter.meta.index)){return filter}resolution=resolutions.find((function(_ref3){var oldId=_ref3.oldId;return oldId===filter.meta.index}));return resolution?_objectSpread({},filter,{},{meta:_objectSpread({},filter.meta,{index:resolution.newId})}):filter}));if(filter.length>0){obj.searchSource.setField("filter",filter)}if(resolution){_context5.next=12;break}return _context5.abrupt("return");case 12:_context5.next=14;return regeneratorRuntime.awrap(saveObject(obj,overwriteAll));case 14:if(!_context5.sent){_context5.next=16;break}importCount++;case 16:case"end":return _context5.stop()}}}))})));case 3:return _context6.abrupt("return",importCount);case 4:case"end":return _context6.stop()}}}))}function saveObjects(objs,overwriteAll){var importCount;return regeneratorRuntime.async((function saveObjects$(_context8){while(1){switch(_context8.prev=_context8.next){case 0:importCount=0;_context8.next=3;return regeneratorRuntime.awrap(awaitEachItemInParallel(objs,(function _callee2(obj){return regeneratorRuntime.async((function _callee2$(_context7){while(1){switch(_context7.prev=_context7.next){case 0:_context7.next=2;return regeneratorRuntime.awrap(saveObject(obj,overwriteAll));case 2:if(!_context7.sent){_context7.next=4;break}importCount++;case 4:case"end":return _context7.stop()}}}))})));case 3:return _context8.abrupt("return",importCount);case 4:case"end":return _context8.stop()}}}))}function saveObject(obj,overwriteAll){return regeneratorRuntime.async((function saveObject$(_context9){while(1){switch(_context9.prev=_context9.next){case 0:_context9.next=2;return regeneratorRuntime.awrap(obj.save({confirmOverwrite:!overwriteAll}));case 2:return _context9.abrupt("return",_context9.sent);case 3:case"end":return _context9.stop()}}}))}function resolveSavedSearches(savedSearches,services,indexPatterns,overwriteAll){var importCount;return regeneratorRuntime.async((function resolveSavedSearches$(_context11){while(1){switch(_context11.prev=_context11.next){case 0:importCount=0;_context11.next=3;return regeneratorRuntime.awrap(awaitEachItemInParallel(savedSearches,(function _callee3(searchDoc){var obj;return regeneratorRuntime.async((function _callee3$(_context10){while(1){switch(_context10.prev=_context10.next){case 0:_context10.next=2;return regeneratorRuntime.awrap(getSavedObject(searchDoc,services));case 2:obj=_context10.sent;if(obj){_context10.next=5;break}return _context10.abrupt("return");case 5:_context10.next=7;return regeneratorRuntime.awrap(importDocument(obj,searchDoc,overwriteAll));case 7:if(!_context10.sent){_context10.next=9;break}importCount++;case 9:case"end":return _context10.stop()}}}))})));case 3:return _context11.abrupt("return",importCount);case 4:case"end":return _context11.stop()}}}))}function resolveSavedObjects(savedObjects,overwriteAll,services,indexPatterns,confirmModalPromise){var docTypes,importedObjectCount,failedImports,conflictedSearchDocs,conflictedIndexPatterns,conflictedSavedObjectsLinkedToSavedSearches;return regeneratorRuntime.async((function resolveSavedObjects$(_context15){while(1){switch(_context15.prev=_context15.next){case 0:docTypes=groupByType(savedObjects);importedObjectCount=0;failedImports=[];_context15.next=5;return regeneratorRuntime.awrap(awaitEachItemInParallel(docTypes.indexPatterns,(function _callee4(indexPatternDoc){var importedIndexPatternId;return regeneratorRuntime.async((function _callee4$(_context12){while(1){switch(_context12.prev=_context12.next){case 0:_context12.prev=0;_context12.next=3;return regeneratorRuntime.awrap(importIndexPattern(indexPatternDoc,indexPatterns,overwriteAll,confirmModalPromise));case 3:importedIndexPatternId=_context12.sent;if(importedIndexPatternId){importedObjectCount++}_context12.next=10;break;case 7:_context12.prev=7;_context12.t0=_context12["catch"](0);failedImports.push({indexPatternDoc:indexPatternDoc,error:_context12.t0});case 10:case"end":return _context12.stop()}}}),null,null,[[0,7]])})));case 5:conflictedSearchDocs=[];conflictedIndexPatterns=[];conflictedSavedObjectsLinkedToSavedSearches=[];_context15.next=10;return regeneratorRuntime.awrap(awaitEachItemInParallel(docTypes.searches,(function _callee5(searchDoc){var obj;return regeneratorRuntime.async((function _callee5$(_context13){while(1){switch(_context13.prev=_context13.next){case 0:_context13.next=2;return regeneratorRuntime.awrap(getSavedObject(searchDoc,services));case 2:obj=_context13.sent;_context13.prev=3;_context13.next=6;return regeneratorRuntime.awrap(importDocument(obj,searchDoc,overwriteAll));case 6:if(!_context13.sent){_context13.next=8;break}importedObjectCount++;case 8:_context13.next=13;break;case 10:_context13.prev=10;_context13.t0=_context13["catch"](3);if(_context13.t0.constructor.name==="SavedObjectNotFound"){if(_context13.t0.savedObjectType==="index-pattern"){conflictedIndexPatterns.push({obj:obj,doc:searchDoc})}else{conflictedSearchDocs.push(searchDoc)}}else{failedImports.push({obj:obj,error:_context13.t0})}case 13:case"end":return _context13.stop()}}}),null,null,[[3,10]])})));case 10:_context15.next=12;return regeneratorRuntime.awrap(awaitEachItemInParallel(docTypes.other,(function _callee6(otherDoc){var obj,isIndexPatternNotFound;return regeneratorRuntime.async((function _callee6$(_context14){while(1){switch(_context14.prev=_context14.next){case 0:_context14.next=2;return regeneratorRuntime.awrap(getSavedObject(otherDoc,services));case 2:obj=_context14.sent;_context14.prev=3;_context14.next=6;return regeneratorRuntime.awrap(importDocument(obj,otherDoc,overwriteAll));case 6:if(!_context14.sent){_context14.next=8;break}importedObjectCount++;case 8:_context14.next=14;break;case 10:_context14.prev=10;_context14.t0=_context14["catch"](3);isIndexPatternNotFound=_context14.t0.constructor.name==="SavedObjectNotFound"&&_context14.t0.savedObjectType==="index-pattern";if(isIndexPatternNotFound&&obj.savedSearchId){conflictedSavedObjectsLinkedToSavedSearches.push(obj)}else if(isIndexPatternNotFound){conflictedIndexPatterns.push({obj:obj,doc:otherDoc})}else{failedImports.push({obj:obj,error:_context14.t0})}case 14:case"end":return _context14.stop()}}}),null,null,[[3,10]])})));case 12:return _context15.abrupt("return",{conflictedIndexPatterns:conflictedIndexPatterns,conflictedSavedObjectsLinkedToSavedSearches:conflictedSavedObjectsLinkedToSavedSearches,conflictedSearchDocs:conflictedSearchDocs,importedObjectCount:importedObjectCount,failedImports:failedImports});case 13:case"end":return _context15.stop()}}}))}},607:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.extractExportDetails=extractExportDetails;function extractExportDetails(blob){var reader,content,lines,maybeDetails;return regeneratorRuntime.async((function extractExportDetails$(_context){while(1){switch(_context.prev=_context.next){case 0:reader=new FileReader;_context.next=3;return regeneratorRuntime.awrap(new Promise((function(resolve,reject){reader.addEventListener("loadend",(function(e){resolve(e.target.result)}));reader.addEventListener("error",(function(e){reject(e)}));reader.readAsText(blob,"utf-8")})));case 3:content=_context.sent;lines=content.split("\n").filter((function(l){return l.length>0}));maybeDetails=JSON.parse(lines[lines.length-1]);if(!isExportDetails(maybeDetails)){_context.next=8;break}return _context.abrupt("return",maybeDetails);case 8:case"end":return _context.stop()}}}))}function isExportDetails(object){return"exportedCount"in object&&"missingRefCount"in object&&"missingReferences"in object}},608:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _exportNames={IndexPatternCreationConfig:true,IndexPatternListConfig:true};Object.defineProperty(exports,"IndexPatternCreationConfig",{enumerable:true,get:function get(){return _creation.IndexPatternCreationConfig}});Object.defineProperty(exports,"IndexPatternListConfig",{enumerable:true,get:function get(){return _list.IndexPatternListConfig}});var _index_pattern_management_service=__webpack_require__(1945);Object.keys(_index_pattern_management_service).forEach((function(key){if(key==="default"||key==="__esModule")return;if(Object.prototype.hasOwnProperty.call(_exportNames,key))return;Object.defineProperty(exports,key,{enumerable:true,get:function get(){return _index_pattern_management_service[key]}})}));var _creation=__webpack_require__(609);var _list=__webpack_require__(610)},609:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});Object.defineProperty(exports,"IndexPatternCreationConfig",{enumerable:true,get:function get(){return _config.IndexPatternCreationConfig}});Object.defineProperty(exports,"IndexPatternCreationManager",{enumerable:true,get:function get(){return _manager.IndexPatternCreationManager}});var _config=__webpack_require__(1946);var _manager=__webpack_require__(1947)},610:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});Object.defineProperty(exports,"IndexPatternListConfig",{enumerable:true,get:function get(){return _config.IndexPatternListConfig}});Object.defineProperty(exports,"IndexPatternListManager",{enumerable:true,get:function get(){return _manager.IndexPatternListManager}});var _config=__webpack_require__(1948);var _manager=__webpack_require__(1949)},611:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.SavedObjectsManagementActionRegistry=void 0;var actions=new Map;var SavedObjectsManagementActionRegistry={register:function register(action){if(!action.id){throw new TypeError("Saved Objects Management Actions must have an id")}if(actions.has(action.id)){throw new Error("Saved Objects Management Action with id '".concat(action.id,"' already exists"))}actions.set(action.id,action)},has:function has(actionId){return actions.has(actionId)},get:function get(){return Array.from(actions.values())}};exports.SavedObjectsManagementActionRegistry=SavedObjectsManagementActionRegistry},612:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.getSupportedScriptingLanguages=getSupportedScriptingLanguages;exports.getDeprecatedScriptingLanguages=getDeprecatedScriptingLanguages;exports.GetEnabledScriptingLanguagesProvider=GetEnabledScriptingLanguagesProvider;var _chrome=_interopRequireDefault(__webpack_require__(10));var _notify=__webpack_require__(18);var _i18n=__webpack_require__(1);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function getSupportedScriptingLanguages(){return["painless"]}function getDeprecatedScriptingLanguages(){return[]}function GetEnabledScriptingLanguagesProvider($http){return function(){return $http.get(_chrome.default.addBasePath("/api/kibana/scripts/languages")).then((function(res){return res.data})).catch((function(){_notify.toastNotifications.addDanger(_i18n.i18n.translate("common.ui.scriptingLanguages.errorFetchingToastDescription",{defaultMessage:"Error getting available scripting languages from Elasticsearch"}));return[]}))}}},614:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});Object.defineProperty(exports,"UICapabilitiesProvider",{enumerable:true,get:function get(){return _ui_capabilities_provider.UICapabilitiesProvider}});Object.defineProperty(exports,"injectUICapabilities",{enumerable:true,get:function get(){return _inject_ui_capabilities.injectUICapabilities}});var _ui_capabilities_provider=__webpack_require__(2048);var _inject_ui_capabilities=__webpack_require__(2049)},615:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.UICapabilitiesContext=void 0;var _react=_interopRequireDefault(__webpack_require__(0));function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var UICapabilitiesContext=_react.default.createContext({navLinks:{},catalogue:{},management:{}});exports.UICapabilitiesContext=UICapabilitiesContext},636:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.setServices=setServices;exports.getServices=getServices;var services=null;function setServices(newServices){services=newServices}function getServices(){if(!services){throw new Error("Kibana services not set - are you trying to import this module from outside of the home app?")}return services}},638:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});Object.defineProperty(exports,"createUiStatsReporter",{enumerable:true,get:function get(){return _telemetry_analytics.createUiStatsReporter}});Object.defineProperty(exports,"METRIC_TYPE",{enumerable:true,get:function get(){return _analytics.METRIC_TYPE}});Object.defineProperty(exports,"UiStatsMetricType",{enumerable:true,get:function get(){return _analytics.UiStatsMetricType}});var _telemetry_analytics=__webpack_require__(639);var _analytics=__webpack_require__(166)},639:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.createUiStatsReporter=void 0;var _new_platform=__webpack_require__(6);var createUiStatsReporter=function createUiStatsReporter(appName){var usageCollection=_new_platform.npSetup.plugins.usageCollection;return usageCollection.reportUiStats.bind(usageCollection,appName)};exports.createUiStatsReporter=createUiStatsReporter},649:function(module,exports,__webpack_require__){module.exports=__webpack_require__(15)(1409)},80:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});Object.defineProperty(exports,"PAGE_TITLE_COMPONENT",{enumerable:true,get:function get(){return _default_component_registry.PAGE_TITLE_COMPONENT}});Object.defineProperty(exports,"PAGE_SUBTITLE_COMPONENT",{enumerable:true,get:function get(){return _default_component_registry.PAGE_SUBTITLE_COMPONENT}});Object.defineProperty(exports,"PAGE_FOOTER_COMPONENT",{enumerable:true,get:function get(){return _default_component_registry.PAGE_FOOTER_COMPONENT}});Object.defineProperty(exports,"registerSettingsComponent",{enumerable:true,get:function get(){return _component_registry.registerSettingsComponent}});Object.defineProperty(exports,"MANAGEMENT_BREADCRUMB",{enumerable:true,get:function get(){return _breadcrumbs.MANAGEMENT_BREADCRUMB}});exports.management=void 0;var _default_component_registry=__webpack_require__(594);var _component_registry=__webpack_require__(266);var _breadcrumbs=__webpack_require__(1856);var _new_platform=__webpack_require__(6);var management=_new_platform.npStart.plugins.management.legacy;exports.management=management},81:function(module,exports){module.exports=__kbnSharedDeps__.KbnI18nAngular},9:function(module,exports){module.exports=__kbnSharedDeps__.ReactDom},96:function(module,exports){module.exports=__kbnSharedDeps__.ReactRouterDom}})["plugin"];